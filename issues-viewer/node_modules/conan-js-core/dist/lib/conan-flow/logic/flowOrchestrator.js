import { FlowEventTiming } from "../domain/flowRuntimeEvents";
import { FlowRuntimeTracker } from "./flowRuntimeTracker";
export class FlowOrchestrator {
    constructor(eventsProcessor) {
        this.eventsProcessor = eventsProcessor;
    }
    onRuntimeEvent(tracker, event) {
        if (event.timing === FlowEventTiming.START) {
            this.currentTracker = tracker;
        }
        else if (event.timing === FlowEventTiming.END || event.timing === FlowEventTiming.CANCEL) {
            this.currentTracker = undefined;
        }
        this.eventsProcessor.forEach(it => it(event));
    }
    createRuntimeTracker(flowController, source, runtimeEvent, payload) {
        return new FlowRuntimeTracker(this, {
            flowController: flowController,
            source,
            runtimeEvent,
            payload,
            nature: flowController.flowDef.nature
        });
    }
}
//# sourceMappingURL=flowOrchestrator.js.map