(this["webpackJsonpconan-issues-viewer"]=this["webpackJsonpconan-issues-viewer"]||[]).push([[0],{12:function(e,t,n){e.exports=n(37)},17:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n.n(s),a=n(9),c=n.n(a),o=(n(17),n(2)),u=n(3),i=function(e){var t=e.org,n=e.repo,r=e.page,a=e.setOrgAndRepo,c=e.setJumpToPage,o=Object(s.useState)(t),i=Object(u.a)(o,2),l=i[0],m=i[1],p=Object(s.useState)(n),f=Object(u.a)(p,2),h=f[0],E=f[1],g=Object(s.useState)(""+r),d=Object(u.a)(g,2),v=d[0],b=d[1];return s.createElement("form",null,s.createElement("div",null,s.createElement("label",{htmlFor:"org",style:{marginRight:5}},"Org:"),s.createElement("input",{name:"org",value:l,onChange:function(e){m(e.target.value)}}),s.createElement("label",{htmlFor:"repo",style:{marginRight:5,marginLeft:10}},"Repo:"),s.createElement("input",{name:"repo",value:h,onChange:function(e){E(e.target.value)}}),s.createElement("button",{type:"button",style:{marginLeft:5},onClick:function(){a(l,h)}},"Load Repo")),s.createElement("div",{style:{marginTop:5}},s.createElement("label",{htmlFor:"jumpToPage",style:{marginRight:5}},"Issues Page:"),s.createElement("input",{name:"jumpToPage",value:v,onChange:function(e){b(e.target.value)}}),s.createElement("button",{type:"button",style:{marginLeft:5},onClick:function(){var e=parseInt(v);e>=1&&c(e)}},"Jump to Page")))},l=function(e){var t=e.user,n=(e.orientation,e.link),r=void 0===n||n,a=(e.classes,s.createElement(s.Fragment,null,s.createElement("img",{src:t.avatar_url,alt:""}),s.createElement("div",null,t.login)));return r?s.createElement("a",{href:"https://github.com/".concat(t.login)},a):s.createElement("span",null,a)},m=function(e){var t=e.labels;e.className;return s.createElement("div",null,t.map((function(e){return s.createElement("span",{key:e.id,className:"issue__label",style:{boxShadow:"0 0 2px #".concat(e.color),borderColor:"#".concat(e.color)}},e.name)})))},p=function(e){var t=e.number,n=e.title,r=e.labels,a=e.user,c=e.comments,o=e.body,u=void 0===o?"":o,i=e.showIssueComments,p=1===c?"comment":"comments";return s.createElement("div",null,s.createElement(l,{user:a}),s.createElement("div",{className:"issue__body"},s.createElement("a",{href:"#comments",onClick:function(e){e.preventDefault(),e.stopPropagation(),i(t)}},s.createElement("span",null,"#",t),s.createElement("span",null,n)),s.createElement("br",null)," (",c," ",p,")",s.createElement("p",{className:"issue__summary"},u),s.createElement(m,{labels:r})))},f=function(e){var t=e.data,n=e.actions;if(null!=t.issues&&null!=t.issues.map){var r=t.issues.map((function(e){return s.createElement("li",{key:e.id},s.createElement(p,Object.assign({},e,{showIssueComments:n.fetchIssue})))}));return s.createElement("ul",null,r)}return s.createElement(s.Fragment,null)},h=n(1),E=h.Conan.state({name:"issues",initialData:{issuesByNumber:{},issues:[],displayType:"issues"},reducers:function(e){return{$fetch:function(t){return t.forEach((function(t){e().issuesByNumber[t.number]=t})),Object(o.a)(Object(o.a)({},e()),{},{issues:t,displayType:"issues"})},$fetchIssue:function(t){return Object(o.a)(Object(o.a)({},e()),{},{issueId:t,displayType:"comments"})},$switchDisplay:function(t){return Object(o.a)(Object(o.a)({},e()),{},{displayType:t})}}},actions:function(e){return{fetch:function(t,n,s){return e.monitor(O.issuesService.fetch(t,n,s).catch((function(){return e.reducers.$fetch([])})),(function(e,t){return t.$fetch(e)}),"fetch",[t,n,s])},fetchIssue:function(t){return e.chain((function(e){return e.$fetchIssue(t)}))},showIssues:function(){return e.chain((function(e){return e.$switchDisplay("issues")}))}}}}),g=n(10),d=n(11),v=function(){function e(){Object(g.a)(this,e)}return Object(d.a)(e,[{key:"fetch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return h.Asaps.fetch("https://api.github.com/repos/".concat(t,"/").concat(e,"/issues?per_page=25&page=").concat(n))}},{key:"fetchComments",value:function(e){return h.Asaps.fetch(e)}},{key:"fetchRepoDetails",value:function(e,t){return h.Asaps.fetch("https://api.github.com/repos/".concat(e,"/").concat(t))}}]),e}(),b=h.Conan.state({name:"issues-comments",initialData:{commentsByIssue:{}},reducers:function(e){return{$fetchComments:function(t,n){return e().commentsByIssue[t]=n,Object(o.a)({},e())}}},actions:function(e){return{fetchComments:function(t){return e.monitor(O.issuesService.fetchComments(t.comments_url).catch((function(){return e.reducers.$fetch([])})),(function(e,n){return n.$fetchComments(t.id,e)}),"fetchComments",t.comments_url)}}}}),y=h.Conan.light("repo",{org:"rails",repo:"rails",page:1}),C=h.Conan.state({name:"repo-details",initialData:{openIssuesCount:-1,error:null},reducers:function(){return{$fetchRepoDetails:function(e,t){return{error:t,openIssuesCount:e}}}},actions:function(e){return{fetchRepoDetails:function(t,n){return e.monitor(O.issuesService.fetchRepoDetails(t,n).catch((function(){return e.reducers.$fetchRepoDetails(-1,"error loading")})),(function(e,t){return t.$fetchRepoDetails(e.open_issues_count,"")}),"fetchRepoDetails",[t,n])}}}}),O=h.DiContextFactory.createContext({issuesCommentsState:b,issuesState:E,repoState:y,repoDetailsState:C},{issuesService:v});function j(e){var t=e.org,n=e.repo;return s.createElement("span",null,s.createElement("a",{href:"https://github.com/".concat(t),className:"header__org"},t)," / ",s.createElement("a",{href:"https://github.com/".concat(t,"/").concat(n),className:"header__repo"},n))}function I(e){var t=e.openIssuesCount,n=void 0===t?-1:t,r=e.org,a=e.repo;if(-1===n)return s.createElement("h1",null,"Open issues for ",s.createElement(j,{org:r,repo:a}));var c=1===n?"issue":"issues";return s.createElement("h1",null,s.createElement("span",{className:"header__openIssues"},n)," open"," ",c," for ",s.createElement(j,{org:r,repo:a}))}var S=function(e){var t=e.org,n=e.repo,r=e.page,a=void 0===r?1:r,c=e.fetchIssues,o=e.fetchRepoDetails;return Object(s.useEffect)((function(){c(t,n,a),o(t,n)}),[t,n,a]),s.createElement("div",{id:"issue-list-page"},C.connectMap(I,(function(e){return{org:t,repo:n,openIssuesCount:e.openIssuesCount}})),O.issuesState.connect(f))},D=function(e){var t=e.issue.state;return s.createElement("span",null,t)},_=function(e){var t=e.issue;return s.createElement("span",null,"#",t.number)},R=function(e){var t=e.issue;return s.createElement("div",null,s.createElement(_,{issue:t}),s.createElement(D,{issue:t}),s.createElement(l,{user:t.user,orientation:"horizontal"}))};function $(e){var t=e.comment;return s.createElement("div",null,s.createElement(l,{user:t.user,orientation:"horizontal"}),s.createElement("div",null,t.body))}function k(e){var t=e.comments,n=void 0===t?[]:t;return 0===e.issue.comments?s.createElement("div",{className:"issue-detail--no-comments"},"No comments"):n&&0!==n.length?s.createElement("ul",null,n.map((function(e){return s.createElement("li",{key:e.id},s.createElement($,{comment:e}))}))):s.createElement("div",{className:"issue-detail--comments-loading"},"Comments loading...")}var N=function(e){var t=e.issue,n=e.showIssuesList,r=e.fetchComments,a=Object(h.useConanState)(b),c=Object(u.a)(a,1)[0];Object(s.useEffect)((function(){t&&r(t)}),[]);var o,i=s.createElement("button",{onClick:n},"Back to Issues List"),l=c.commentsByIssue[t.id];l&&(o=s.createElement(k,{issue:t,comments:l}));var p=s.createElement("div",null,s.createElement("h1",null,t.title),i,s.createElement(R,{issue:t}),s.createElement(m,{labels:t.labels}),s.createElement("hr",null),s.createElement("div",null,t.body.replace(/\B(@([a-zA-Z0-9](-?[a-zA-Z0-9_])+))/g,"**[$1](https://github.com/$2)**")),s.createElement("hr",null),s.createElement("div",null,"Comments"),s.createElement("ul",null,o));return s.createElement("div",null,p)},w=function(){return O.issuesState.connectData(T)},T=function(e){var t,n=e.displayType,r=e.issuesByNumber,a=e.issueId,c=e.issues,l=Object(h.useConanState)(y),m=Object(u.a)(l,1)[0];return t="issues"===n?s.createElement(s.Fragment,null,s.createElement(i,{org:m.org,repo:m.repo,page:m.page,setOrgAndRepo:function(e,t){O.repoState.do.update((function(n){return Object(o.a)(Object(o.a)({},n),{},{org:e,repo:t})}))},setJumpToPage:function(e){O.repoState.do.update((function(t){return Object(o.a)(Object(o.a)({},t),{},{page:e})}))}}),s.createElement(S,{org:m.org,repo:m.repo,page:m.page,fetchIssues:O.issuesState.do.fetch,fetchRepoDetails:O.repoDetailsState.do.fetchRepoDetails,issues:c})):s.createElement(N,{issue:r[a],org:m.org,repo:m.repo,showIssuesList:O.issuesState.do.showIssues,fetchComments:O.issuesCommentsState.do.fetchComments}),s.createElement("div",{className:"App"},t)};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.a37b39d7.chunk.js.map