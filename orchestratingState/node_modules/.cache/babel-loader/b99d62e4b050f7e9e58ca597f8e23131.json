{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/albertoalmansa/Projects/conan-js/tmp/conan-js-examples/orchestratingState/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _construct = require(\"/Users/albertoalmansa/Projects/conan-js/tmp/conan-js-examples/orchestratingState/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/construct\");\n\nvar _toConsumableArray = require(\"/Users/albertoalmansa/Projects/conan-js/tmp/conan-js-examples/orchestratingState/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _defineProperty = require(\"/Users/albertoalmansa/Projects/conan-js/tmp/conan-js-examples/orchestratingState/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/defineProperty\");\n\nvar _createForOfIteratorHelper = require(\"/Users/albertoalmansa/Projects/conan-js/tmp/conan-js-examples/orchestratingState/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _inherits = require(\"/Users/albertoalmansa/Projects/conan-js/tmp/conan-js-examples/orchestratingState/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"/Users/albertoalmansa/Projects/conan-js/tmp/conan-js-examples/orchestratingState/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper\");\n\nvar _classCallCheck = require(\"/Users/albertoalmansa/Projects/conan-js/tmp/conan-js-examples/orchestratingState/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/albertoalmansa/Projects/conan-js/tmp/conan-js-examples/orchestratingState/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: !0\n});\n\nvar FlowEventNature,\n    FlowEventSource,\n    FlowEventLevel,\n    FlowEventTiming,\n    RuleType,\n    LOGIC_OPERATOR,\n    React = require(\"react\");\n\n!function (t) {\n  t.TRANSITION = \"TRANSITION\", t.STEP = \"STEP\", t.STATUS = \"STATUS\", t.PROCESSING_STATUS = \"PROCESSING_STATUS\", t.STATE = \"STATE\", t.PROCESSING_STATE = \"PROCESSING_STATE\";\n}(exports.StatusEventType || (exports.StatusEventType = {}));\n\nvar DynamicOrStatics = /*#__PURE__*/function () {\n  function DynamicOrStatics() {\n    _classCallCheck(this, DynamicOrStatics);\n  }\n\n  _createClass(DynamicOrStatics, null, [{\n    key: \"result\",\n    value: function result(t, e) {\n      return \"function\" == typeof t ? t(e) : t;\n    }\n  }]);\n\n  return DynamicOrStatics;\n}();\n\n!function (t) {\n  t.MAIN = \"MAIN\", t.META = \"META\", t.HELPER = \"HELPER\", t.ASYNC = \"ASYNC\", t.AUX = \"AUX\", t.ASAP = \"ASAP\";\n}(FlowEventNature || (FlowEventNature = {})), function (t) {\n  t.FLOW_CONTROLLER = \"FLOW_CONTROLLER\", t.FLOW_THREAD = \"FLOW_THREAD\", t.CONTEXT = \"CONTEXT\", t.USER_MSG = \"USER_MSG\", t.FLOW_FACTORY = \"FLOW_FACTORY\";\n}(FlowEventSource || (FlowEventSource = {})), function (t) {\n  t.DEBUG = \"DEBUG\", t.TRACE = \"TRACE\", t.INFO = \"INFO\", t.MILESTONE = \"MILESTONE\", t.WARN = \"WARN\", t.ERROR = \"ERROR\";\n}(FlowEventLevel || (FlowEventLevel = {})), function (t) {\n  t.CONTINUE = \"CONTINUE\", t.START = \"START\", t.END = \"END\", t.CANCEL = \"CANCEL\", t.IN_PROCESS = \"IN_PROCESS\";\n}(FlowEventTiming || (FlowEventTiming = {})), function (t) {\n  t.MONITORING = \"MONITORING\", t.PROCESSING_REACTIONS = \"PROCESSING_REACTIONS\", t.STARTING = \"STARTING\", t.ONCE_ON = \"ONCE_ON\", t.RUN_IF = \"RUN_IF\", t.RUN = \"RUN\", t.ADDING_REACTION = \"ADDING_REACTION\", t.ERROR_USER_CODE = \"ERROR_USER_CODE\", t.MONITOR_TRANSACTION = \"MONITOR_TRANSACTION\", t.REQUESTING_STATUS = \"REQUESTING_STATUS\", t.SETTLING_STATUS = \"SETTLING_STATUS\", t.PROCESSING_STATUS = \"PROCESSING_STATUS\", t.STATUS_REQUEST_COMPLETED = \"STATUS_REQUEST_COMPLETED\", t.REQUESTING_TRANSITION = \"REQUESTING_TRANSITION\", t.ROOT_REQUEST = \"ROOT_REQUEST\", t.CREATING = \"CREATING\", t.USER_REACTIONS = \"USER_REACTIONS\", t.USER_CODE = \"USER_CODE\";\n}(exports.FlowEventType || (exports.FlowEventType = {}));\n\nvar Strings = /*#__PURE__*/function () {\n  function Strings() {\n    _classCallCheck(this, Strings);\n  }\n\n  _createClass(Strings, null, [{\n    key: \"firstCharToLowerCase\",\n    value: function firstCharToLowerCase(t) {\n      return t.substring(0, 1).toLowerCase() + t.substring(1, t.length);\n    }\n  }, {\n    key: \"firstCharToUpperCase\",\n    value: function firstCharToUpperCase(t) {\n      return t.substring(0, 1).toUpperCase() + t.substring(1, t.length);\n    }\n  }, {\n    key: \"camelCaseWithPrefix\",\n    value: function camelCaseWithPrefix(t, e) {\n      return t + this.firstCharToUpperCase(e);\n    }\n  }, {\n    key: \"repeat\",\n    value: function repeat(t, e) {\n      var a = \"\";\n\n      for (var n = 0; n < e; n++) {\n        a += t;\n      }\n\n      return a;\n    }\n  }, {\n    key: \"padEnd\",\n    value: function padEnd(t, e) {\n      if (null == t) return t;\n      var a = e - t.length;\n\n      if (a < 1) {\n        var _a = \"...\",\n            n = 1,\n            r = n + (t.length + _a.length - e);\n        return t.substring(0, n) + _a + t.substring(r, t.length);\n      }\n\n      return t + \" \".repeat(a);\n    }\n  }]);\n\n  return Strings;\n}();\n\nvar RuleLikeParser = /*#__PURE__*/function () {\n  function RuleLikeParser() {\n    _classCallCheck(this, RuleLikeParser);\n  }\n\n  _createClass(RuleLikeParser, null, [{\n    key: \"parse\",\n    value: function parse(t) {\n      return RuleLikeParser.isRule(t) ? t : BaseRules.if(\"-anonymous-\", t);\n    }\n  }, {\n    key: \"isRule\",\n    value: function isRule(t) {\n      return \"test\" in t;\n    }\n  }]);\n\n  return RuleLikeParser;\n}();\n\n!function (t) {\n  t.COMBINED = \"COMBINED\", t.SIMPLE = \"SIMPLE\";\n}(RuleType || (RuleType = {})), function (t) {\n  t.OR = \"OR\", t.AND = \"AND\";\n}(LOGIC_OPERATOR || (LOGIC_OPERATOR = {}));\n\nvar BaseRule = /*#__PURE__*/function () {\n  function BaseRule() {\n    var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !1;\n    var e = arguments.length > 1 ? arguments[1] : undefined;\n\n    _classCallCheck(this, BaseRule);\n\n    this.negate = t, this.baseName = e;\n  }\n\n  _createClass(BaseRule, [{\n    key: \"split\",\n    value: function split(t) {\n      return [this.and(t), this.and(t.inverse())];\n    }\n  }, {\n    key: \"test\",\n    value: function test(t) {\n      var e = this.doEvaluate(t);\n      return !0 === this.negate ? !e : e;\n    }\n  }, {\n    key: \"or\",\n    value: function or(t) {\n      return BaseRules.combineOr(\"OR\", this, t);\n    }\n  }, {\n    key: \"and\",\n    value: function and(t) {\n      return BaseRules.combineAnd(\"AND\", this, t);\n    }\n  }, {\n    key: \"name\",\n    get: function get() {\n      return \"\".concat(!0 === this.negate ? \"!\" : \"\").concat(this.baseName);\n    }\n  }]);\n\n  return BaseRule;\n}();\n\nvar CombinedRule = /*#__PURE__*/function (_BaseRule) {\n  _inherits(CombinedRule, _BaseRule);\n\n  var _super = _createSuper(CombinedRule);\n\n  function CombinedRule(t, e, a) {\n    var _this;\n\n    var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;\n\n    _classCallCheck(this, CombinedRule);\n\n    _this = _super.call(this, n, t), _this.rules = e, _this.operator = a, _this.ruleType = RuleType.COMBINED;\n    return _this;\n  }\n\n  _createClass(CombinedRule, [{\n    key: \"doEvaluate\",\n    value: function doEvaluate(t) {\n      var _iterator = _createForOfIteratorHelper(this.rules),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var e = _step.value;\n          var a = e.test(t);\n          if (!0 === a && this.operator === LOGIC_OPERATOR.OR) return !0;\n          if (!1 === a && this.operator === LOGIC_OPERATOR.AND) return !1;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return this.operator === LOGIC_OPERATOR.AND;\n    }\n  }, {\n    key: \"inverse\",\n    value: function inverse() {\n      var t = !this.negate;\n      return new CombinedRule(this.baseName, this.rules, this.operator, t);\n    }\n  }, {\n    key: \"name\",\n    get: function get() {\n      return \"\".concat(!0 === this.negate ? \"!\" : \"\").concat(this.baseName, \"=[\").concat(this.rules.map(function (t) {\n        return t.name;\n      }).join(\",\"), \"]\");\n    }\n  }]);\n\n  return CombinedRule;\n}(BaseRule);\n\nvar SimpleRule = /*#__PURE__*/function (_BaseRule2) {\n  _inherits(SimpleRule, _BaseRule2);\n\n  var _super2 = _createSuper(SimpleRule);\n\n  function SimpleRule(t, e) {\n    var _this2;\n\n    var a = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n\n    _classCallCheck(this, SimpleRule);\n\n    _this2 = _super2.call(this, a, t), _this2.predicate = e, _this2.ruleType = RuleType.SIMPLE;\n    return _this2;\n  }\n\n  _createClass(SimpleRule, [{\n    key: \"inverse\",\n    value: function inverse() {\n      var t = !this.negate;\n      return new SimpleRule(this.baseName, this.predicate, t);\n    }\n  }, {\n    key: \"doEvaluate\",\n    value: function doEvaluate(t) {\n      return this.predicate(t);\n    }\n  }]);\n\n  return SimpleRule;\n}(BaseRule);\n\nvar BasePredicates = /*#__PURE__*/function () {\n  function BasePredicates() {\n    _classCallCheck(this, BasePredicates);\n  }\n\n  _createClass(BasePredicates, null, [{\n    key: \"isUndefined\",\n    value: function isUndefined() {\n      return BasePredicates.compareByReference(void 0);\n    }\n  }, {\n    key: \"isNull\",\n    value: function isNull() {\n      return BasePredicates.compareByReference(null);\n    }\n  }, {\n    key: \"isNullUn\",\n    value: function isNullUn() {\n      return function (t) {\n        return null == t;\n      };\n    }\n  }, {\n    key: \"compareByReference\",\n    value: function compareByReference(t) {\n      return function (e) {\n        return e === t;\n      };\n    }\n  }, {\n    key: \"isInitialised\",\n    value: function isInitialised() {\n      return function (t) {\n        return null != t;\n      };\n    }\n  }]);\n\n  return BasePredicates;\n}();\n\nvar BaseRules = /*#__PURE__*/function () {\n  function BaseRules() {\n    _classCallCheck(this, BaseRules);\n  }\n\n  _createClass(BaseRules, null, [{\n    key: \"if\",\n    value: function _if(t, e) {\n      return new SimpleRule(t, e);\n    }\n  }, {\n    key: \"ifNot\",\n    value: function ifNot(t, e) {\n      return new SimpleRule(t, e, !0);\n    }\n  }, {\n    key: \"ifUndefined\",\n    value: function ifUndefined() {\n      return BaseRules.if(\"ifUndefined\", BasePredicates.isUndefined());\n    }\n  }, {\n    key: \"ifNull\",\n    value: function ifNull() {\n      return BaseRules.if(\"ifNull\", BasePredicates.isNull());\n    }\n  }, {\n    key: \"ifNullUn\",\n    value: function ifNullUn() {\n      return BaseRules.if(\"ifNullUn\", BasePredicates.isNullUn());\n    }\n  }, {\n    key: \"ifInitialised\",\n    value: function ifInitialised() {\n      return BaseRules.if(\"ifInitialised\", BasePredicates.isInitialised());\n    }\n  }, {\n    key: \"compareByReference\",\n    value: function compareByReference(t, e) {\n      return BaseRules.if(t, BasePredicates.compareByReference(e));\n    }\n  }, {\n    key: \"combineAnd\",\n    value: function combineAnd(t) {\n      for (var _len = arguments.length, e = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        e[_key - 1] = arguments[_key];\n      }\n\n      var a = e.map(RuleLikeParser.parse);\n      return new CombinedRule(t, a, LOGIC_OPERATOR.AND);\n    }\n  }, {\n    key: \"combineOr\",\n    value: function combineOr(t) {\n      for (var _len2 = arguments.length, e = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        e[_key2 - 1] = arguments[_key2];\n      }\n\n      return new CombinedRule(t, e.map(RuleLikeParser.parse), LOGIC_OPERATOR.OR);\n    }\n  }, {\n    key: \"join\",\n    value: function join(t, e) {\n      return BaseRules.if(\"join{\".concat(e.name), function (a) {\n        var n = t(a);\n        return e.test(n);\n      });\n    }\n  }]);\n\n  return BaseRules;\n}();\n\nvar FlowLogger = /*#__PURE__*/function () {\n  function FlowLogger(t) {\n    _classCallCheck(this, FlowLogger);\n\n    this.Rule$ = t;\n  }\n\n  _createClass(FlowLogger, [{\n    key: \"log\",\n    value: function log(t) {\n      if (!this.Rule$().test(t)) {\n        var _e = t.flowController.flowDef.loggingRule;\n        if (!_e) return !1;\n        if (!_e.test(t)) return !1;\n      }\n\n      var e = t.flowController.getCurrentStatusName();\n      return e = e || \"<stopped>\", null != t.payload ? (console.log(Strings.padEnd(\"\".concat(t.type), 30), Strings.padEnd(\"\".concat(t.flowController.getName()), 50), Strings.padEnd(\"\".concat(e), 30), Strings.padEnd(\"\".concat(t.nature), 10), Strings.padEnd(\"\".concat(t.level), 10), Strings.padEnd(\"\".concat(t.timing), 12)), null == t.payload && null == t.shortDesc || (null != t.shortDesc && null != t.payload ? (console.log(\"  =>\".concat(t.shortDesc)), console.log(\" \", t.payload)) : null != t.shortDesc && null != !t.payload ? console.log(\"  =>\".concat(t.shortDesc)) : console.log(\"  =>\".concat(t.payload))), console.log(\"------------------------------------------------------------------------------------------------------------------------------------------------\")) : null != t.shortDesc && (console.log(Strings.padEnd(\"\".concat(t.type), 30), Strings.padEnd(\"\".concat(t.flowController.getName()), 50), Strings.padEnd(\"\".concat(e), 30), Strings.padEnd(\"\".concat(t.level), 10), Strings.padEnd(\"\".concat(t.nature), 10), Strings.padEnd(\"\".concat(t.timing), 10)), console.log(\"  =>\".concat(t.shortDesc))), !0;\n    }\n  }]);\n\n  return FlowLogger;\n}();\n\nvar LoggerFilters = /*#__PURE__*/function () {\n  function LoggerFilters() {\n    _classCallCheck(this, LoggerFilters);\n  }\n\n  _createClass(LoggerFilters, null, [{\n    key: \"trace\",\n    value: function trace() {\n      return BaseRules.if(\"ifTrace\", function (t) {\n        return t.level === FlowEventLevel.TRACE;\n      });\n    }\n  }, {\n    key: \"debug\",\n    value: function debug() {\n      return BaseRules.if(\"ifDebug\", function (t) {\n        return t.level === FlowEventLevel.DEBUG;\n      });\n    }\n  }, {\n    key: \"milestone\",\n    value: function milestone() {\n      return BaseRules.if(\"ifMilestone\", function (t) {\n        return t.level === FlowEventLevel.MILESTONE;\n      });\n    }\n  }, {\n    key: \"info\",\n    value: function info() {\n      return BaseRules.if(\"ifInfo\", function (t) {\n        return t.level === FlowEventLevel.INFO;\n      });\n    }\n  }, {\n    key: \"logName\",\n    value: function logName(t) {\n      return BaseRules.combineOr(\"main/async/meta[\".concat(t, \"]\"), LoggerFilters.mainLogName(t), LoggerFilters.asyncLogName(t), LoggerFilters.metaLogName(t));\n    }\n  }, {\n    key: \"mainLogName\",\n    value: function mainLogName(t) {\n      return BaseRules.if(\"ifLogName={\".concat(t), function (e) {\n        return e.flowController.getName() === t;\n      });\n    }\n  }, {\n    key: \"asyncLogName\",\n    value: function asyncLogName(t) {\n      return BaseRules.if(\"ifLogName={\".concat(t), function (e) {\n        return e.flowController.getName() === \"\".concat(t, \"=>[async]\");\n      });\n    }\n  }, {\n    key: \"metaLogName\",\n    value: function metaLogName(t) {\n      return BaseRules.if(\"ifLogName={\".concat(t), function (e) {\n        return e.flowController.getName() === \"\".concat(t, \"=>[meta]\");\n      });\n    }\n  }, {\n    key: \"eventType\",\n    value: function eventType(t) {\n      return BaseRules.combineAnd(\"eventType[\".concat(t, \"]\"), LoggerFilters.trace().inverse(), BaseRules.if(\"ifEventType={\".concat(t), function (e) {\n        return e.type === t;\n      }));\n    }\n  }, {\n    key: \"statusName\",\n    value: function statusName(t) {\n      return BaseRules.if(\"ifStatusName={\".concat(t), function (e) {\n        return e.flowController.getCurrentStatusName() === t;\n      });\n    }\n  }, {\n    key: \"notInitialising\",\n    value: function notInitialising() {\n      return LoggerFilters.initialising().inverse();\n    }\n  }, {\n    key: \"initialising\",\n    value: function initialising() {\n      return LoggerFilters.statusName(\"$init\");\n    }\n  }, {\n    key: \"nextData\",\n    value: function nextData() {\n      return LoggerFilters.statusName(\"nextData\");\n    }\n  }, {\n    key: \"aux\",\n    value: function aux() {\n      return BaseRules.if(\"ifAux\", function (t) {\n        return t.nature === FlowEventNature.AUX;\n      });\n    }\n  }, {\n    key: \"async\",\n    value: function async() {\n      return BaseRules.if(\"ifAsync\", function (t) {\n        return t.nature === FlowEventNature.ASYNC;\n      });\n    }\n  }, {\n    key: \"helper\",\n    value: function helper() {\n      return BaseRules.if(\"ifHelper\", function (t) {\n        return t.nature === FlowEventNature.HELPER;\n      });\n    }\n  }, {\n    key: \"main\",\n    value: function main() {\n      return BaseRules.if(\"ifMain\", function (t) {\n        return t.nature === FlowEventNature.MAIN;\n      });\n    }\n  }, {\n    key: \"all\",\n    value: function all() {\n      return BaseRules.if(\"all\", function () {\n        return !0;\n      });\n    }\n  }, {\n    key: \"fromInfo\",\n    value: function fromInfo() {\n      return BaseRules.combineOr(\"info and milestone\", LoggerFilters.info(), LoggerFilters.milestone());\n    }\n  }, {\n    key: \"allExceptTraces\",\n    value: function allExceptTraces() {\n      return BaseRules.combineOr(\"all except traces\", LoggerFilters.debug(), LoggerFilters.info(), LoggerFilters.milestone());\n    }\n  }, {\n    key: \"never\",\n    value: function never() {\n      return BaseRules.if(\"never\", function () {\n        return !1;\n      });\n    }\n  }, {\n    key: \"default\",\n    value: function _default() {\n      return BaseRules.combineAnd(\"default filter\", LoggerFilters.milestone(), LoggerFilters.main(), LoggerFilters.initialising().inverse());\n    }\n  }]);\n\n  return LoggerFilters;\n}();\n\nvar FLOW_LOGGER = new FlowLogger(function () {\n  return CURRENT_LOG_FILTER.rule;\n}),\n    CURRENT_LOG_FILTER = {\n  rule: LoggerFilters.default()\n},\n    updateLoggingFilter = function updateLoggingFilter(t) {\n  var e = t(CURRENT_LOG_FILTER.rule);\n  return CURRENT_LOG_FILTER.rule = e, e;\n},\n    setLoggingFilter = function setLoggingFilter(t) {\n  CURRENT_LOG_FILTER.rule = t;\n},\n    getLoggingFilter = function getLoggingFilter() {\n  return CURRENT_LOG_FILTER.rule;\n};\n\nvar Objects = /*#__PURE__*/function () {\n  function Objects() {\n    _classCallCheck(this, Objects);\n  }\n\n  _createClass(Objects, null, [{\n    key: \"mapKeys\",\n    value: function mapKeys(t, e, a) {\n      var n = {};\n      return Object.keys(t).forEach(function (r) {\n        var s = a ? a(r) : r;\n        n[s] = e(t[r]);\n      }), n;\n    }\n  }, {\n    key: \"foreachEntry\",\n    value: function foreachEntry(t, e) {\n      Object.keys(t).forEach(function (a) {\n        e(t[a], a);\n      });\n    }\n  }, {\n    key: \"keyfy\",\n    value: function keyfy(t, e) {\n      return t.reduce(function (t, a) {\n        return Object.assign(Object.assign({}, t), _defineProperty({}, e(a), a));\n      }, {});\n    }\n  }, {\n    key: \"navigate\",\n    value: function navigate(t, e) {\n      var a = [],\n          n = t;\n\n      for (; n;) {\n        null !== (n = e(n)) && a.push(n);\n      }\n\n      return a;\n    }\n  }, {\n    key: \"deepEqualsArrays\",\n    value: function deepEqualsArrays(t, e) {\n      if (t.length !== e.length) return !1;\n\n      var _iterator2 = _createForOfIteratorHelper(t),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var a = _step2.value;\n          if (-1 === e.indexOf(a)) return !1;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return !0;\n    }\n  }, {\n    key: \"deepEqualsObjects\",\n    value: function deepEqualsObjects(t, e) {\n      for (var _i = 0, _Object$keys = Object.keys(t); _i < _Object$keys.length; _i++) {\n        var a = _Object$keys[_i];\n        if (!Objects.deepEquals(t[a], e[a])) return !1;\n      }\n\n      return !0;\n    }\n  }, {\n    key: \"deepEquals\",\n    value: function deepEquals(t, e) {\n      return null == t && null == e || (null != t || null == e) && (null == t || null != e) && (\"string\" == typeof t && \"string\" == typeof e ? t === e : \"number\" == typeof t && \"number\" == typeof e ? t === e : \"function\" == typeof t && \"function\" == typeof e ? t === e : \"boolean\" == typeof t && \"boolean\" == typeof e ? t === e : void 0 === t && void 0 === e ? t === e : Array.isArray(t) && Array.isArray(e) ? Objects.deepEqualsArrays(t, e) : !(Array.isArray(t) && !Array.isArray(e)) && !(!Array.isArray(t) && Array.isArray(e)) && (\"object\" == typeof t && \"object\" == typeof e ? Objects.deepEqualsObjects(t, e) : t === e));\n    }\n  }]);\n\n  return Objects;\n}();\n\nvar DiUtils = /*#__PURE__*/function () {\n  function DiUtils() {\n    _classCallCheck(this, DiUtils);\n  }\n\n  _createClass(DiUtils, null, [{\n    key: \"beanName\",\n    value: function beanName(t) {\n      return Strings.firstCharToLowerCase(t.name);\n    }\n  }]);\n\n  return DiUtils;\n}();\n\nvar InjectableType;\n!function (t) {\n  t.DYNAMIC = \"dynamic\", t.NAME = \"name\", t.TYPE = \"type\";\n}(InjectableType || (InjectableType = {}));\n\nvar MetadataCrudUtils = /*#__PURE__*/function () {\n  function MetadataCrudUtils(t, e) {\n    _classCallCheck(this, MetadataCrudUtils);\n\n    this.spaceName = t, this.defaultProvider = e;\n  }\n\n  _createClass(MetadataCrudUtils, [{\n    key: \"updateMetadata\",\n    value: function updateMetadata(t, e) {\n      var a = this.getOrCreateMetadata(t);\n      if (null == a) throw Error(\"can't get or create metaData\");\n      return e(a), a;\n    }\n  }, {\n    key: \"assignMetaDataToConstructor\",\n    value: function assignMetaDataToConstructor(t, e) {\n      var a = this.getPrototype(t);\n      null == a.$a && (a.$a = {}), null == a.$a[this.spaceName] && (a.$a[this.spaceName] = {});\n      var n = MetadataCrudUtils.extractName(t);\n      a.$a[this.spaceName][n] = e;\n    }\n  }, {\n    key: \"getAnnotationsMetaData\",\n    value: function getAnnotationsMetaData(t) {\n      var e = t;\n      e.$a || (e = this.getPrototype(t));\n      var a = e.$a;\n      if (null == a) return null;\n      var n = a[this.spaceName];\n      return null == n ? null : n[MetadataCrudUtils.extractName(t)];\n    }\n  }, {\n    key: \"getOrCreateMetadata\",\n    value: function getOrCreateMetadata(t) {\n      if (null == this.getAnnotationsMetaData(t)) {\n        var e = this.defaultProvider();\n        this.assignMetaDataToConstructor(t, e);\n      }\n\n      return this.getAnnotationsMetaData(t);\n    }\n  }, {\n    key: \"getPrototype\",\n    value: function getPrototype(t) {\n      return \"object\" == typeof t ? t : \"object\" == typeof t.prototype ? t.prototype : this.getPrototype(Object.getPrototypeOf(t));\n    }\n  }], [{\n    key: \"extractName\",\n    value: function extractName(t) {\n      var e = t.name;\n      return null == e && (e = t.constructor.name), e.substring(0, 1).toLowerCase() + e.substring(1, e.length);\n    }\n  }]);\n\n  return MetadataCrudUtils;\n}();\n\nvar diAnnotationsCrud = new MetadataCrudUtils(\"$di\", function () {\n  return {\n    diAnnotations: []\n  };\n});\n\nfunction InjectByType(t, e) {\n  return function (a, n, r) {\n    diAnnotationsCrud.updateMetadata(a, function (a) {\n      return a.diAnnotations.push({\n        onConstructorParamIndex: r,\n        injectable: t,\n        type: InjectableType.TYPE,\n        cascadeProperties: e\n      });\n    });\n  };\n}\n\nfunction InjectDynamic(t, e) {\n  return function (a, n, r) {\n    diAnnotationsCrud.updateMetadata(a, function (a) {\n      return a.diAnnotations.push({\n        onConstructorParamIndex: r,\n        injectable: t,\n        type: InjectableType.DYNAMIC,\n        cascadeProperties: e\n      });\n    });\n  };\n}\n\nfunction InjectByName(t, e) {\n  return console.log(\"Inject by name\", t), function (a, n, r) {\n    diAnnotationsCrud.updateMetadata(a, function (a) {\n      return a.diAnnotations.push({\n        onConstructorParamIndex: r,\n        injectable: t,\n        type: InjectableType.NAME,\n        cascadeProperties: e\n      });\n    });\n  };\n}\n\nvar STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/gm,\n    ARGUMENT_NAMES = /([^\\s,]+)/g;\n\nvar Functions = /*#__PURE__*/function () {\n  function Functions() {\n    _classCallCheck(this, Functions);\n  }\n\n  _createClass(Functions, null, [{\n    key: \"extractArgNames\",\n    value: function extractArgNames(t) {\n      if (0 === t.length) return [];\n      var e = t.toString().replace(STRIP_COMMENTS, \"\"),\n          a = e.slice(e.indexOf(\"(\") + 1, e.indexOf(\")\")).match(ARGUMENT_NAMES);\n      return null === a && (a = []), a;\n    }\n  }]);\n\n  return Functions;\n}();\n\nvar DiAnnotationsMetadataFactory = /*#__PURE__*/function () {\n  function DiAnnotationsMetadataFactory() {\n    _classCallCheck(this, DiAnnotationsMetadataFactory);\n  }\n\n  _createClass(DiAnnotationsMetadataFactory, [{\n    key: \"create\",\n    value: function create(t) {\n      var e = DiUtils.beanName(t),\n          a = Functions.extractArgNames(t),\n          n = {},\n          r = diAnnotationsCrud.getAnnotationsMetaData(t);\n      return r && r.diAnnotations.forEach(function (t) {\n        var e = a[t.onConstructorParamIndex];\n        n[e] = {\n          name: e,\n          type: t.type,\n          payload: t.injectable,\n          propsProvider: t.cascadeProperties\n        };\n      }), {\n        dependencyName: e,\n        argumentNames: a,\n        diParams: n,\n        constructor: t\n      };\n    }\n  }]);\n\n  return DiAnnotationsMetadataFactory;\n}();\n\nvar DiRuntime = /*#__PURE__*/function () {\n  function DiRuntime(t, e) {\n    _classCallCheck(this, DiRuntime);\n\n    this.diInvocationResolver = t, this.diInvocationBuilderFactory = e;\n  }\n\n  _createClass(DiRuntime, [{\n    key: \"invoke\",\n    value: function invoke(t, e, a) {\n      if (\"object\" == typeof t) return t;\n      var n = this.diInvocationBuilderFactory.root(t).if(null != e, function (t) {\n        return t.withTransitiveBeans(e);\n      }).build(),\n          r = this.diInvocationResolver.resolve(n, a, this).result;\n      if (null == r) throw Error(\"Can't invoke\");\n      return r;\n    }\n  }, {\n    key: \"invokeWithProps\",\n    value: function invokeWithProps(t, e, a, n) {\n      var r = this.diInvocationBuilderFactory.root(t).withProperties(e).if(null != a, function (t) {\n        return t.withTransitiveBeans(a);\n      }).build(),\n          s = this.diInvocationResolver.resolve(r, n, this).result;\n      if (null == s) throw Error(\"Can't invoke\");\n      return s;\n    }\n  }]);\n\n  return DiRuntime;\n}();\n\nDiRuntime.PROPS_PROPERTY_NAME = \"$props\";\n\nvar DiInvocationResolver = /*#__PURE__*/function () {\n  function DiInvocationResolver(t, e, a) {\n    _classCallCheck(this, DiInvocationResolver);\n\n    this.diInvocationFactory = t, this.diCache = e, this.diEnricher = a;\n  }\n\n  _createClass(DiInvocationResolver, [{\n    key: \"resolve\",\n    value: function resolve(t, e, a) {\n      var _this3 = this;\n\n      if (this.causesCircularDependency(t)) return {\n        circularDependencyEndOf: t.diMetadata.dependencyName,\n        result: null,\n        pendingDependencies: {}\n      };\n      var n = null,\n          r = this.diCache.resolve(t.diMetadata.dependencyName, function () {\n        return n = _this3.doCreate(t, e, a), _this3.diEnricher && (n.result = _this3.diEnricher(t.diMetadata, n.result)), Object.keys(n.pendingDependencies).indexOf(t.diMetadata.dependencyName) > -1 && n.pendingDependencies[t.diMetadata.dependencyName].forEach(function (e) {\n          _this3.diCache.resolve(e, null)[t.diMetadata.dependencyName] = n.result;\n        }), n.result;\n      });\n      return null == n ? {\n        result: r,\n        pendingDependencies: {}\n      } : n;\n    }\n  }, {\n    key: \"causesCircularDependency\",\n    value: function causesCircularDependency(t) {\n      return t.inProcessDiInvocations.indexOf(t.diMetadata.dependencyName) > -1;\n    }\n  }, {\n    key: \"doCreate\",\n    value: function doCreate(t, e, a) {\n      var n = function n(t, e) {\n        var a = t.diMetadata.constructor;\n        return a.prototype && a.prototype.constructor.name ? e ? _construct(a, _toConsumableArray(e)) : new a() : e ? a.apply(void 0, _toConsumableArray(e)) : a();\n      };\n\n      if (0 === t.diMetadata.argumentNames.length) {\n        return {\n          result: n(t, void 0),\n          pendingDependencies: {}\n        };\n      }\n\n      var r = [],\n          s = {};\n      return this.invokeChildren(t, e, a).forEach(function (e) {\n        r.push(e.result), null != e.circularDependencyEndOf && DiInvocationResolver.addValueToKeyValuePairs(s, e.circularDependencyEndOf, t.diMetadata.dependencyName), e.pendingDependencies && Object.keys(e.pendingDependencies).forEach(function (t) {\n          DiInvocationResolver.addValuesToKeyValuePairs(s, t, e.pendingDependencies[t]);\n        });\n      }), {\n        result: n(t, r),\n        pendingDependencies: s\n      };\n    }\n  }, {\n    key: \"invokeChildren\",\n    value: function invokeChildren(t, e, a) {\n      var _this4 = this;\n\n      var n = [];\n      return t.diMetadata.argumentNames.forEach(function (r) {\n        var s = _this4.resolveParamDef(t, r);\n\n        n.push(_this4.invokeChild(t, s, e, a));\n      }), n;\n    }\n  }, {\n    key: \"resolveParamDef\",\n    value: function resolveParamDef(t, e) {\n      var a = t.diMetadata.diParams[e];\n      return null == a ? {\n        name: e,\n        propsProvider: null,\n        payload: e,\n        type: InjectableType.NAME\n      } : a;\n    }\n  }, {\n    key: \"invokeChild\",\n    value: function invokeChild(t, e, a, n) {\n      return e.name === DiRuntime.PROPS_PROPERTY_NAME ? this.resolveChildProps(t) : e.type === InjectableType.TYPE ? this.resolveChildByType(t, e, a, n) : e.type === InjectableType.DYNAMIC ? this.resolveDynamicChild(t, e, a, n) : this.resolveChildByName(t, e, a, n);\n    }\n  }, {\n    key: \"resolveChildProps\",\n    value: function resolveChildProps(t) {\n      if (null == t.properties) throw Error(\"can't resolve properties for $props - There are no properties passed to the beanRuntime\");\n      return {\n        result: t.properties,\n        pendingDependencies: {}\n      };\n    }\n  }, {\n    key: \"resolveChildByType\",\n    value: function resolveChildByType(t, e, a, n) {\n      return this.resolve(this.diInvocationFactory.childrenOf(t, e.payload, e.propsProvider), a, n);\n    }\n  }, {\n    key: \"resolveDynamicChild\",\n    value: function resolveDynamicChild(t, e, a, n) {\n      return this.resolveChildByType(t, {\n        payload: e.payload(),\n        type: InjectableType.TYPE,\n        propsProvider: e.propsProvider,\n        name: e.name\n      }, a, n);\n    }\n  }, {\n    key: \"resolveChildByName\",\n    value: function resolveChildByName(t, e, a, n) {\n      var r = e.payload;\n\n      if (null == t.transitiveBeans || null == t.transitiveBeans[r]) {\n        if (null != a[r]) {\n          return {\n            result: n.invoke(a[r], t.transitiveBeans, a),\n            pendingDependencies: {}\n          };\n        }\n\n        throw Error(\"can't resolve param '\".concat(r, \"' - There are no transitive beans passed into the runtime\"));\n      }\n\n      return {\n        result: t.transitiveBeans[r],\n        pendingDependencies: {}\n      };\n    }\n  }], [{\n    key: \"addValueToKeyValuePairs\",\n    value: function addValueToKeyValuePairs(t, e, a) {\n      t[e] || (t[e] = []), t[e].indexOf(a) > -1 || t[e].push(a);\n    }\n  }, {\n    key: \"addValuesToKeyValuePairs\",\n    value: function addValuesToKeyValuePairs(t, e, a) {\n      t[e] ? a.forEach(function (a) {\n        return DiInvocationResolver.addValueToKeyValuePairs(t, e, a);\n      }) : t[e] = a;\n    }\n  }]);\n\n  return DiInvocationResolver;\n}();\n\nvar DiInvocationBuilderFactory = /*#__PURE__*/function () {\n  function DiInvocationBuilderFactory(t) {\n    _classCallCheck(this, DiInvocationBuilderFactory);\n\n    this.diAnnotationsMetadataFactory = t;\n  }\n\n  _createClass(DiInvocationBuilderFactory, [{\n    key: \"childrenOf\",\n    value: function childrenOf(t, e, a) {\n      var n = t.inProcessDiInvocations.slice(0);\n      return n.push(t.diMetadata.dependencyName), new DiInvocationBuilder(this.diAnnotationsMetadataFactory, e).withInProcessDiInvocations(n).withTransitiveBeans(t.transitiveBeans).if(null != a, function (t) {\n        return t.withProperties(a());\n      });\n    }\n  }, {\n    key: \"root\",\n    value: function root(t) {\n      return new DiInvocationBuilder(this.diAnnotationsMetadataFactory, t);\n    }\n  }]);\n\n  return DiInvocationBuilderFactory;\n}();\n\nvar DiInvocationFactory = /*#__PURE__*/function () {\n  function DiInvocationFactory(t) {\n    _classCallCheck(this, DiInvocationFactory);\n\n    this.diInvocationBuilderFactory = t;\n  }\n\n  _createClass(DiInvocationFactory, [{\n    key: \"childrenOf\",\n    value: function childrenOf(t, e, a) {\n      return this.diInvocationBuilderFactory.childrenOf(t, e, a).build();\n    }\n  }]);\n\n  return DiInvocationFactory;\n}();\n\nvar DiInvocationBuilder = /*#__PURE__*/function () {\n  function DiInvocationBuilder(t, e) {\n    _classCallCheck(this, DiInvocationBuilder);\n\n    this.diAnnotationsMetadataFactory = t, this._constructor = e, this.inProcessDiInvocations = [], this.transitiveBeans = {}, this.properties = null;\n  }\n\n  _createClass(DiInvocationBuilder, [{\n    key: \"if\",\n    value: function _if(t, e) {\n      return t && e(this), this;\n    }\n  }, {\n    key: \"withInProcessDiInvocations\",\n    value: function withInProcessDiInvocations(t) {\n      return this.inProcessDiInvocations = t, this;\n    }\n  }, {\n    key: \"withTransitiveBeans\",\n    value: function withTransitiveBeans(t) {\n      return this.transitiveBeans = t, this;\n    }\n  }, {\n    key: \"withProperties\",\n    value: function withProperties(t) {\n      return this.properties = t, this;\n    }\n  }, {\n    key: \"build\",\n    value: function build() {\n      return {\n        diMetadata: this.diAnnotationsMetadataFactory.create(this._constructor),\n        inProcessDiInvocations: this.inProcessDiInvocations,\n        transitiveBeans: this.transitiveBeans,\n        properties: this.properties\n      };\n    }\n  }]);\n\n  return DiInvocationBuilder;\n}();\n\nvar KeyValueCache = /*#__PURE__*/function () {\n  function KeyValueCache() {\n    _classCallCheck(this, KeyValueCache);\n\n    this.cache = {};\n  }\n\n  _createClass(KeyValueCache, [{\n    key: \"resolve\",\n    value: function resolve(t, e) {\n      if (this.cache[t]) return this.cache[t];\n      if (null == e) throw Error(\"Can't resolve cache\");\n      var a = e();\n      return this.cache[t] = a, a;\n    }\n  }]);\n\n  return KeyValueCache;\n}();\n\nvar DiRuntimeFactory = /*#__PURE__*/function () {\n  function DiRuntimeFactory() {\n    _classCallCheck(this, DiRuntimeFactory);\n  }\n\n  _createClass(DiRuntimeFactory, null, [{\n    key: \"create\",\n    value: function create(t) {\n      return new DiRuntime(DiRuntimeFactory.DI_INVOCATION_RESOLVER_PROVIDER(new KeyValueCache(), t || null), DiRuntimeFactory.DI_INVOCATION_BUILDER_FACTORY);\n    }\n  }]);\n\n  return DiRuntimeFactory;\n}();\n\nDiRuntimeFactory.DI_INVOCATION_BUILDER_FACTORY = new DiInvocationBuilderFactory(new DiAnnotationsMetadataFactory()), DiRuntimeFactory.cacheTBR = function () {\n  return new KeyValueCache();\n}, DiRuntimeFactory.DI_INVOCATION_RESOLVER_PROVIDER = function (t, e) {\n  return new DiInvocationResolver(new DiInvocationFactory(DiRuntimeFactory.DI_INVOCATION_BUILDER_FACTORY), DiRuntimeFactory.cacheTBR(), e);\n};\n\nvar DiContextFactory = /*#__PURE__*/function () {\n  function DiContextFactory() {\n    _classCallCheck(this, DiContextFactory);\n  }\n\n  _createClass(DiContextFactory, null, [{\n    key: \"createContext\",\n    value: function createContext(t, e) {\n      var a,\n          n = DiRuntimeFactory.create(),\n          r = Object.assign(Object.assign({}, t), e);\n      a = e ? [].concat(_toConsumableArray(Object.keys(t)), _toConsumableArray(Object.keys(e))) : Object.keys(t);\n      var s = {},\n          i = Object.assign(Object.assign({}, t), e);\n      return a.forEach(function (t) {\n        var e = r[t];\n        s[t] = n.invoke(e, s, i);\n      }), s;\n    }\n  }]);\n\n  return DiContextFactory;\n}();\n\n!function (t) {\n  t.IDLE = \"IDLE\", t.ASYNC_START = \"ASYNC_START\", t.ASYNC_FULFILLED = \"ASYNC_FULFILLED\", t.ASYNC_CANCELLED = \"ASYNC_CANCELLED\";\n}(exports.MonitorStatus || (exports.MonitorStatus = {}));\nvar ReactStateContext = React.createContext(null);\n\nvar StateMapConnect = /*#__PURE__*/function (_React$Component) {\n  _inherits(StateMapConnect, _React$Component);\n\n  var _super3 = _createSuper(StateMapConnect);\n\n  function StateMapConnect(t) {\n    var _this5;\n\n    _classCallCheck(this, StateMapConnect);\n\n    _this5 = _super3.call(this, t), _this5._isMounted = !1, _this5.lastMonitorInfo = void 0, _this5.lastState = void 0;\n    var e = !0,\n        a = _this5.props.into.prototype ? _this5.props.into.prototype : _this5.props.into.name;\n    _this5._mainDataReactionLock = _this5.props.from.addDataReaction({\n      name: \"connect | \".concat(a),\n      dataConsumer: function dataConsumer(t) {\n        _this5.lastState = t;\n\n        var a = _this5.props.mapper(t, Object.assign({}, _this5.props.from.actions), _this5.lastMonitorInfo);\n\n        _this5._isMounted ? _this5.setState(a) : (e = !1, _this5.state = a);\n      }\n    }), _this5._asyncDataReactionLock = _this5.props.from.addAsyncReaction({\n      name: \"connect monitor| \".concat(a),\n      dataConsumer: function dataConsumer(t) {\n        _this5.lastMonitorInfo = t;\n\n        var a = _this5.props.mapper(_this5.lastState, Object.assign({}, _this5.props.from.actions), t);\n\n        _this5._isMounted ? _this5.setState(a) : (e = !1, _this5.state = a);\n      }\n    }), e && _this5.props.fallbackValue && (_this5.state = _this5.props.fallbackValue(_this5.props.from.actions));\n    return _this5;\n  }\n\n  _createClass(StateMapConnect, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = !0;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = !1, this._mainDataReactionLock.release(), this._asyncDataReactionLock && this._asyncDataReactionLock.release();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var t = this.props.into;\n      return React.createElement(ReactStateContext.Provider, {\n        value: this.props.from\n      }, React.createElement(t, Object.assign({}, this.state)));\n    }\n  }]);\n\n  return StateMapConnect;\n}(React.Component);\n\nvar StateConnect = function StateConnect(t) {\n  return React.createElement(StateMapConnect, {\n    mapper: function mapper(t, e, a) {\n      return {\n        data: t,\n        actions: e,\n        monitorInfo: a\n      };\n    },\n    into: t.into,\n    from: t.from,\n    fallbackValue: function fallbackValue(e) {\n      return {\n        data: t.fallbackValue,\n        actions: e,\n        monitorInfo: {\n          status: exports.MonitorStatus.IDLE\n        }\n      };\n    }\n  });\n},\n    stateConnect = function stateConnect(t, e, a) {\n  return React.createElement(StateConnect, {\n    from: t,\n    into: e,\n    fallbackValue: a\n  });\n},\n    stateMapConnect = function stateMapConnect(t, e, a, n) {\n  return React.createElement(StateMapConnect, {\n    from: t,\n    into: e,\n    fallbackValue: n,\n    mapper: a\n  });\n};\n\nfunction useFlow(t, e, a) {\n  React.useEffect(function () {\n    t.reactOnStatusChanged(function (t) {\n      e(function (e) {\n        return a ? a(t, e) : t.name;\n      });\n    });\n  }, []);\n}\n\nfunction useFlowStatus(t, e, a, n) {\n  React.useEffect(function () {\n    t.alwaysOn(e, function (t) {\n      a(function (e) {\n        return n ? n(t.getData(), e) : t.getData();\n      });\n    });\n  }, []);\n}\n\nfunction useConanState(t, e) {\n  var a = t.getData();\n\n  var _React$useState = React.useState(null == a ? e : a),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      n = _React$useState2[0],\n      r = _React$useState2[1];\n\n  return React.useEffect(function () {\n    var e = t.addDataReaction({\n      dataConsumer: r,\n      name: \"useConanState[\".concat(t.getName(), \"]\")\n    });\n    return function () {\n      return e.release();\n    };\n  }, []), [n, t.actions, function (_ref) {\n    var e = _ref.children;\n    return React.createElement(ReactStateContext.Provider, {\n      value: t\n    }, e);\n  }];\n}\n\nfunction useContextConanState() {\n  var t = useConanState(React.useContext(ReactStateContext));\n  return [t[0], t[1]];\n}\n\nvar ContextStateMapConnect = /*#__PURE__*/function (_React$Component2) {\n  _inherits(ContextStateMapConnect, _React$Component2);\n\n  var _super4 = _createSuper(ContextStateMapConnect);\n\n  function ContextStateMapConnect() {\n    _classCallCheck(this, ContextStateMapConnect);\n\n    return _super4.apply(this, arguments);\n  }\n\n  _createClass(ContextStateMapConnect, [{\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      return React.createElement(ReactStateContext.Consumer, null, function (t) {\n        if (null == t) throw new Error(\"trying to access the state from the context, but it was not found, did you specify the state up in the rendering tree?\");\n        return React.createElement(StateMapConnect, {\n          from: t,\n          into: _this6.props.into,\n          mapper: _this6.props.mapper,\n          fallbackValue: _this6.props.fallbackValue\n        });\n      });\n    }\n  }]);\n\n  return ContextStateMapConnect;\n}(React.Component);\n\nvar ContextStateConnect = /*#__PURE__*/function (_React$Component3) {\n  _inherits(ContextStateConnect, _React$Component3);\n\n  var _super5 = _createSuper(ContextStateConnect);\n\n  function ContextStateConnect() {\n    _classCallCheck(this, ContextStateConnect);\n\n    return _super5.apply(this, arguments);\n  }\n\n  _createClass(ContextStateConnect, [{\n    key: \"render\",\n    value: function render() {\n      var _this7 = this;\n\n      return React.createElement(ReactStateContext.Consumer, null, function (t) {\n        if (null == t) throw new Error(\"trying to access the state from the context, but it was not found, did you specify the state up in the rendering tree?\");\n        return React.createElement(StateConnect, {\n          from: t,\n          into: _this7.props.into,\n          fallbackValue: _this7.props.fallbackValue\n        });\n      });\n    }\n  }]);\n\n  return ContextStateConnect;\n}(React.Component);\n\nvar contextStateConnect = function contextStateConnect(t, e) {\n  return React.createElement(ContextStateConnect, {\n    into: t,\n    fallbackValue: e\n  });\n},\n    contextStateMapConnect = function contextStateMapConnect(t, e, a) {\n  return React.createElement(ContextStateMapConnect, {\n    into: t,\n    fallbackValue: a,\n    mapper: e\n  });\n},\n    ContextStateLive = function ContextStateLive(t) {\n  return React.createElement(ContextStateConnect, {\n    into: function into(e) {\n      return t.renderer(e.data, e.actions);\n    },\n    fallbackValue: t.fallbackValue\n  });\n},\n    StateLive = function StateLive(t) {\n  return React.createElement(StateConnect, {\n    from: t.from,\n    into: function into(e) {\n      var a = t.renderer(e.data, e.actions);\n      return Array.isArray(a) ? React.createElement(React.Fragment, null, a) : a;\n    },\n    fallbackValue: t.fallbackValue\n  });\n},\n    contextStateLive = function contextStateLive(t, e) {\n  return React.createElement(ContextStateConnect, {\n    into: function into(e) {\n      var a = t(e.data, e.actions);\n      return Array.isArray(a) ? React.createElement(React.Fragment, null, a) : a;\n    },\n    fallbackValue: e\n  });\n},\n    stateLive = function stateLive(t, e, a) {\n  return React.createElement(StateConnect, {\n    from: t,\n    into: function into(t) {\n      var a = e(t.data, t.actions);\n      return Array.isArray(a) ? React.createElement(React.Fragment, null, a) : a;\n    },\n    fallbackValue: a\n  });\n};\n\nvar ReactionType, BindBackType;\n!function (t) {\n  t.ONCE = \"ONCE\", t.ALWAYS = \"ALWAYS\";\n}(ReactionType || (ReactionType = {}));\n\nvar ThreadImpl = /*#__PURE__*/function () {\n  function ThreadImpl(t, e) {\n    _classCallCheck(this, ThreadImpl);\n\n    this.flow = t, this.def = e;\n  }\n\n  _createClass(ThreadImpl, [{\n    key: \"start\",\n    value: function start(t) {\n      return this.flow.start(t ? {\n        name: \"nextData\",\n        data: t\n      } : void 0), this;\n    }\n  }, {\n    key: \"next\",\n    value: function next(t) {\n      this.flow.onceOn(\"nextData\", t);\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(t) {\n      this.flow.stop(t);\n    }\n  }, {\n    key: \"chain\",\n    value: function chain(t, e) {\n      return this.flow.chainInto(\"nextData\", \"nextData\", t, e).map(function (t) {\n        return t.getData();\n      });\n    }\n  }, {\n    key: \"monitor\",\n    value: function monitor(t, e, a, n) {\n      var r = t.map(function (t) {\n        return function (a) {\n          return e(t, a);\n        };\n      }),\n          s = {\n        payload: n,\n        name: null == a ? \"anonymous\" : a,\n        action: r\n      };\n      return this.flow.deferInto(\"nextData\", \"nextData\", s).map(function (t) {\n        return t.getData();\n      });\n    }\n  }, {\n    key: \"addReaction\",\n    value: function addReaction(t) {\n      var _this8 = this;\n\n      var e = {\n        name: t.name,\n        reactionType: ReactionType.ALWAYS,\n        action: function action(e) {\n          return t.dataConsumer(e.getData());\n        }\n      };\n      return this.flow.addReaction(\"nextData\", e), {\n        release: function release() {\n          _this8.flow.removeReaction(\"nextData\", e);\n        }\n      };\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      return this.flow.getStatusData().nextData;\n    }\n  }, {\n    key: \"getEvents\",\n    value: function getEvents() {\n      return this.flow.getEvents();\n    }\n  }, {\n    key: \"getName\",\n    value: function getName() {\n      return this.flow.getName();\n    }\n  }, {\n    key: \"changeLoggingNature\",\n    value: function changeLoggingNature(t) {\n      this.flow.changeLoggingNature(t);\n    }\n  }, {\n    key: \"log\",\n    value: function log(t) {\n      this.flow.log(t);\n    }\n  }, {\n    key: \"once\",\n    value: function once(t, e) {\n      return this.flow.onceOn(\"nextData\", function (e) {\n        return t(e.getData());\n      }, e), this;\n    }\n  }, {\n    key: \"createRuntimeTracker\",\n    value: function createRuntimeTracker(t, e) {\n      return this.flow.createRuntimeTracker(t, e);\n    }\n  }, {\n    key: \"addReactionNext\",\n    value: function addReactionNext(t) {\n      return this.flow.addReactionNext(this.flow.on(\"nextData\"), {\n        name: t.name,\n        reactionType: ReactionType.ALWAYS,\n        action: function action(e) {\n          return t.dataConsumer(e.getData());\n        }\n      }), this;\n    }\n  }, {\n    key: \"getDefinition\",\n    value: function getDefinition() {\n      return this.def;\n    }\n  }, {\n    key: \"isRunning\",\n    get: function get() {\n      return this.flow.isRunning;\n    }\n  }, {\n    key: \"reducers\",\n    get: function get() {\n      return this.flow.on(\"nextData\").steps;\n    }\n  }]);\n\n  return ThreadImpl;\n}();\n\nvar StatusLikeParser = /*#__PURE__*/function () {\n  function StatusLikeParser() {\n    _classCallCheck(this, StatusLikeParser);\n  }\n\n  _createClass(StatusLikeParser, null, [{\n    key: \"parse\",\n    value: function parse(t) {\n      return \"string\" == typeof t ? {\n        name: t\n      } : t;\n    }\n  }]);\n\n  return StatusLikeParser;\n}();\n\nvar FlowRequest = /*#__PURE__*/function () {\n  function FlowRequest(t, e, a, n) {\n    _classCallCheck(this, FlowRequest);\n\n    this.flowThread = t, this.id = e, this.status = a, this.isStep = n, this.queuedReactions = [], this.queuedTransitions = [], this.queuedSteps = [], this.queuedStatuses = [], this.queuedStates = [], this.started = !1, this.processingStatus = {\n      id: this.id,\n      status: this.status\n    };\n  }\n\n  _createClass(FlowRequest, [{\n    key: \"start\",\n    value: function start() {\n      if (this.started) throw new Error(\"unexpected\");\n      this.started = !0, this.flowThread.processStateAndReactions(this.processingStatus, this.isStep), this.flowThread.flagAsSettled(this.processingStatus, this.isStep), this.flowThread.onStateRequestCompleted(this, this.queuedReactions, this.queuedStatuses, this.queuedStates, this.queuedTransitions, this.queuedSteps);\n    }\n  }, {\n    key: \"queueStatus\",\n    value: function queueStatus(t) {\n      this.queuedStatuses.push(t);\n    }\n  }, {\n    key: \"queueTransition\",\n    value: function queueTransition(t) {\n      return this.queuedTransitions.push(t), this;\n    }\n  }, {\n    key: \"queueStep\",\n    value: function queueStep(t) {\n      return this.queuedSteps.push(t), this;\n    }\n  }, {\n    key: \"queueState\",\n    value: function queueState(t) {\n      this.queuedStates.push(t);\n    }\n  }, {\n    key: \"queueReaction\",\n    value: function queueReaction(t, e) {\n      this.queuedReactions.push([t, e]);\n    }\n  }], [{\n    key: \"statusRequest\",\n    value: function statusRequest(t, e, a, n) {\n      return new FlowRequest(t, e, a, n);\n    }\n  }, {\n    key: \"transitionRequest\",\n    value: function transitionRequest(t, e, a, n) {\n      return new FlowRequest(t, e, StatusLikeParser.parse(a.into), n);\n    }\n  }]);\n\n  return FlowRequest;\n}();\n\nvar FlowThread = /*#__PURE__*/function () {\n  function FlowThread(t, e, a) {\n    _classCallCheck(this, FlowThread);\n\n    this.flowController = t, this.flowOrchestrator = e, this.flowEvents = a, this.ids = {}, this.requestStack = [];\n  }\n\n  _createClass(FlowThread, [{\n    key: \"requestStatus\",\n    value: function requestStatus(t, e) {\n      var a = StatusLikeParser.parse(t),\n          n = this.flowOrchestrator.createRuntimeTracker(this.flowController, FlowEventSource.FLOW_THREAD, exports.FlowEventType.REQUESTING_STATUS, t).start(\"\".concat(a.name));\n      if (this.assertValidStatus(a.name), null != this.currentRequest) return void (e ? (n.debug(\"queueing state [\".concat(a.name, \"]\")), this.currentRequest.queueState(a)) : (n.debug(\"queueing status [\".concat(a.name, \"]\")), this.currentRequest.queueStatus(a)));\n      var r = this.getNextId(a);\n      this.currentRequest = FlowRequest.statusRequest(this, r + \"\", a, e), this.currentRequest.start(), n.end();\n    }\n  }, {\n    key: \"requestTransition\",\n    value: function requestTransition(t, e) {\n      var a = StatusLikeParser.parse(t.into).name,\n          n = this.flowOrchestrator.createRuntimeTracker(this.flowController, FlowEventSource.FLOW_THREAD, exports.FlowEventType.REQUESTING_TRANSITION, t).start(\"\".concat(t.transitionName));\n      if (n.info(e ? \"step\" : \"transition\", [t.transitionName, t.payload]), this.assertValidStatus(a), null != this.currentRequest) return void (e ? (n.debug(\"queueing step [\".concat(t.transitionName, \"]\")), this.currentRequest.queueStep(t)) : (n.debug(\"queueing transition [\".concat(t.transitionName, \"]\")), this.currentRequest.queueTransition(t)));\n      var r = this.getNextId(StatusLikeParser.parse(t.into));\n      this.currentRequest = FlowRequest.transitionRequest(this, r + \"\", t, e), this.onTransitionRequested(t, e), this.currentRequest.start(), n.end();\n    }\n  }, {\n    key: \"requestStep\",\n    value: function requestStep(t, e, a, n) {\n      this.assertValidStatus(t);\n      var r = this.getCurrentStatusName();\n      if (r !== t) throw new Error(\"car't request step on [\".concat(t, \"] as the current status is[\").concat(r, \"]\"));\n      this.requestTransition({\n        transitionName: e,\n        payload: a,\n        into: {\n          name: t,\n          data: n\n        }\n      }, !0);\n    }\n  }, {\n    key: \"requestState\",\n    value: function requestState(t, e) {\n      this.assertValidStatus(t);\n      var a = this.getCurrentStatusName();\n      if (a !== t) throw new Error(\"car't request state on [\".concat(t, \"] as the current status is[\").concat(a, \"]\"));\n      this.requestStatus({\n        name: t,\n        data: e\n      }, !0);\n    }\n  }, {\n    key: \"tryToQueue\",\n    value: function tryToQueue(t, e) {\n      return null != this.currentRequest && (this.currentRequest.queueReaction(t, e), !0);\n    }\n  }, {\n    key: \"onTransitionRequested\",\n    value: function onTransitionRequested(t, e) {\n      this.flowEvents.addTransition(t, e);\n    }\n  }, {\n    key: \"getNextId\",\n    value: function getNextId(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n      null == this.ids[t.name] && (this.ids[t.name] = 0);\n      var a = this.ids[t.name] + 1;\n      return e ? a : (this.ids[t.name] = a, this.ids[t.name]);\n    }\n  }, {\n    key: \"processStateAndReactions\",\n    value: function processStateAndReactions(t, e) {\n      var a = this.flowOrchestrator.createRuntimeTracker(this.flowController, FlowEventSource.FLOW_THREAD, exports.FlowEventType.PROCESSING_STATUS).start(\"\".concat(t.status.name));\n      a.info(\"processing status - \".concat(t.status.name), this.flowController.flowDef.nature === FlowEventNature.MAIN ? t.status.data : void 0), this.flowEvents.addProcessingStatus(t, e), a.end(), this.flowController.processReactions(t.status.name);\n    }\n  }, {\n    key: \"flagAsSettled\",\n    value: function flagAsSettled(t, e) {\n      var a = this.flowOrchestrator.createRuntimeTracker(this.flowController, FlowEventSource.FLOW_THREAD, exports.FlowEventType.SETTLING_STATUS).start(\"\".concat(t.status.name));\n      this.flowEvents.settleProcessingStatus(t, e);\n      var n = this.flowController.flowDef.nature !== FlowEventNature.ASYNC ? t.status.data : t.status.data ? t.status.data.status : void 0;\n      e ? a.milestone(\"STATE\", n) : a.milestone(\"STATUS - \".concat(t.status.name), n), a.end();\n    }\n  }, {\n    key: \"onStateRequestCompleted\",\n    value: function onStateRequestCompleted(t, e, a, n, r, s) {\n      var _this9 = this;\n\n      var i = this.flowOrchestrator.createRuntimeTracker(this.flowController, FlowEventSource.FLOW_THREAD, exports.FlowEventType.STATUS_REQUEST_COMPLETED).start(\"\".concat(t.status.name)),\n          o = this.flowOrchestrator.createRuntimeTracker(this.flowController, FlowEventSource.FLOW_THREAD, exports.FlowEventType.ROOT_REQUEST);\n      if (0 === this.requestStack.length ? (o.debug(\"creating new execution stack: [\".concat(t.status.name, \"]\")), o.start(\"\".concat(t.status.name))) : (o.debug(\"adding to current execution stack [\".concat(this.requestStack.length, \"-\").concat(this.requestStack[0].status.name, \"]\")), o.continue(\"\".concat(t.status.name))), null == this.currentRequest) throw new Error(\"can't complete the request for [\".concat(this.flowController.getName(), \" - \").concat(t.status.name, \"] as is not flagged as currently in process\"));\n      if (this.currentRequest != t) throw new Error(\"can't complete the request for [\".concat(this.flowController.getName(), \" - \").concat(t.status.name, \"] as it does not match [\").concat(this.currentRequest.status.name, \"]\"));\n      if (r.length > 0 && a.length > 0) throw new Error(\"can't have transitions and states forked at the same time!\");\n      if (this.requestStack.push(this.currentRequest), this.currentRequest = void 0, r.length > 1 || a.length > 1) throw new Error(\"TBI\");\n\n      function u(t, e, a) {\n        i.withLevel(0 === e.length ? FlowEventLevel.DEBUG : FlowEventLevel.INFO, \"executing \".concat(t, \": [(\").concat(e.length, \") - \").concat(e.map(a).join(\",\"), \"]\"));\n      }\n\n      u(\"queued transitions\", r, function (t) {\n        return t.transitionName;\n      }), r.forEach(function (t) {\n        return _this9.flowController.requestTransition(t);\n      }), u(\"queued statuses\", a, function (t) {\n        return t.name;\n      }), a.forEach(function (t) {\n        return _this9.flowController.requestStatus(t);\n      }), u(\"queued states\", n, function (t) {\n        return t.name;\n      }), n.forEach(function (t) {\n        return _this9.flowController.requestState(t.name, t.data);\n      }), u(\"queued steps\", s, function (t) {\n        return t.transitionName;\n      }), s.forEach(function (t) {\n        var e = StatusLikeParser.parse(t.into);\n\n        _this9.flowController.requestStep(e.name, t.transitionName, t.payload, e.data);\n      }), u(\"queued reactions\", e, function (t) {\n        return t[1].name;\n      }), e.forEach(function (t) {\n        return _this9.flowController.addReaction(t[0], t[1]);\n      }), this.requestStack.pop(), 0 === this.requestStack.length && (o.debug(\"execution stack completed: [\".concat(t.status.name, \"]\")), o.end()), i.end();\n    }\n  }, {\n    key: \"createContext\",\n    value: function createContext(t, e) {\n      var _this10 = this;\n\n      var a = StatusLikeParser.parse(t);\n      return {\n        getData: this.flowController.getState.bind(this.flowController),\n        getStatusData: this.flowController.getStatusData.bind(this.flowController),\n        do: Object.assign(Object.assign({}, this.flowController.on(a.name).transitions), this.flowController.on(a.name).steps),\n        chain: function chain(t) {\n          e(t);\n        },\n        interruptFlow: function interruptFlow() {\n          _this10.flowController.stop();\n        },\n        log: function log(t) {\n          return _this10.flowController.log(t);\n        }\n      };\n    }\n  }, {\n    key: \"getCurrentStatusName\",\n    value: function getCurrentStatusName() {\n      var t = this.flowEvents.currentStatus;\n      return null == t ? void 0 : t.name;\n    }\n  }, {\n    key: \"getCurrentState\",\n    value: function getCurrentState() {\n      var t = this.flowEvents.currentStatus;\n      return null == t ? void 0 : t.data;\n    }\n  }, {\n    key: \"assertValidStatus\",\n    value: function assertValidStatus(t) {\n      if (null == this.flowController.on(t)) throw new Error(\"error requesting a transition into [\".concat(t, \"] unknown status, valid statuses are: [\").concat(Object.keys(this.flowController.getStatusDefs()).join(\", \"), \"]\"));\n    }\n  }]);\n\n  return FlowThread;\n}();\n\nvar FlowEventsTracker = /*#__PURE__*/function () {\n  function FlowEventsTracker() {\n    _classCallCheck(this, FlowEventsTracker);\n\n    this.eventsByStatus = {}, this.events = [];\n  }\n\n  _createClass(FlowEventsTracker, [{\n    key: \"addTransition\",\n    value: function addTransition(t, e) {\n      var a,\n          n = StatusLikeParser.parse(t.into);\n      a = e ? {\n        type: exports.StatusEventType.STEP,\n        reducerName: t.transitionName,\n        newData: n.data,\n        reducerPayload: t.payload\n      } : {\n        type: exports.StatusEventType.TRANSITION,\n        fromStatus: this.currentStatus.name,\n        intoStatus: n,\n        transitionName: t.transitionName,\n        transitionPayload: t.payload\n      }, this.lastEvent = a, this.process(a);\n    }\n  }, {\n    key: \"addStateFromStatus\",\n    value: function addStateFromStatus(t) {\n      this.lastEvent = t, this.process(t);\n    }\n  }, {\n    key: \"addProcessingStatus\",\n    value: function addProcessingStatus(t, e) {\n      var a;\n      a = e ? {\n        type: exports.StatusEventType.PROCESSING_STATE,\n        data: t.status.data\n      } : {\n        type: exports.StatusEventType.PROCESSING_STATUS,\n        status: t.status\n      }, this.currentStatus = t.status, this.lastEvent = a, this.process(a);\n    }\n  }, {\n    key: \"settleProcessingStatus\",\n    value: function settleProcessingStatus(t, e) {\n      if (e) {\n        if (this.lastEvent.data !== t.status.data) throw new Error(\"unexpected error settling events\");\n        this.lastEvent.type = exports.StatusEventType.STATE, this.eventsByStatus[this.currentStatus.name].lastState = t.status.data;\n      } else {\n        if (this.lastEvent.status !== t.status) throw new Error(\"unexpected error settling events\");\n        this.lastEvent.type = exports.StatusEventType.STATUS, this.addStateFromStatus({\n          data: t.status.data,\n          type: exports.StatusEventType.STATE\n        });\n      }\n    }\n  }, {\n    key: \"process\",\n    value: function process(t) {\n      null == this.eventsByStatus[this.currentStatus.name] && (this.eventsByStatus[this.currentStatus.name] = {\n        allEvents: [],\n        statusName: this.currentStatus.name,\n        lastState: void 0\n      });\n      var e = {\n        event: t,\n        statusName: this.currentStatus.name\n      };\n      this.eventsByStatus[this.currentStatus.name].allEvents.push(e), t.type !== exports.StatusEventType.STATE && t.type !== exports.StatusEventType.PROCESSING_STATE || (this.eventsByStatus[this.currentStatus.name].lastState = t.data), this.events.push(e);\n    }\n  }, {\n    key: \"serializeStatesWithStatus\",\n    value: function serializeStatesWithStatus(t) {\n      return this.serializeWithStatusInfo(Object.assign(Object.assign({}, t), {\n        eventTypes: [exports.StatusEventType.STATE]\n      }));\n    }\n  }, {\n    key: \"serializeStates\",\n    value: function serializeStates(t) {\n      return this.serializeWithStatusInfo(Object.assign(Object.assign({}, t), {\n        eventTypes: [exports.StatusEventType.STATE]\n      })).map(function (t) {\n        return t.event;\n      });\n    }\n  }, {\n    key: \"serializeStatuses\",\n    value: function serializeStatuses(t) {\n      return this.serializeWithStatusInfo(Object.assign(Object.assign({}, t), {\n        eventTypes: [exports.StatusEventType.STATUS]\n      })).map(function (t) {\n        return t.event;\n      });\n    }\n  }, {\n    key: \"serialize\",\n    value: function serialize(t) {\n      return this.serializeWithStatusInfo(t).map(function (t) {\n        return t.event;\n      });\n    }\n  }, {\n    key: \"serializeWithStatusInfo\",\n    value: function serializeWithStatusInfo(t) {\n      var _this11 = this;\n\n      if (!t) return this.events;\n      var e = [];\n      return this.events.forEach(function (a) {\n        var n = !0;\n        n && (t.excludeInit && _this11.eventsByStatus.$init.allEvents.indexOf(a) > -1 && (n = !1), n && (t.excludeStop && _this11.eventsByStatus.$stop && _this11.eventsByStatus.$stop.allEvents.indexOf(a) > -1 && (n = !1), n && (t.statuses && t.statuses.forEach(function (t) {\n          n || -1 === _this11.eventsByStatus[t].allEvents.indexOf(a) && (n = !1);\n        }), n && (t.eventTypes && -1 === t.eventTypes.indexOf(a.event.type) && (n = !1), n && e.push(a)))));\n      }), e;\n    }\n  }, {\n    key: \"getLastStates\",\n    value: function getLastStates() {\n      var _this12 = this;\n\n      var t = {};\n      return Object.keys(this.eventsByStatus).forEach(function (e) {\n        t[e] = _this12.eventsByStatus[e].lastState;\n      }), t;\n    }\n  }, {\n    key: \"getLastState\",\n    value: function getLastState(t) {\n      var e = this.eventsByStatus[t];\n      if (null != e) return e.lastState;\n    }\n  }]);\n\n  return FlowEventsTracker;\n}();\n\n!function (t) {\n  t.STEP = \"STEP\", t.TRANSITION = \"TRANSITION\";\n}(BindBackType || (BindBackType = {}));\n\nvar FlowAnchor = /*#__PURE__*/function () {\n  function FlowAnchor() {\n    _classCallCheck(this, FlowAnchor);\n  }\n\n  _createClass(FlowAnchor, [{\n    key: \"createNewThread\",\n    value: function createNewThread(t, e) {\n      var a = new FlowEventsTracker(),\n          n = new FlowThread(t, e, a);\n      return this.currentThread = {\n        flowEvents: a,\n        flowThread: n\n      }, n;\n    }\n  }, {\n    key: \"getCurrentEvents\",\n    value: function getCurrentEvents() {\n      return this.currentThread.flowEvents;\n    }\n  }, {\n    key: \"getStatusDataProducerFn\",\n    value: function getStatusDataProducerFn() {\n      var _this13 = this;\n\n      return function (t, e) {\n        var a = null != t ? t : _this13.currentStatus.name,\n            n = _this13.currentThread.flowEvents.getLastStates();\n\n        return -1 === Object.keys(n).indexOf(a) ? e : n[a];\n      };\n    }\n  }, {\n    key: \"getDataFn\",\n    value: function getDataFn(t) {\n      var _this14 = this;\n\n      return function () {\n        if (null == _this14.currentThread) throw new Error(\"error getting the data function associated to this flow, this might happen if you try to mutate the state of the flow before it has been started.\");\n        var e = _this14.currentThread.flowEvents.currentStatus.name;\n\n        if (\"$init\" !== e) {\n          if (t !== e) throw new Error(\"unexpected error trying to retrieve the last status for [\".concat(t, \", but the current status is [\").concat(e, \"]]\"));\n          return _this14.currentThread.flowEvents.getLastState(t);\n        }\n      };\n    }\n  }, {\n    key: \"bindBack\",\n    value: function bindBack(t, e, a) {\n      if (!this.currentThread.flowThread.flowController.isRunning) return;\n      var n = e.result && \"$stop\" != e.result.name,\n          r = this.currentStatus && \"$init\" != this.currentStatus.name;\n      if (n && r && (!this.currentStatus || this.currentStatus.name !== t)) throw Error(\"unable to request [\".concat(e.methodName, \"] as is meant for status [\").concat(t, \"], but the current status is [\").concat(this.currentStatus ? this.currentStatus.name : \"-\", \"]\"));\n\n      if (a === BindBackType.STEP) {\n        \"$init\" === this.currentThread.flowThread.getCurrentStatusName() ? this.currentThread.flowThread.requestTransition({\n          into: {\n            name: t,\n            data: e.result\n          },\n          payload: e.payload,\n          transitionName: e.methodName\n        }, !1) : this.currentThread.flowThread.requestStep(e.statusName, e.methodName, e.payload, e.result);\n      } else this.currentThread.flowThread.requestTransition({\n        into: e.result,\n        payload: e.payload,\n        transitionName: e.methodName\n      }, !1);\n    }\n  }, {\n    key: \"getStatusData\",\n    value: function getStatusData() {\n      return this.currentThread.flowEvents.getLastStates();\n    }\n  }, {\n    key: \"createRuntimeTracker\",\n    value: function createRuntimeTracker(t, e) {\n      var a = this.currentThread.flowThread;\n      return a.flowOrchestrator.createRuntimeTracker(a.flowController, FlowEventSource.FLOW_CONTROLLER, t, e);\n    }\n  }, {\n    key: \"currentStatus\",\n    get: function get() {\n      if (this.currentThread) return this.currentThread.flowEvents.currentStatus;\n    }\n  }]);\n\n  return FlowAnchor;\n}();\n\nvar Proxyfier = /*#__PURE__*/function () {\n  function Proxyfier() {\n    _classCallCheck(this, Proxyfier);\n  }\n\n  _createClass(Proxyfier, null, [{\n    key: \"proxy\",\n    value: function proxy(t, e) {\n      var a = {},\n          n = Object.getPrototypeOf(t),\n          r = \"Object\" === n.constructor.name ? t : n;\n      return Object.getOwnPropertyNames(r).forEach(function (n) {\n        if (\"constructor\" === n) return;\n        \"function\" == typeof r[n] && (a[n] = function () {\n          for (var _len3 = arguments.length, a = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            a[_key3] = arguments[_key3];\n          }\n\n          return e(function () {\n            return t[n].apply(t, a);\n          }, {\n            methodName: n,\n            payload: a\n          });\n        });\n      }), a;\n    }\n  }]);\n\n  return Proxyfier;\n}();\n\nvar MutatorsFactory = /*#__PURE__*/function () {\n  function MutatorsFactory() {\n    _classCallCheck(this, MutatorsFactory);\n  }\n\n  _createClass(MutatorsFactory, null, [{\n    key: \"createDefaultStepsDef\",\n    value: function createDefaultStepsDef(t) {\n      return function (e) {\n        return {\n          $update: function $update(a) {\n            var n,\n                r = t.currentThread.flowThread,\n                s = r.flowOrchestrator.createRuntimeTracker(r.flowController, FlowEventSource.CONTEXT, exports.FlowEventType.USER_CODE, n).start();\n            return n = \"function\" != typeof a ? a : a(e()), s.debug(\"$update\", n).end(), n;\n          }\n        };\n      };\n    }\n  }, {\n    key: \"createDefaultTransitionDef\",\n    value: function createDefaultTransitionDef(t) {\n      return function () {\n        return {\n          $toStatus: function $toStatus(e) {\n            var a = StatusLikeParser.parse(e),\n                n = t.currentThread.flowThread;\n            return n.flowOrchestrator.createRuntimeTracker(n.flowController, FlowEventSource.CONTEXT, exports.FlowEventType.USER_CODE, a).start().debug(\"$toStatus\", a).end(), a;\n          }\n        };\n      };\n    }\n  }, {\n    key: \"createDefaultSteps\",\n    value: function createDefaultSteps(t, e) {\n      return this.createSteps(t, e, this.createDefaultStepsDef(e));\n    }\n  }, {\n    key: \"createTransitions\",\n    value: function createTransitions(t, e, a) {\n      var n = this.createDefaultTransitionDef(e);\n      return this.doCreateTransitions(t, e, a ? [a, n] : [n]);\n    }\n  }, {\n    key: \"createSteps\",\n    value: function createSteps(t, e, a) {\n      var n = this.createDefaultStepsDef(e);\n      return this.doCreateSteps(t, e, a ? [a, n] : [n]);\n    }\n  }, {\n    key: \"doCreateSteps\",\n    value: function doCreateSteps(t, e, a) {\n      var n = e.getDataFn(t),\n          r = {};\n      return a.forEach(function (t) {\n        var e = t(n);\n        r = Object.assign(Object.assign({}, r), e);\n      }), this.bindToAnchor(t, e, r, BindBackType.STEP);\n    }\n  }, {\n    key: \"doCreateTransitions\",\n    value: function doCreateTransitions(t, e, a) {\n      var n = e.getStatusDataProducerFn(),\n          r = {};\n      return a.forEach(function (t) {\n        var e = t(n);\n        r = Object.assign(Object.assign({}, r), e);\n      }), this.bindToAnchor(t, e, r, BindBackType.TRANSITION);\n    }\n  }, {\n    key: \"bindToAnchor\",\n    value: function bindToAnchor(t, e, a, n) {\n      return Proxyfier.proxy(a, function (a, r) {\n        var s = e.currentThread.flowThread.flowController,\n            i = e.currentThread.flowThread.flowOrchestrator.createRuntimeTracker(s, FlowEventSource.CONTEXT, exports.FlowEventType.USER_REACTIONS, s.flowDef.nature).start(),\n            o = s.flowDef.nature === FlowEventNature.MAIN && \"$update\" !== r.methodName ? FlowEventLevel.MILESTONE : FlowEventLevel.DEBUG;\n        i.withLevel(o, \"calling: \".concat(r.methodName), \"object\" == typeof r.payload ? r.payload : \"[reducer]\");\n\n        try {\n          var _s = a();\n\n          return e.bindBack(t, {\n            statusName: e.currentStatus.name,\n            methodName: r.methodName,\n            payload: r.payload,\n            result: _s\n          }, n), i.end(), _s;\n        } catch (t) {\n          return void e.createRuntimeTracker(exports.FlowEventType.ERROR_USER_CODE, t).start().milestone(\"error running \".concat(r.methodName), t).end();\n        }\n      });\n    }\n  }]);\n\n  return MutatorsFactory;\n}();\n\nvar $INIT = \"$init\",\n    $STOP = \"$stop\";\n\nvar ReactionDefLikeParser = /*#__PURE__*/function () {\n  function ReactionDefLikeParser() {\n    _classCallCheck(this, ReactionDefLikeParser);\n  }\n\n  _createClass(ReactionDefLikeParser, null, [{\n    key: \"parse\",\n    value: function parse(t, e, a) {\n      return \"object\" == typeof t ? t : {\n        name: a || \"anonymous\",\n        reactionType: e,\n        action: t\n      };\n    }\n  }]);\n\n  return ReactionDefLikeParser;\n}();\n\nvar FlowDefFactory = /*#__PURE__*/function () {\n  function FlowDefFactory() {\n    _classCallCheck(this, FlowDefFactory);\n  }\n\n  _createClass(FlowDefFactory, null, [{\n    key: \"create\",\n    value: function create(t, e) {\n      var a = FlowDefFactory.statusesByName(t.statuses, e);\n      return a[$INIT] = {\n        name: $INIT,\n        steps: MutatorsFactory.createDefaultSteps($INIT, e),\n        transitions: MutatorsFactory.createTransitions($INIT, e),\n        reactions: t.$onInit ? t.$onInit.map(function (t) {\n          return ReactionDefLikeParser.parse(t, ReactionType.ALWAYS, \"on init\");\n        }) : []\n      }, a[$STOP] = {\n        name: $STOP,\n        steps: MutatorsFactory.createDefaultSteps($STOP, e),\n        transitions: MutatorsFactory.createTransitions($STOP, e),\n        reactions: t.$onStop ? t.$onStop.map(function (t) {\n          return ReactionDefLikeParser.parse(t, ReactionType.ALWAYS, \"on stop\");\n        }) : []\n      }, Object.assign(Object.assign({\n        statusesByStatusName: a,\n        name: t.name,\n        nature: t.nature ? t.nature : FlowEventNature.MAIN\n      }, t.hasOwnProperty(\"initialStatus\") ? {\n        starter: function starter() {\n          return t.initialStatus;\n        }\n      } : void 0), t.hasOwnProperty(\"loggingRule\") ? {\n        loggingRule: t.loggingRule\n      } : void 0);\n    }\n  }, {\n    key: \"statusesByName\",\n    value: function statusesByName(t, e) {\n      var a = {};\n      return Array.isArray(t) ? t.forEach(function (t) {\n        a[t] = {\n          name: t,\n          steps: [],\n          reactions: []\n        };\n      }) : Objects.foreachEntry(t, function (t, n) {\n        a[n] = {\n          name: n,\n          steps: MutatorsFactory.createSteps(n, e, t.steps),\n          transitions: MutatorsFactory.createTransitions(n, e, t.transitions),\n          reactions: t.reactions ? t.reactions.map(function (t) {\n            return ReactionDefLikeParser.parse(t, ReactionType.ALWAYS, \"on[\".concat(n, \"]\"));\n          }) : [],\n          getLastData: e.getDataFn(n)\n        };\n      }), a;\n    }\n  }]);\n\n  return FlowDefFactory;\n}();\n\nvar FlowRuntimeTracker = /*#__PURE__*/function () {\n  function FlowRuntimeTracker(t, e) {\n    _classCallCheck(this, FlowRuntimeTracker);\n\n    this.orchestrator = t, this.event = e;\n  }\n\n  _createClass(FlowRuntimeTracker, [{\n    key: \"end\",\n    value: function end(t, e) {\n      return this.doTick(FlowEventLevel.TRACE, FlowEventTiming.END, t, e);\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel(t, e) {\n      return this.doTick(FlowEventLevel.TRACE, FlowEventTiming.CANCEL, t, e);\n    }\n  }, {\n    key: \"continue\",\n    value: function _continue(t, e) {\n      return this.doTick(FlowEventLevel.TRACE, FlowEventTiming.CONTINUE, t, e);\n    }\n  }, {\n    key: \"start\",\n    value: function start(t, e) {\n      return this.doTick(FlowEventLevel.TRACE, FlowEventTiming.START, t, e);\n    }\n  }, {\n    key: \"debug\",\n    value: function debug(t, e) {\n      return this.doTick(FlowEventLevel.DEBUG, FlowEventTiming.IN_PROCESS, t, e);\n    }\n  }, {\n    key: \"info\",\n    value: function info(t, e) {\n      return this.doTick(FlowEventLevel.INFO, FlowEventTiming.IN_PROCESS, t, e);\n    }\n  }, {\n    key: \"milestone\",\n    value: function milestone(t, e) {\n      return this.doTick(FlowEventLevel.MILESTONE, FlowEventTiming.IN_PROCESS, t, e);\n    }\n  }, {\n    key: \"withLevel\",\n    value: function withLevel(t, e, a) {\n      return this.doTick(t, FlowEventTiming.IN_PROCESS, e, a);\n    }\n  }, {\n    key: \"fork\",\n    value: function fork(t, e, a, n) {\n      var r = this.orchestrator.createRuntimeTracker(this.event.flowController, this.event.source, t, n).start();\n      r.withLevel(e, a, n), r.end();\n    }\n  }, {\n    key: \"doTick\",\n    value: function doTick(t, e, a, n, r) {\n      var s = Object.assign(Object.assign(Object.assign(Object.assign({}, this.event), null != r ? {\n        type: r\n      } : void 0), {\n        shortDesc: a,\n        timing: e,\n        level: t\n      }), null != n ? {\n        payload: n\n      } : void 0);\n      return this.orchestrator.onRuntimeEvent(this, s), this;\n    }\n  }]);\n\n  return FlowRuntimeTracker;\n}();\n\nvar FlowOrchestrator = /*#__PURE__*/function () {\n  function FlowOrchestrator(t) {\n    _classCallCheck(this, FlowOrchestrator);\n\n    this.eventsProcessor = t;\n  }\n\n  _createClass(FlowOrchestrator, [{\n    key: \"onRuntimeEvent\",\n    value: function onRuntimeEvent(t, e) {\n      this.eventsProcessor.forEach(function (t) {\n        return t(e);\n      });\n    }\n  }, {\n    key: \"createRuntimeTracker\",\n    value: function createRuntimeTracker(t, e, a, n) {\n      return new FlowRuntimeTracker(this, {\n        flowController: t,\n        source: e,\n        type: a,\n        payload: n,\n        nature: t.flowDef.nature\n      });\n    }\n  }]);\n\n  return FlowOrchestrator;\n}();\n\nfunction isPromise(t) {\n  return null != t && \"object\" == typeof t && \"then\" in t && \"function\" == typeof t.then;\n}\n\nfunction isAsap(t) {\n  return t instanceof NowImpl || t instanceof LaterImpl;\n}\n\n!function (t) {\n  t.NOW = \"NOW\", t.LATER = \"LATER\";\n}(exports.AsapType || (exports.AsapType = {}));\n\nvar NowImpl = /*#__PURE__*/function () {\n  function NowImpl(t) {\n    _classCallCheck(this, NowImpl);\n\n    this.rawValue = t, this.type = exports.AsapType.NOW;\n  }\n\n  _createClass(NowImpl, [{\n    key: \"cancel\",\n    value: function cancel() {\n      return !1;\n    }\n  }, {\n    key: \"then\",\n    value: function then(t) {\n      return t(this.rawValue), this;\n    }\n  }, {\n    key: \"map\",\n    value: function map(t) {\n      return Asaps.now(t(this.rawValue));\n    }\n  }, {\n    key: \"chain\",\n    value: function chain(t) {\n      var _Asaps$next = Asaps.next(\"map\", FlowEventNature.AUX),\n          _Asaps$next2 = _slicedToArray(_Asaps$next, 2),\n          e = _Asaps$next2[0],\n          a = _Asaps$next2[1];\n\n      return this.then(function (a) {\n        return t(a).then(function (t) {\n          return e(t);\n        });\n      }), a;\n    }\n  }, {\n    key: \"catch\",\n    value: function _catch(t) {\n      return this;\n    }\n  }, {\n    key: \"onCancel\",\n    value: function onCancel(t) {\n      return this;\n    }\n  }]);\n\n  return NowImpl;\n}();\n\nvar LaterImpl = /*#__PURE__*/function () {\n  function LaterImpl(t) {\n    _classCallCheck(this, LaterImpl);\n\n    this.flow = t, this.type = exports.AsapType.LATER;\n  }\n\n  _createClass(LaterImpl, [{\n    key: \"map\",\n    value: function map(t) {\n      var _Asaps$next3 = Asaps.next(\"map\", FlowEventNature.AUX),\n          _Asaps$next4 = _slicedToArray(_Asaps$next3, 2),\n          e = _Asaps$next4[0],\n          a = _Asaps$next4[1];\n\n      return this.then(function (a) {\n        return e(t(a));\n      }), this.onCancel(function () {\n        return a.cancel();\n      }), a;\n    }\n  }, {\n    key: \"then\",\n    value: function then(t) {\n      return \"resolved\" === this.flow.getCurrentStatusName() ? t(this.flow.on(\"resolved\").getLastData()) : this.flow.on(\"resolving\").steps.$update(function (e) {\n        return Object.assign(Object.assign({}, e), {\n          then: [].concat(_toConsumableArray(e.then), [t])\n        });\n      }), this;\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(t) {\n      var _this15 = this;\n\n      if (\"cancelled\" !== this.flow.getCurrentStatusName()) try {\n        this.flow.assertOn(\"resolving\", function (e) {\n          e.getData().then.forEach(function (e) {\n            e(t);\n          }), _this15.flow.on(\"resolving\").transitions.$toStatus({\n            name: \"resolved\",\n            data: t\n          });\n        });\n      } catch (e) {\n        console.error(e), this.flow.assertOn(\"resolving\", function (a) {\n          a.getData().catch.forEach(function (a) {\n            a(e, t);\n          }), a.do.$toStatus({\n            name: \"errored\",\n            data: t\n          });\n        });\n      }\n    }\n  }, {\n    key: \"onCancel\",\n    value: function onCancel(t) {\n      if (\"cancelled\" !== this.flow.getCurrentStatusName()) return \"resolving\" === this.flow.getCurrentStatusName() && this.flow.on(\"resolving\").steps.$update(function (e) {\n        return Object.assign(Object.assign({}, e), {\n          onCancel: [].concat(_toConsumableArray(e.onCancel), [t])\n        });\n      }), this;\n      t();\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      var _this16 = this;\n\n      return \"resolving\" === this.flow.getCurrentStatusName() && (this.flow.assertOn(\"resolving\", function (t) {\n        t.getData().onCancel.forEach(function (t) {\n          t();\n        }), _this16.flow.on(\"resolving\").transitions.$toStatus({\n          name: \"cancelled\"\n        });\n      }), !0);\n    }\n  }, {\n    key: \"chain\",\n    value: function chain(t) {\n      var _Asaps$next5 = Asaps.next(\"merge\", FlowEventNature.AUX),\n          _Asaps$next6 = _slicedToArray(_Asaps$next5, 2),\n          e = _Asaps$next6[0],\n          a = _Asaps$next6[1];\n\n      return this.then(function (n) {\n        return t(n).then(function (t) {\n          return e(t);\n        }).onCancel(function () {\n          return a.cancel();\n        });\n      }).onCancel(function () {\n        return a.cancel();\n      }), a;\n    }\n  }, {\n    key: \"catch\",\n    value: function _catch(t) {\n      return \"resolving\" === this.flow.getCurrentStatusName() && this.flow.on(\"resolving\").steps.$update(function (e) {\n        return Object.assign(Object.assign({}, e), {\n          catch: [].concat(_toConsumableArray(e.catch), [t])\n        });\n      }), this;\n    }\n  }]);\n\n  return LaterImpl;\n}();\n\nvar ProxyThen = /*#__PURE__*/function () {\n  function ProxyThen(t, e, a) {\n    _classCallCheck(this, ProxyThen);\n\n    this.baseAsap = t, this.beforeThen = e, this.afterThen = a;\n  }\n\n  _createClass(ProxyThen, [{\n    key: \"cancel\",\n    value: function cancel() {\n      return this.baseAsap.cancel();\n    }\n  }, {\n    key: \"catch\",\n    value: function _catch(t) {\n      return this.baseAsap.catch(t), this;\n    }\n  }, {\n    key: \"chain\",\n    value: function chain(t) {\n      var e = this.baseAsap.chain(t);\n      return Asaps.proxyThen(e, this.beforeThen, this.afterThen);\n    }\n  }, {\n    key: \"map\",\n    value: function map(t) {\n      var e = this.baseAsap.map(t);\n      return Asaps.proxyThen(e, this.beforeThen, this.afterThen);\n    }\n  }, {\n    key: \"onCancel\",\n    value: function onCancel(t) {\n      return this.baseAsap.onCancel(t), this;\n    }\n  }, {\n    key: \"then\",\n    value: function then(t) {\n      return this.beforeThen(), this.baseAsap.then(t), this.baseAsap.then(this.afterThen), this;\n    }\n  }, {\n    key: \"type\",\n    get: function get() {\n      return this.baseAsap.type;\n    }\n  }]);\n\n  return ProxyThen;\n}();\n\nvar AsapParser = /*#__PURE__*/function () {\n  function AsapParser() {\n    _classCallCheck(this, AsapParser);\n  }\n\n  _createClass(AsapParser, null, [{\n    key: \"from\",\n    value: function from(t) {\n      return isAsap(t) ? t : isPromise(t) ? Asaps.fromPromise(t) : Asaps.now(t);\n    }\n  }]);\n\n  return AsapParser;\n}();\n\nvar Asaps = /*#__PURE__*/function () {\n  function Asaps() {\n    _classCallCheck(this, Asaps);\n  }\n\n  _createClass(Asaps, null, [{\n    key: \"now\",\n    value: function now(t) {\n      return new NowImpl(t);\n    }\n  }, {\n    key: \"fromPromise\",\n    value: function fromPromise(t, e) {\n      var a = new LaterImpl(Flows.createController({\n        name: \"future[\".concat(e || \"anonymous\", \"]\"),\n        statuses: {\n          resolving: {},\n          resolved: {},\n          errored: {},\n          cancelled: {}\n        },\n        initialStatus: {\n          name: \"resolving\",\n          data: {\n            then: [],\n            catch: [],\n            onCancel: []\n          }\n        },\n        nature: FlowEventNature.ASAP\n      }).start());\n      return t.then(function (t) {\n        return a.resolve(t);\n      }), t.catch(function (t) {\n        return a.catch(t);\n      }), a;\n    }\n  }, {\n    key: \"delayed\",\n    value: function delayed(t, e, a) {\n      return Asaps.fromPromise(new Promise(function (a) {\n        return setTimeout(function () {\n          a(\"function\" == typeof t ? t() : t);\n        }, e);\n      }), \"delay[\".concat(a || \"anonymous\", \"]\"));\n    }\n  }, {\n    key: \"fetch\",\n    value: function (_fetch) {\n      function fetch(_x) {\n        return _fetch.apply(this, arguments);\n      }\n\n      fetch.toString = function () {\n        return _fetch.toString();\n      };\n\n      return fetch;\n    }(function (t) {\n      return Asaps.fromPromise(new Promise(function (e) {\n        fetch(t).then(function (t) {\n          return t.json();\n        }).then(function (t) {\n          e(t);\n        });\n      }), \"fetch[\".concat(Strings.padEnd(t, 15), \"]\"));\n    })\n  }, {\n    key: \"next\",\n    value: function next(t, e) {\n      var a = new LaterImpl(Flows.createController({\n        name: \"asap-\".concat(t || \"anonymous\"),\n        statuses: {\n          resolving: {},\n          resolved: {},\n          errored: {},\n          cancelled: {}\n        },\n        initialStatus: {\n          name: \"resolving\",\n          data: {\n            then: [],\n            catch: [],\n            onCancel: []\n          }\n        },\n        nature: e || FlowEventNature.ASAP\n      }).start());\n      return [function (t) {\n        return a.resolve(t);\n      }, a];\n    }\n  }, {\n    key: \"proxyThen\",\n    value: function proxyThen(t, e, a) {\n      return new ProxyThen(t, e, a);\n    }\n  }]);\n\n  return Asaps;\n}();\n\nfunction deferParser(t, e) {\n  return isAsap(t) ? {\n    action: t,\n    name: e.name,\n    payload: e.payload\n  } : t;\n}\n\nvar FlowImpl = /*#__PURE__*/function () {\n  function FlowImpl(t, e, a) {\n    _classCallCheck(this, FlowImpl);\n\n    this.flowDef = t, this.flowAnchor = e, this.flowOrchestrator = a, this.isRunning = !1;\n  }\n\n  _createClass(FlowImpl, [{\n    key: \"start\",\n    value: function start(t) {\n      var _this17 = this;\n\n      var e = this.flowOrchestrator.createRuntimeTracker(this, FlowEventSource.FLOW_CONTROLLER, exports.FlowEventType.STARTING, t).start();\n      if (this.isRunning) throw new Error(\"can't request a flow that it has been started to start again\");\n      if (this.flowThread = this.flowAnchor.createNewThread(this, this.flowOrchestrator), this.isRunning = !0, null == t && null == this.flowDef.starter) return this.requestStatus($INIT), this;\n\n      var a = t || this.flowDef.starter(),\n          n = function n(t) {\n        _this17.addReaction($INIT, {\n          action: function action() {\n            e.debug(\"initialStatus\", t), _this17.requestStatus(t);\n          },\n          reactionType: ReactionType.ONCE,\n          name: \"to initial state\"\n        }), _this17.addReaction($STOP, {\n          name: \"onStop=>notifyEvents\",\n          reactionType: ReactionType.ONCE,\n          action: function action(t) {\n            t.chain(function () {\n              e.debug(\"state machine stopped\"), _this17.flowThread = null, _this17.isRunning = !1;\n            });\n          }\n        }), _this17.requestStatus($INIT);\n      };\n\n      return AsapParser.from(a).then(function (t) {\n        return n(t);\n      }), e.end(), this;\n    }\n  }, {\n    key: \"requestStatus\",\n    value: function requestStatus(t) {\n      var e = StatusLikeParser.parse(t).name;\n\n      if (this.isRunning) {\n        if (null == this.on(e)) throw new Error(\"unable to request non existing status [\".concat(e, \"]\"));\n        this.flowThread.requestStatus(t, !1);\n      }\n    }\n  }, {\n    key: \"requestState\",\n    value: function requestState(t, e) {\n      this.isRunning && this.flowThread.requestState(t, e);\n    }\n  }, {\n    key: \"requestTransition\",\n    value: function requestTransition(t) {\n      if (this.isRunning) return this.flowThread.requestTransition(t, !1), this;\n    }\n  }, {\n    key: \"requestStep\",\n    value: function requestStep(t, e, a, n) {\n      this.isRunning && this.flowThread.requestStep(t, e, a, n);\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(t) {\n      var _this18 = this;\n\n      if (!this.isRunning) throw new Error(\"unexpected\");\n      return this.addReaction($STOP, {\n        name: \"onStop=>notifyEvents\",\n        reactionType: ReactionType.ONCE,\n        action: function action() {\n          t && t(_this18.flowAnchor.getCurrentEvents());\n        }\n      }), this.requestStatus({\n        name: $STOP\n      }), this;\n    }\n  }, {\n    key: \"alwaysOn\",\n    value: function alwaysOn(t, e) {\n      return this.addReaction(t, {\n        name: \"-\",\n        reactionType: ReactionType.ALWAYS,\n        action: e\n      });\n    }\n  }, {\n    key: \"onceOnInit\",\n    value: function onceOnInit(t) {\n      return this.onceOn($INIT, t);\n    }\n  }, {\n    key: \"onceOnStop\",\n    value: function onceOnStop(t) {\n      return this.onceOn($STOP, t);\n    }\n  }, {\n    key: \"onceOn\",\n    value: function onceOn(t, e, a) {\n      var n = this.flowOrchestrator.createRuntimeTracker(this, FlowEventSource.FLOW_CONTROLLER, exports.FlowEventType.ONCE_ON, t).start();\n      n.debug(\"[onceOn(\".concat(t, \")\"));\n      var r = this.addReaction(t, {\n        name: null != a ? a : \"[userCode]\",\n        reactionType: ReactionType.ONCE,\n        action: e\n      });\n      return n.end(), r;\n    }\n  }, {\n    key: \"addReaction\",\n    value: function addReaction(t, e) {\n      var a = this.flowOrchestrator.createRuntimeTracker(this, FlowEventSource.FLOW_CONTROLLER, exports.FlowEventType.ADDING_REACTION).start(),\n          n = !0;\n\n      if (this.isRunning) {\n        if (this.flowThread.tryToQueue(t, e)) return a.info([\"queueing reaction: \".concat(e.name)]), a.end(), this;\n        this.runIf(t, {\n          action: function action(t) {\n            e.action(t), e.reactionType === ReactionType.ONCE && (n = !1);\n          },\n          reactionType: e.reactionType,\n          name: e.name\n        });\n      }\n\n      if (n) {\n        var _a2 = this.on(t);\n\n        if (null == _a2) throw new Error(\"unable to add reactions for unknown event [\".concat(t, \"]\"));\n        this.addReactionNext(_a2, e);\n      }\n\n      return a.end(), this;\n    }\n  }, {\n    key: \"addReactionNext\",\n    value: function addReactionNext(t, e) {\n      return t.reactions.push(e), this;\n    }\n  }, {\n    key: \"getReactions\",\n    value: function getReactions(t) {\n      var e = this.on(t);\n      if (null == e) throw new Error(\"can't getReactions for unknown status[\".concat(t, \"]\"));\n      return e.reactions;\n    }\n  }, {\n    key: \"getCurrentStatusName\",\n    value: function getCurrentStatusName() {\n      if (void 0 != this.flowThread) return this.flowThread.getCurrentStatusName();\n    }\n  }, {\n    key: \"getEvents\",\n    value: function getEvents() {\n      return this.flowAnchor.getCurrentEvents();\n    }\n  }, {\n    key: \"getName\",\n    value: function getName() {\n      return this.flowDef.name;\n    }\n  }, {\n    key: \"getState\",\n    value: function getState() {\n      return this.flowThread.getCurrentState();\n    }\n  }, {\n    key: \"getStatusData\",\n    value: function getStatusData() {\n      return this.flowAnchor.getStatusData();\n    }\n  }, {\n    key: \"onInit\",\n    value: function onInit() {\n      return this.on($INIT);\n    }\n  }, {\n    key: \"on\",\n    value: function on(t) {\n      return this.flowDef.statusesByStatusName[t];\n    }\n  }, {\n    key: \"getStatusDefs\",\n    value: function getStatusDefs() {\n      return this.flowDef.statusesByStatusName;\n    }\n  }, {\n    key: \"removeReaction\",\n    value: function removeReaction(t, e) {\n      var a = this.on(t),\n          n = a.reactions;\n      n && (a.reactions = n.filter(function (t) {\n        return t !== e;\n      }));\n    }\n  }, {\n    key: \"processReactions\",\n    value: function processReactions(t) {\n      var _this19 = this;\n\n      var e,\n          a = this.flowOrchestrator.createRuntimeTracker(this, FlowEventSource.FLOW_CONTROLLER, exports.FlowEventType.PROCESSING_REACTIONS).start(),\n          n = this.getReactions(t),\n          r = n.map(function (t) {\n        return t.name;\n      }).join(\",\");\n      return a.info(\"ABOUT TO PROCESS: \".concat(r)), n.forEach(function (n) {\n        a.info(\"START: \".concat(n.name)), n.reactionType === ReactionType.ONCE && _this19.removeReaction(t, n), n.action(_this19.flowThread.createContext(t, function (t) {\n          return e = t;\n        })), a.info(\"END:  \".concat(n.name));\n      }), a.info(\"REACTIONS PROCESSED\".concat(r)), e && e(), a.end(t), this;\n    }\n  }, {\n    key: \"getStateData\",\n    value: function getStateData() {\n      throw new Error(\"TBI\");\n    }\n  }, {\n    key: \"reactOnStatusChanged\",\n    value: function reactOnStatusChanged(t) {\n      var _this20 = this;\n\n      return Object.keys(this.getStatusDefs()).forEach(function (e) {\n        _this20.addReaction(e, {\n          name: \"-\",\n          reactionType: ReactionType.ALWAYS,\n          action: function action(a) {\n            return t({\n              name: e,\n              data: a.getData()\n            });\n          }\n        });\n      }), this;\n    }\n  }, {\n    key: \"runIf\",\n    value: function runIf(t, e, a) {\n      var n = this.flowOrchestrator.createRuntimeTracker(this, FlowEventSource.FLOW_CONTROLLER, exports.FlowEventType.RUN_IF, e.name).start();\n      if (!this.isRunning) return a && a(), void n.end();\n      var r = this.getCurrentStatusName();\n      if (null == r) return a && a(), void n.end();\n      r === t ? this.doRun(e, t) : a && a(), n.end();\n    }\n  }, {\n    key: \"doRun\",\n    value: function doRun(t, e) {\n      var a = this.flowOrchestrator.createRuntimeTracker(this, FlowEventSource.FLOW_CONTROLLER, exports.FlowEventType.RUN, t.name).start();\n      a.debug(\"\".concat(t.name)), t.action(this.flowThread.createContext(e, function (t) {\n        return t();\n      })), a.end();\n    }\n  }, {\n    key: \"assertOn\",\n    value: function assertOn(t, e) {\n      var a = this.getCurrentStatusName();\n      if (a !== t) throw new Error(\"asserting that we are on the status [\".concat(t, \"]. But we are currently on [\").concat(a, \"]\"));\n      return e && this.onceOn(t, function (t) {\n        return e(t);\n      }), this;\n    }\n  }, {\n    key: \"chainInto\",\n    value: function chainInto(t, e, a, n) {\n      var r = null != n ? n : \"chainInto-\".concat(this.getName(), \":\").concat(e);\n\n      var _Asaps$next7 = Asaps.next(r, FlowEventNature.AUX),\n          _Asaps$next8 = _slicedToArray(_Asaps$next7, 2),\n          s = _Asaps$next8[0],\n          i = _Asaps$next8[1];\n\n      if (this.addReactionNext(this.on(e), {\n        name: r,\n        reactionType: ReactionType.ONCE,\n        action: function action(t) {\n          return s(t);\n        }\n      }), \"$init\" !== this.getCurrentStatusName()) this.assertOn(t), this.onceOn(t, function (t) {\n        return a(t.do);\n      }, \"chain-\" + r);else {\n        var _t = this.getStatusDefs()[e];\n        this.onceOn(\"$init\", function () {\n          return a(_t.steps);\n        }, \"chain-\" + r);\n      }\n      return i;\n    }\n  }, {\n    key: \"deferInto\",\n    value: function deferInto(t, e, a) {\n      var _this21 = this;\n\n      var n = \"[\".concat(this.getName(), \"]::\").concat(t, \"=>\").concat(e),\n          r = deferParser(a, {\n        name: n,\n        payload: n\n      }),\n          s = this.flowOrchestrator.createRuntimeTracker(this, FlowEventSource.FLOW_CONTROLLER, exports.FlowEventType.MONITORING, {\n        asap: r.action,\n        name: r.name,\n        payload: r.payload\n      }).start();\n      return r.action.type === exports.AsapType.LATER && s.milestone(\"START monitoring - \".concat(r.name), r.payload), r.action.chain(function (a) {\n        return r.action.type === exports.AsapType.LATER && s.debug(\"STOP monitoring - \".concat(r.name)), s.end(), _this21.chainInto(t, e, a);\n      }).onCancel(function () {\n        s.cancel();\n      });\n    }\n  }, {\n    key: \"changeLoggingNature\",\n    value: function changeLoggingNature(t) {\n      this.flowDef.nature = t;\n    }\n  }, {\n    key: \"log\",\n    value: function log(t) {\n      var e = this.flowOrchestrator.createRuntimeTracker(this, FlowEventSource.USER_MSG, exports.FlowEventType.USER_CODE, t).start(),\n          a = e.milestone(void 0, t);\n      return e.end(), a;\n    }\n  }, {\n    key: \"createRuntimeTracker\",\n    value: function createRuntimeTracker(t, e) {\n      return this.flowOrchestrator.createRuntimeTracker(this, FlowEventSource.FLOW_CONTROLLER, t, e);\n    }\n  }, {\n    key: \"getDefinition\",\n    value: function getDefinition() {\n      return this.flowDef;\n    }\n  }, {\n    key: \"toStateAll\",\n    value: function toStateAll() {\n      var t = Threads.create({\n        name: \"\".concat(this.getName(), \"=>[all statuses]\")\n      });\n      return this.reactOnStatusChanged(function (e) {\n        return t.do.$update(e);\n      }), t;\n    }\n  }, {\n    key: \"toState\",\n    value: function toState(t) {\n      var e = Threads.create({\n        name: \"\".concat(this.getName(), \"=>[states:\").concat(t, \"]\")\n      });\n      return this.alwaysOn(t, function (t) {\n        return e.do.$update(t.getData());\n      }), e;\n    }\n  }]);\n\n  return FlowImpl;\n}();\n\nvar FlowFacadeImpl = /*#__PURE__*/function () {\n  function FlowFacadeImpl(t, e) {\n    _classCallCheck(this, FlowFacadeImpl);\n\n    this.flow = t, this.actions = e, this.do = e;\n  }\n\n  _createClass(FlowFacadeImpl, [{\n    key: \"addReaction\",\n    value: function addReaction(t, e) {\n      return this.flow.addReaction(t, e), this;\n    }\n  }, {\n    key: \"alwaysOn\",\n    value: function alwaysOn(t, e) {\n      return this.flow.alwaysOn(t, e), this;\n    }\n  }, {\n    key: \"assertOn\",\n    value: function assertOn(t, e) {\n      return this.flow.assertOn(t, e), this;\n    }\n  }, {\n    key: \"chainInto\",\n    value: function chainInto(t, e, a, n) {\n      this.flow.chainInto(t, e, a, n);\n    }\n  }, {\n    key: \"getCurrentStatusName\",\n    value: function getCurrentStatusName() {\n      return this.flow.getCurrentStatusName();\n    }\n  }, {\n    key: \"getEvents\",\n    value: function getEvents() {\n      return this.flow.getEvents();\n    }\n  }, {\n    key: \"getName\",\n    value: function getName() {\n      return this.flow.getName();\n    }\n  }, {\n    key: \"getState\",\n    value: function getState() {\n      return this.flow.getState();\n    }\n  }, {\n    key: \"getStatusData\",\n    value: function getStatusData() {\n      return this.flow.getStatusData();\n    }\n  }, {\n    key: \"on\",\n    value: function on(t) {\n      return this.flow.on(t);\n    }\n  }, {\n    key: \"onceOn\",\n    value: function onceOn(t, e, a) {\n      return this.flow.onceOn(t, e, a), this;\n    }\n  }, {\n    key: \"onceOnInit\",\n    value: function onceOnInit(t) {\n      return this.flow.onceOnInit(t), this;\n    }\n  }, {\n    key: \"onceOnStop\",\n    value: function onceOnStop(t) {\n      return this.flow.onceOnStop(t), this;\n    }\n  }, {\n    key: \"start\",\n    value: function start(t) {\n      return this.flow.start(t), this;\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(t) {\n      return this.flow.stop(t), this;\n    }\n  }, {\n    key: \"onInit\",\n    value: function onInit() {\n      return this.flow.onInit();\n    }\n  }, {\n    key: \"reactOnStatusChanged\",\n    value: function reactOnStatusChanged(t) {\n      return this.flow.reactOnStatusChanged(t), this;\n    }\n  }, {\n    key: \"deferInto\",\n    value: function deferInto(t, e, a) {\n      return this.flow.deferInto(t, e, a);\n    }\n  }, {\n    key: \"removeReaction\",\n    value: function removeReaction(t, e) {\n      this.flow.removeReaction(t, e);\n    }\n  }, {\n    key: \"changeLoggingNature\",\n    value: function changeLoggingNature(t) {\n      this.flow.changeLoggingNature(t);\n    }\n  }, {\n    key: \"log\",\n    value: function log(t) {\n      this.flow.log(t);\n    }\n  }, {\n    key: \"createRuntimeTracker\",\n    value: function createRuntimeTracker(t, e) {\n      return this.flow.createRuntimeTracker(t, e);\n    }\n  }, {\n    key: \"addReactionNext\",\n    value: function addReactionNext(t, e) {\n      return this.flow.addReactionNext(t, e), this;\n    }\n  }, {\n    key: \"getDefinition\",\n    value: function getDefinition() {\n      return this.flow.getDefinition();\n    }\n  }, {\n    key: \"toState\",\n    value: function toState(t) {\n      return this.flow.toState(t);\n    }\n  }, {\n    key: \"toStateAll\",\n    value: function toStateAll() {\n      return this.flow.toStateAll();\n    }\n  }, {\n    key: \"isRunning\",\n    get: function get() {\n      return this.flow.isRunning;\n    }\n  }]);\n\n  return FlowFacadeImpl;\n}();\n\nvar FlowOrchestrator$ = function FlowOrchestrator$(t) {\n  return new FlowOrchestrator([function (t) {\n    return FLOW_LOGGER.log(t);\n  }].concat(_toConsumableArray(t)));\n};\n\nvar Flows = /*#__PURE__*/function () {\n  function Flows() {\n    _classCallCheck(this, Flows);\n  }\n\n  _createClass(Flows, null, [{\n    key: \"create\",\n    value: function create(t) {\n      var e = this.createController(t);\n      return this.createFacade(e, t.actions);\n    }\n  }, {\n    key: \"createFacade\",\n    value: function createFacade(t, e) {\n      return new FlowFacadeImpl(t, e ? e(t) : void 0);\n    }\n  }, {\n    key: \"createController\",\n    value: function createController(t) {\n      var e = new FlowAnchor(),\n          a = FlowOrchestrator$(t.pipelineListener ? [t.pipelineListener] : []),\n          n = new FlowImpl(FlowDefFactory.create(t, e), e, a);\n      return a.createRuntimeTracker(n, FlowEventSource.FLOW_FACTORY, exports.FlowEventType.CREATING, t).start().end(), n;\n    }\n  }]);\n\n  return Flows;\n}();\n\nvar ThreadFacade = /*#__PURE__*/function () {\n  function ThreadFacade(t, e) {\n    _classCallCheck(this, ThreadFacade);\n\n    this.thread = t, this.actions = e;\n  }\n\n  _createClass(ThreadFacade, [{\n    key: \"chain\",\n    value: function chain(t, e) {\n      this.thread.chain(t, e);\n    }\n  }, {\n    key: \"next\",\n    value: function next(t) {\n      this.thread.next(t);\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      return this.thread.start(), this;\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(t) {\n      return this.thread.stop(t), this;\n    }\n  }, {\n    key: \"addReaction\",\n    value: function addReaction(t) {\n      return this.thread.addReaction(t);\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      return this.thread.getData();\n    }\n  }, {\n    key: \"getEvents\",\n    value: function getEvents() {\n      return this.thread.getEvents();\n    }\n  }, {\n    key: \"getName\",\n    value: function getName() {\n      return this.thread.getName();\n    }\n  }, {\n    key: \"changeLoggingNature\",\n    value: function changeLoggingNature(t) {\n      this.thread.changeLoggingNature(t);\n    }\n  }, {\n    key: \"log\",\n    value: function log(t) {\n      this.thread.log(t);\n    }\n  }, {\n    key: \"once\",\n    value: function once(t, e) {\n      return this.thread.once(t, e), this;\n    }\n  }, {\n    key: \"createRuntimeTracker\",\n    value: function createRuntimeTracker(t, e) {\n      return this.thread.createRuntimeTracker(t, e);\n    }\n  }, {\n    key: \"monitor\",\n    value: function monitor(t, e, a, n) {\n      return this.thread.monitor(t, e, a, n);\n    }\n  }, {\n    key: \"addReactionNext\",\n    value: function addReactionNext(t) {\n      return this.thread.addReactionNext(t), this;\n    }\n  }, {\n    key: \"getDefinition\",\n    value: function getDefinition() {\n      return this.thread.getDefinition();\n    }\n  }, {\n    key: \"do\",\n    get: function get() {\n      var t = this.reducers;\n      return Object.assign(Object.assign({}, t), this.actions);\n    }\n  }, {\n    key: \"reducers\",\n    get: function get() {\n      return this.thread.reducers;\n    }\n  }, {\n    key: \"isRunning\",\n    get: function get() {\n      return this.thread.isRunning;\n    }\n  }]);\n\n  return ThreadFacade;\n}();\n\nvar MethodFinder = /*#__PURE__*/function () {\n  function MethodFinder() {\n    _classCallCheck(this, MethodFinder);\n  }\n\n  _createClass(MethodFinder, null, [{\n    key: \"exists\",\n    value: function exists(t, e) {\n      return null != t && this.find(t, e).length > 0;\n    }\n  }, {\n    key: \"find\",\n    value: function find(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n      var a = Object.getPrototypeOf(t),\n          n = \"Object\" === a.constructor.name ? t : a;\n      return Object.getOwnPropertyNames(n).filter(function (t) {\n        return t.startsWith(e);\n      });\n    }\n  }]);\n\n  return MethodFinder;\n}();\n\nvar Threads = /*#__PURE__*/function () {\n  function Threads() {\n    _classCallCheck(this, Threads);\n  }\n\n  _createClass(Threads, null, [{\n    key: \"create\",\n    value: function create(t, e) {\n      var a,\n          n = Flows.createController(Object.assign(Object.assign({\n        name: t.name,\n        statuses: {\n          nextData: Object.assign(Object.assign({}, t.reducers ? {\n            steps: t.reducers\n          } : void 0), t.reactions ? {\n            reactions: t.reactions\n          } : void 0)\n        }\n      }, t.hasOwnProperty(\"initialData\") ? {\n        initialStatus: AsapParser.from(t.initialData).map(function (t) {\n          return {\n            name: \"nextData\",\n            data: t\n          };\n        })\n      } : void 0), {\n        pipelineListener: t.pipelineListener,\n        nature: t.nature ? t.nature : FlowEventNature.MAIN\n      })),\n          r = new ThreadImpl(n, t);\n      if (t.actions && t.autoBind) throw new Error(\"you can only use actions or autoBind. Both in conjunction is illegal\");\n      if (null != e) a = new ThreadFacade(r, e);else if (t.autoBind) {\n        var _e2 = [],\n            _n = Object.assign({}, t.autoBind);\n\n        Object.keys(r.reducers).forEach(function (a) {\n          var s = a.substring(1, a.length);\n          MethodFinder.exists(t.autoBind, s) ? (_n[s] = function () {\n            var _t$autoBind;\n\n            return (_t$autoBind = t.autoBind)[s].apply(_t$autoBind, arguments);\n          }, _e2.push(s)) : _n[s] = function () {\n            for (var _len4 = arguments.length, t = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n              t[_key4] = arguments[_key4];\n            }\n\n            return r.chain(function (e) {\n              return e[a].apply(e, t);\n            });\n          };\n        }), a = new ThreadFacade(r, Proxyfier.proxy(_n, function (t, a) {\n          return -1 === _e2.indexOf(a.methodName) ? t() : r.monitor(t(), function (t, e) {\n            return e[\"$\".concat(a.methodName)](t);\n          }, a.methodName, a.payload);\n        }));\n      } else {\n        var _e3 = t.actions ? t.actions(r) : {};\n\n        Object.keys(r.reducers).forEach(function (t) {\n          var n = t.substring(1, t.length);\n          _e3[n] || (_e3[n] = function () {\n            for (var _len5 = arguments.length, e = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n              e[_key5] = arguments[_key5];\n            }\n\n            return r.chain(function (a) {\n              return a[t].apply(a, e);\n            }, \"\".concat(a.getName(), \".do.\").concat(n, \" ()\"));\n          });\n        }), _e3.updateAsap = function (t, e) {\n          var a;\n          return a = \"then\" in t ? t : t(r.getData()), r.monitor(a, function (t, e) {\n            return e.$update(t);\n          }, null == e ? \"updateAsap\" : e);\n        }, a = new ThreadFacade(r, _e3);\n      }\n      return t.cancelAutoStart || a.start(), a;\n    }\n  }]);\n\n  return Threads;\n}();\n\nvar PipeImpl = /*#__PURE__*/function () {\n  function PipeImpl(t, e, a) {\n    _classCallCheck(this, PipeImpl);\n\n    this.name = t, this.pipeConnector = e, this.pipeThreadDef = a;\n  }\n\n  _createClass(PipeImpl, [{\n    key: \"addReaction\",\n    value: function addReaction(t) {\n      return this.baseThread.addReaction(t);\n    }\n  }, {\n    key: \"chain\",\n    value: function chain(t) {\n      return this.baseThread.chain(t);\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      return this.baseThread.getData();\n    }\n  }, {\n    key: \"getEvents\",\n    value: function getEvents() {\n      return this.baseThread.getEvents();\n    }\n  }, {\n    key: \"getName\",\n    value: function getName() {\n      return this.baseThread.getName();\n    }\n  }, {\n    key: \"next\",\n    value: function next(t) {\n      this.baseThread.next(t);\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      if (null == this.baseThread) {\n        var t = Object.assign({\n          name: this.name\n        }, this.pipeThreadDef);\n        this.baseThread = Threads.create(t), this.pipeConnector(this.baseThread);\n      } else this.baseThread.start();\n\n      return this;\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(t) {\n      return this.baseThread.stop(void 0), this;\n    }\n  }, {\n    key: \"changeLoggingNature\",\n    value: function changeLoggingNature(t) {\n      return this.baseThread.changeLoggingNature(t);\n    }\n  }, {\n    key: \"log\",\n    value: function log(t) {\n      this.baseThread.log(t);\n    }\n  }, {\n    key: \"once\",\n    value: function once(t, e) {\n      return this.baseThread.once(t, e), this;\n    }\n  }, {\n    key: \"createRuntimeTracker\",\n    value: function createRuntimeTracker(t, e) {\n      return this.baseThread.createRuntimeTracker(t, e);\n    }\n  }, {\n    key: \"monitor\",\n    value: function monitor(t, e, a, n) {\n      return this.baseThread.monitor(t, e, a, n);\n    }\n  }, {\n    key: \"addReactionNext\",\n    value: function addReactionNext(t) {\n      return this.baseThread.addReactionNext(t), this;\n    }\n  }, {\n    key: \"getDefinition\",\n    value: function getDefinition() {\n      return this.baseThread.getDefinition();\n    }\n  }, {\n    key: \"reducers\",\n    get: function get() {\n      return this.baseThread.reducers;\n    }\n  }, {\n    key: \"isRunning\",\n    get: function get() {\n      return this.baseThread.isRunning;\n    }\n  }, {\n    key: \"do\",\n    get: function get() {\n      return this.baseThread.do;\n    }\n  }, {\n    key: \"actions\",\n    get: function get() {\n      return this.baseThread.actions;\n    }\n  }, {\n    key: \"thread\",\n    get: function get() {\n      return this.baseThread.thread;\n    }\n  }]);\n\n  return PipeImpl;\n}();\n\nvar Pipes = /*#__PURE__*/function () {\n  function Pipes() {\n    _classCallCheck(this, Pipes);\n  }\n\n  _createClass(Pipes, null, [{\n    key: \"fromMonitor\",\n    value: function fromMonitor(t, e, a, n, r) {\n      return Pipes.filter(t, Pipes.merge(t, e.asyncThread, a, e.mainThread, n, r), function (t, e) {\n        return !Objects.deepEquals(t, e);\n      }, {\n        nature: FlowEventNature.AUX\n      });\n    }\n  }, {\n    key: \"map\",\n    value: function map(t, e, a, n) {\n      return new PipeImpl(t, function (t) {\n        return e.addReaction({\n          name: \"mapper\",\n          dataConsumer: function dataConsumer(e) {\n            return t.do.update(a(e));\n          }\n        });\n      }, n).start();\n    }\n  }, {\n    key: \"merge\",\n    value: function merge(t, e, a, n, r, s) {\n      var i = Threads.create({\n        name: \"last states\",\n        nature: FlowEventNature.AUX\n      }),\n          o = Threads.create({\n        name: \"last states\",\n        nature: FlowEventNature.AUX\n      }),\n          u = Threads.create({\n        name: \"last states\",\n        nature: FlowEventNature.AUX\n      });\n      return new PipeImpl(t, function (t) {\n        t.addReaction({\n          name: \"append state\",\n          dataConsumer: function dataConsumer(t) {\n            return i.do.update(t);\n          }\n        }), [[e, a, o, u], [n, r, u, o]].forEach(function (e) {\n          var a = e[0],\n              n = e[1],\n              r = e[2],\n              s = e[3];\n          a.addReaction({\n            name: \"merge\",\n            dataConsumer: function dataConsumer(e) {\n              r.reducers.$update(e), t.do.update(n(e, s.getData(), i.getData()));\n            }\n          });\n        });\n      }, s).start();\n    }\n  }, {\n    key: \"tupleCombine\",\n    value: function tupleCombine(t, e, a, n) {\n      var r = Threads.create({\n        name: \"last states\",\n        nature: FlowEventNature.AUX\n      }),\n          s = Threads.create({\n        name: \"last states\",\n        nature: FlowEventNature.AUX\n      });\n      return new PipeImpl(\"combineArray => [\".concat(e.getName(), \", \").concat(a.getName(), \"]\"), function (n) {\n        n.addReaction({\n          name: t,\n          dataConsumer: function dataConsumer(t) {\n            r.do.update(t[0]), s.do.update(t[1]);\n          }\n        }), [[e, s, \"left\"], [a, r, \"right\"]].forEach(function (t) {\n          var e = t[0],\n              a = t[1],\n              r = t[2];\n          e.addReaction({\n            name: \"tuple=>\".concat(r),\n            dataConsumer: function dataConsumer(t) {\n              var e;\n\n              if (\"left\" === r) {\n                e = [t, a.getData()];\n              } else {\n                e = [a.getData(), t];\n              }\n\n              n.do.update(e);\n            }\n          });\n        });\n      }, n).start();\n    }\n  }, {\n    key: \"combine\",\n    value: function combine(t, e, a) {\n      return new PipeImpl(t, function (t) {\n        return Objects.foreachEntry(e, function (e, a) {\n          return e.addReaction({\n            name: \"combine\",\n            dataConsumer: function dataConsumer(e) {\n              t.reducers.$update(function (t) {\n                return Object.assign(Object.assign({}, t), _defineProperty({}, a, e));\n              });\n            }\n          });\n        });\n      }, a).start();\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(t, e, a, n) {\n      var r = Threads.create({\n        name: \"last states\",\n        nature: FlowEventNature.AUX\n      });\n      return new PipeImpl(t, function (t) {\n        t.addReaction({\n          name: \"save state\",\n          dataConsumer: function dataConsumer(t) {\n            return r.reducers.$update(t);\n          }\n        }), e.addReaction({\n          name: \"pipe-filter\",\n          dataConsumer: function dataConsumer(e) {\n            var n = r.getData();\n            a(e, n) && t.reducers.$update(e);\n          }\n        });\n      }, n).start();\n    }\n  }]);\n\n  return Pipes;\n}();\n\nvar MonitorFacade = /*#__PURE__*/function () {\n  function MonitorFacade(t, e) {\n    _classCallCheck(this, MonitorFacade);\n\n    this.monitor = t, this.actions = e;\n  }\n\n  _createClass(MonitorFacade, [{\n    key: \"start\",\n    value: function start() {\n      return this.monitor.start(), this;\n    }\n  }, {\n    key: \"addAsyncReaction\",\n    value: function addAsyncReaction(t) {\n      return this.monitor.addAsyncReaction(t);\n    }\n  }, {\n    key: \"addReaction\",\n    value: function addReaction(t) {\n      return this.monitor.addReaction(t);\n    }\n  }, {\n    key: \"once\",\n    value: function once(t, e) {\n      return this.monitor.once(t, e), this;\n    }\n  }, {\n    key: \"getEvents\",\n    value: function getEvents() {\n      return this.monitor.getEvents();\n    }\n  }, {\n    key: \"getName\",\n    value: function getName() {\n      return this.monitor.getName();\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(t) {\n      this.monitor.stop(t);\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      return this.monitor.getData();\n    }\n  }, {\n    key: \"next\",\n    value: function next(t) {\n      this.monitor.next(t);\n    }\n  }, {\n    key: \"chain\",\n    value: function chain(t, e) {\n      return this.monitor.mainThread.chain(t, e);\n    }\n  }, {\n    key: \"transaction\",\n    value: function transaction(t) {\n      return this.monitor.transaction(t);\n    }\n  }, {\n    key: \"openTransaction\",\n    value: function openTransaction(t) {\n      this.monitor.openTransaction(t);\n    }\n  }, {\n    key: \"closeTransaction\",\n    value: function closeTransaction(t) {\n      this.monitor.closeTransaction(t);\n    }\n  }, {\n    key: \"do\",\n    get: function get() {\n      return this.monitor.do;\n    }\n  }, {\n    key: \"asyncThread\",\n    get: function get() {\n      return this.monitor.asyncThread;\n    }\n  }, {\n    key: \"mainThread\",\n    get: function get() {\n      return this.monitor.mainThread;\n    }\n  }, {\n    key: \"metaFlow\",\n    get: function get() {\n      return this.monitor.metaFlow;\n    }\n  }]);\n\n  return MonitorFacade;\n}();\n\nvar MetaStatus;\n!function (t) {\n  t.STARTING = \"STARTING\", t.INIT = \"INIT\", t.RUNNING = \"RUNNING\", t.ERROR = \"ERROR\", t.IDLE = \"IDLE\", t.IDLE_ON_TRANSACTION = \"IDLE_ON_TRANSACTION\";\n}(MetaStatus || (MetaStatus = {}));\n\nvar ConanFlow = /*#__PURE__*/function () {\n  function ConanFlow(t) {\n    _classCallCheck(this, ConanFlow);\n\n    this.flow = t;\n  }\n\n  _createClass(ConanFlow, [{\n    key: \"on\",\n    value: function on(t) {\n      return this.flow.on(t);\n    }\n  }, {\n    key: \"reactOnStatusChanged\",\n    value: function reactOnStatusChanged(t) {\n      return this.flow.reactOnStatusChanged(t), this;\n    }\n  }, {\n    key: \"alwaysOn\",\n    value: function alwaysOn(t, e) {\n      return this.flow.alwaysOn(t, e), this;\n    }\n  }, {\n    key: \"start\",\n    value: function start(t) {\n      return this.flow.start(t), this;\n    }\n  }, {\n    key: \"toStateAll\",\n    value: function toStateAll() {\n      var t = Conan.state({\n        name: \"\".concat(this.flow.getName(), \"=>[all statuses]\")\n      });\n      return this.reactOnStatusChanged(function (e) {\n        return t.do.update(e);\n      }), t;\n    }\n  }, {\n    key: \"toState\",\n    value: function toState(t) {\n      var e = Conan.light(\"\".concat(this.flow.getName(), \"=>[states:\").concat(t, \"]\"));\n      return this.alwaysOn(t, function (t) {\n        return e.do.update(t.getData());\n      }), e;\n    }\n  }]);\n\n  return ConanFlow;\n}();\n\nvar MonitorImpl = /*#__PURE__*/function () {\n  function MonitorImpl(t, e, a) {\n    _classCallCheck(this, MonitorImpl);\n\n    this.mainThread = t, this.asyncThread = e, this.metaFlow = a;\n  }\n\n  _createClass(MonitorImpl, [{\n    key: \"start\",\n    value: function start() {\n      return this.mainThread.start(), this;\n    }\n  }, {\n    key: \"addReaction\",\n    value: function addReaction(t) {\n      return this.mainThread.addReaction(t);\n    }\n  }, {\n    key: \"addAsyncReaction\",\n    value: function addAsyncReaction(t) {\n      return this.asyncThread.addReaction(t);\n    }\n  }, {\n    key: \"getEvents\",\n    value: function getEvents() {\n      return this.mainThread.getEvents();\n    }\n  }, {\n    key: \"getName\",\n    value: function getName() {\n      return this.mainThread.getName();\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(t) {\n      this.mainThread.stop(t);\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      return this.mainThread.getData();\n    }\n  }, {\n    key: \"next\",\n    value: function next(t) {\n      this.mainThread.next(t);\n    }\n  }, {\n    key: \"once\",\n    value: function once(t, e) {\n      return this.mainThread.once(t, e), this;\n    }\n  }, {\n    key: \"chain\",\n    value: function chain(t, e) {\n      return this.mainThread.chain(t, e);\n    }\n  }, {\n    key: \"openTransaction\",\n    value: function openTransaction(t) {\n      null == this.currentTransaction && (this.currentTransaction = this.mainThread.createRuntimeTracker(exports.FlowEventType.MONITOR_TRANSACTION).start(), this.currentTransaction.info(\"starting transaction: \".concat(null == t ? \"[anonymous]\" : t)));\n    }\n  }, {\n    key: \"closeTransaction\",\n    value: function closeTransaction(t) {\n      var _this22 = this;\n\n      var e = new ConanFlow(this.metaFlow).toStateAll().map(function (t) {\n        return t.data;\n      }),\n          a = !1,\n          n = !1,\n          r = void 0;\n      r = Pipes.tupleCombine(\"idleChecker\", this.asyncThread, e.mainThread, {\n        nature: FlowEventNature.AUX\n      }).addReaction({\n        name: \"wait for both idle\",\n        dataConsumer: function dataConsumer(_ref2) {\n          var _ref3 = _slicedToArray(_ref2, 2),\n              e = _ref3[0],\n              s = _ref3[1];\n\n          if (e.status === exports.MonitorStatus.IDLE && (s.status === MetaStatus.IDLE_ON_TRANSACTION || s.status === MetaStatus.IDLE)) {\n            var _e4 = void 0;\n\n            _e4 = _this22.mainThread.addReaction({\n              name: \"wait for both idle\",\n              dataConsumer: function dataConsumer(s) {\n                _this22.currentTransaction.info(\"finishing transaction\"), _this22.currentTransaction.end(), _this22.currentTransaction = null, _e4 ? _e4.release() : n = !0, r ? r.release() : a = !0, t && t(s);\n              }\n            }), n && _e4.release();\n          }\n        }\n      }), a && r.release();\n    }\n  }, {\n    key: \"transaction\",\n    value: function transaction(t, e) {\n      var _Asaps$next9 = Asaps.next(\"transaction[\".concat(e, \"]\")),\n          _Asaps$next10 = _slicedToArray(_Asaps$next9, 2),\n          a = _Asaps$next10[0],\n          n = _Asaps$next10[1];\n\n      return this.openTransaction(), t(this.do), this.closeTransaction(function (t) {\n        return a(t);\n      }), n;\n    }\n  }, {\n    key: \"do\",\n    get: function get() {\n      return this.mainThread.do;\n    }\n  }]);\n\n  return MonitorImpl;\n}();\n\nvar MetaMutatorsFactory = /*#__PURE__*/function () {\n  function MetaMutatorsFactory() {\n    _classCallCheck(this, MetaMutatorsFactory);\n  }\n\n  _createClass(MetaMutatorsFactory, null, [{\n    key: \"createTransitions\",\n    value: function createTransitions(t, e) {\n      return {\n        toIdle: function toIdle() {\n          var e = t().transactionCount;\n          return {\n            name: 0 === e ? \"idle\" : \"idleOnTransaction\",\n            data: {\n              status: 0 === e ? MetaStatus.IDLE : MetaStatus.IDLE_ON_TRANSACTION,\n              transactionCount: e,\n              lastError: t().lastError\n            }\n          };\n        },\n        toInit: function toInit() {\n          return {\n            name: \"init\",\n            data: {\n              status: MetaStatus.INIT,\n              transactionCount: t().transactionCount,\n              lastError: t().lastError\n            }\n          };\n        },\n        toRunning: function toRunning() {\n          return {\n            name: \"running\",\n            data: {\n              status: MetaStatus.RUNNING,\n              transactionCount: t().transactionCount,\n              lastError: t().lastError\n            }\n          };\n        },\n        toError: function toError(e) {\n          return {\n            name: \"error\",\n            data: {\n              status: MetaStatus.ERROR,\n              transactionCount: t().transactionCount,\n              lastError: e\n            }\n          };\n        }\n      };\n    }\n  }, {\n    key: \"createSteps\",\n    value: function createSteps(t) {\n      return {\n        $onTransaction: function $onTransaction(e) {\n          var a = t();\n          return {\n            status: a.status,\n            transactionCount: e === FlowEventTiming.START ? ++a.transactionCount : --a.transactionCount,\n            lastError: a.lastError\n          };\n        }\n      };\n    }\n  }]);\n\n  return MetaMutatorsFactory;\n}();\n\nvar Monitors = /*#__PURE__*/function () {\n  function Monitors() {\n    _classCallCheck(this, Monitors);\n  }\n\n  _createClass(Monitors, null, [{\n    key: \"fromThread\",\n    value: function fromThread(t) {\n      var e = Monitors.create({\n        name: t.getName(),\n        initialData: t.getDefinition().initialData,\n        nature: t.getDefinition().nature,\n        actions: t.getDefinition().actions,\n        autoBind: t.getDefinition().autoBind,\n        reducers: t.getDefinition().reducers\n      }, t.actions);\n      return t.addReaction({\n        name: \"pipe\",\n        dataConsumer: function dataConsumer(t) {\n          return e.do.$update(t);\n        }\n      }), e;\n    }\n  }, {\n    key: \"create\",\n    value: function create(t, e) {\n      var _this23 = this;\n\n      var a = this.createAsyncThread(t),\n          n = this.createMetaFlow(t.name),\n          r = Threads.create(Object.assign(Object.assign({}, t), {\n        nature: t.nature,\n        pipelineListener: function pipelineListener(t) {\n          _this23.orchestrate(t, a, n);\n        }\n      }), e),\n          s = new MonitorImpl(r, a, n);\n      return new MonitorFacade(s, r.actions);\n    }\n  }, {\n    key: \"createMetaFlow\",\n    value: function createMetaFlow(t) {\n      var e = Flows.create({\n        name: \"\".concat(t, \"=>[meta]\"),\n        statuses: {\n          starting: {\n            transitions: function transitions(t) {\n              return MetaMutatorsFactory.createTransitions(t, \"starting\");\n            },\n            steps: function steps(t) {\n              return MetaMutatorsFactory.createSteps(t);\n            }\n          },\n          init: {\n            transitions: function transitions(t) {\n              return MetaMutatorsFactory.createTransitions(t, \"init\");\n            },\n            steps: function steps(t) {\n              return MetaMutatorsFactory.createSteps(t);\n            }\n          },\n          running: {\n            transitions: function transitions(t) {\n              return MetaMutatorsFactory.createTransitions(t, \"running\");\n            },\n            steps: function steps(t) {\n              return MetaMutatorsFactory.createSteps(t);\n            }\n          },\n          idle: {\n            transitions: function transitions(t) {\n              return MetaMutatorsFactory.createTransitions(t, \"idle\");\n            },\n            steps: function steps(t) {\n              return MetaMutatorsFactory.createSteps(t);\n            }\n          },\n          idleOnTransaction: {\n            transitions: function transitions(t) {\n              return MetaMutatorsFactory.createTransitions(t, \"idleOnTransaction\");\n            },\n            steps: function steps(t) {\n              return MetaMutatorsFactory.createSteps(t);\n            }\n          },\n          error: {\n            transitions: function transitions(t) {\n              return MetaMutatorsFactory.createTransitions(t, \"error\");\n            },\n            steps: function steps(t) {\n              return MetaMutatorsFactory.createSteps(t);\n            }\n          }\n        },\n        initialStatus: {\n          name: \"starting\",\n          data: {\n            status: MetaStatus.STARTING,\n            transactionCount: 0\n          }\n        },\n        nature: FlowEventNature.META\n      });\n      return e.start(), e;\n    }\n  }, {\n    key: \"createAsyncThread\",\n    value: function createAsyncThread(t) {\n      return Threads.create({\n        name: \"\".concat(t.name, \"=>[async]\"),\n        actions: function actions(t) {\n          return {\n            tick: function tick(e) {\n              t.reducers.$update(function (t) {\n                return {\n                  status: exports.MonitorStatus.ASYNC_START,\n                  currentAction: e,\n                  inProgressActions: [].concat(_toConsumableArray(t.inProgressActions), [e])\n                };\n              });\n            },\n            unTick: function unTick(e, a) {\n              t.reducers.$update(function (t) {\n                return {\n                  status: a ? exports.MonitorStatus.ASYNC_CANCELLED : exports.MonitorStatus.ASYNC_FULFILLED,\n                  currentAction: e,\n                  inProgressActions: t.inProgressActions.filter(function (t) {\n                    return t !== e;\n                  })\n                };\n              }), 0 === t.getData().inProgressActions.length && t.reducers.$update(function (t) {\n                return {\n                  inProgressActions: [],\n                  currentAction: void 0,\n                  status: exports.MonitorStatus.IDLE\n                };\n              });\n            }\n          };\n        },\n        initialData: {\n          inProgressActions: [],\n          status: exports.MonitorStatus.IDLE,\n          currentAction: void 0\n        },\n        nature: FlowEventNature.ASYNC\n      });\n    }\n  }, {\n    key: \"orchestrate\",\n    value: function orchestrate(t, e, a) {\n      var n = t.timing;\n\n      if (t.type === exports.FlowEventType.ERROR_USER_CODE && a.assertOn(a.getCurrentStatusName(), function (t) {\n        return t.do.toError();\n      }), t.type !== exports.FlowEventType.MONITORING) {\n        if (t.type === exports.FlowEventType.MONITOR_TRANSACTION && (n === FlowEventTiming.START || n === FlowEventTiming.END)) switch (a.getCurrentStatusName()) {\n          case \"starting\":\n            a.assertOn(\"starting\", function (t) {\n              return t.do.$onTransaction(n);\n            });\n            break;\n\n          case \"init\":\n            a.assertOn(\"init\", function (t) {\n              return t.do.$onTransaction(n);\n            });\n            break;\n\n          case \"running\":\n            a.assertOn(\"running\", function (t) {\n              return t.do.$onTransaction(n);\n            });\n            break;\n\n          case \"idle\":\n            a.assertOn(\"idle\", function (t) {\n              return t.do.$onTransaction(n);\n            });\n            break;\n\n          case \"idleOnTransaction\":\n            a.assertOn(\"idleOnTransaction\", function (t) {\n              t.do.$onTransaction(n), 0 === t.getData().transactionCount && n === FlowEventTiming.END && t.do.toIdle();\n            });\n        }\n        if (t.type === exports.FlowEventType.ROOT_REQUEST) if (n === FlowEventTiming.START || n === FlowEventTiming.CONTINUE) {\n          if (\"$init\" === t.flowController.getCurrentStatusName()) return;\n\n          switch (a.getCurrentStatusName()) {\n            case \"idle\":\n              a.assertOn(\"idle\", function (t) {\n                return t.do.toRunning();\n              });\n              break;\n\n            case \"idleOnTransaction\":\n              a.assertOn(\"idleOnTransaction\", function (t) {\n                return t.do.toRunning();\n              });\n              break;\n\n            case \"init\":\n              a.assertOn(\"init\", function (t) {\n                return t.do.toRunning();\n              });\n          }\n        } else if (n === FlowEventTiming.END) switch (a.getCurrentStatusName()) {\n          case \"starting\":\n            a.assertOn(\"starting\", function (t) {\n              return t.do.toInit();\n            });\n            break;\n\n          case \"init\":\n            a.assertOn(\"init\", function (t) {\n              return t.do.toIdle();\n            });\n            break;\n\n          case \"running\":\n            e.getData().status === exports.MonitorStatus.IDLE && a.assertOn(\"running\", function (t) {\n              return t.do.toIdle();\n            });\n            break;\n\n          case \"idleOnTransaction\":\n            e.getData().status === exports.MonitorStatus.IDLE && a.assertOn(\"idleOnTransaction\", function (t) {\n              return t.do.toIdle();\n            });\n        }\n      } else n === FlowEventTiming.START ? (e.do.tick(t.payload), a.assertOn(a.getCurrentStatusName(), function (t) {\n        return t.do.toRunning();\n      })) : n === FlowEventTiming.END ? e.do.unTick(t.payload, !1) : n === FlowEventTiming.CANCEL && e.do.unTick(t.payload, !0);\n    }\n  }]);\n\n  return Monitors;\n}();\n\nvar ConanState = /*#__PURE__*/function () {\n  function ConanState(t) {\n    _classCallCheck(this, ConanState);\n\n    this.monitor = t;\n  }\n\n  _createClass(ConanState, [{\n    key: \"getName\",\n    value: function getName() {\n      return this.monitor.getName();\n    }\n  }, {\n    key: \"connectMap\",\n    value: function connectMap(t, e) {\n      return React.createElement(StateMapConnect, {\n        from: this,\n        into: t,\n        mapper: e\n      });\n    }\n  }, {\n    key: \"connectData\",\n    value: function connectData(t) {\n      return React.createElement(StateMapConnect, {\n        from: this,\n        into: t,\n        mapper: function mapper(t) {\n          return t;\n        }\n      });\n    }\n  }, {\n    key: \"connect\",\n    value: function connect(t) {\n      return React.createElement(StateConnect, {\n        from: this,\n        into: t\n      });\n    }\n  }, {\n    key: \"connectLive\",\n    value: function connectLive(t, e) {\n      return React.createElement(StateLive, {\n        from: this,\n        renderer: t,\n        fallbackValue: e\n      });\n    }\n  }, {\n    key: \"addAsyncReaction\",\n    value: function addAsyncReaction(t) {\n      return this.monitor.addAsyncReaction(t);\n    }\n  }, {\n    key: \"addDataReaction\",\n    value: function addDataReaction(t) {\n      return this.monitor.addReaction(t);\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      return this.monitor.start(), this;\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(t) {\n      return this.monitor.stop(t), this;\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      return this.monitor.getData();\n    }\n  }, {\n    key: \"asyncMerge\",\n    value: function asyncMerge(t, e, a) {\n      var n = Pipes.fromMonitor(\"monitor[\".concat(this.getName(), \"]\"), this.monitor, e, a, {\n        initialData: t,\n        nature: FlowEventNature.HELPER\n      });\n      return new ConanState(Monitors.fromThread(new ThreadFacade(n, this.actions)));\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(t) {\n      var e = Pipes.filter(\"filter=>\".concat(this.getName()), this.mainThread, t);\n      return new ConanState(Monitors.fromThread(e));\n    }\n  }, {\n    key: \"map\",\n    value: function map(t) {\n      var e = Pipes.map(\"map=>\".concat(this.getName()), this.mainThread, t);\n      return new ConanState(Monitors.fromThread(e));\n    }\n  }, {\n    key: \"merge\",\n    value: function merge(t, e) {\n      var a = Pipes.merge(\"merge=>\".concat(this.getName()), this.mainThread, e, t.mainThread, function (t, a, n) {\n        return e(a, t, n);\n      });\n      return new ConanState(Monitors.fromThread(a));\n    }\n  }, {\n    key: \"tuple\",\n    value: function tuple(t) {\n      var e = Pipes.tupleCombine(\"mergeTuple=>\".concat(this.getName()), this.mainThread, t.mainThread);\n      return new ConanState(Monitors.fromThread(e));\n    }\n  }, {\n    key: \"getEvents\",\n    value: function getEvents() {\n      return this.mainThread.getEvents();\n    }\n  }, {\n    key: \"always\",\n    value: function always(t) {\n      this.addDataReaction({\n        name: \"always\",\n        dataConsumer: function dataConsumer(e) {\n          return t(e);\n        }\n      });\n    }\n  }, {\n    key: \"openTransaction\",\n    value: function openTransaction(t) {\n      this.monitor.openTransaction(t);\n    }\n  }, {\n    key: \"closeTransaction\",\n    value: function closeTransaction(t) {\n      this.monitor.closeTransaction(t);\n    }\n  }, {\n    key: \"do\",\n    get: function get() {\n      return this.monitor.do;\n    }\n  }, {\n    key: \"actions\",\n    get: function get() {\n      return this.monitor.actions;\n    }\n  }, {\n    key: \"mainThread\",\n    get: function get() {\n      return this.monitor.mainThread;\n    }\n  }, {\n    key: \"asyncState\",\n    get: function get() {\n      return Conan.fromThread(this.monitor.asyncThread);\n    }\n  }, {\n    key: \"metaFlow\",\n    get: function get() {\n      return Conan.fromFlow(this.monitor.metaFlow);\n    }\n  }], [{\n    key: \"combine\",\n    value: function combine(t, e, a) {\n      var n = Pipes.combine(t, Objects.mapKeys(e, function (t) {\n        return t.mainThread;\n      }), a);\n      return new ConanState(Monitors.fromThread(n));\n    }\n  }]);\n\n  return ConanState;\n}();\n\nvar Conan = /*#__PURE__*/function () {\n  function Conan() {\n    _classCallCheck(this, Conan);\n  }\n\n  _createClass(Conan, null, [{\n    key: \"light\",\n    value: function light(t, e) {\n      var a = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : FlowEventNature.MAIN;\n      return new ConanState(Monitors.create(Object.assign({\n        name: t,\n        initialData: e\n      }, a ? {\n        nature: a\n      } : void 0)));\n    }\n  }, {\n    key: \"state\",\n    value: function state(t) {\n      return new ConanState(Monitors.create(t));\n    }\n  }, {\n    key: \"fromThread\",\n    value: function fromThread(t) {\n      var e = Conan.state(t.getDefinition());\n      return t.addReaction({\n        name: \"pipe\",\n        dataConsumer: function dataConsumer(t) {\n          return e.do.update(t);\n        }\n      }), e;\n    }\n  }, {\n    key: \"flow\",\n    value: function flow(t) {\n      var e = new ConanFlow(Flows.create(t));\n      return e.start(), e;\n    }\n  }, {\n    key: \"fromFlow\",\n    value: function fromFlow(t) {\n      return new ConanFlow(t);\n    }\n  }]);\n\n  return Conan;\n}();\n\nvar Lists = /*#__PURE__*/function () {\n  function Lists() {\n    _classCallCheck(this, Lists);\n  }\n\n  _createClass(Lists, null, [{\n    key: \"mergeCombine\",\n    value: function mergeCombine(t, e, a, n) {\n      var r = [],\n          s = !1;\n      return r = e.map(function (e) {\n        var _iterator3 = _createForOfIteratorHelper(t),\n            _step3;\n\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var _r = _step3.value;\n            if (a(_r, e)) return s = !0, n(_r, e);\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n\n        return e;\n      }), s ? r : e;\n    }\n  }]);\n\n  return Lists;\n}();\n\nexports.AsapParser = AsapParser, exports.Asaps = Asaps, exports.Conan = Conan, exports.ConanState = ConanState, exports.ContextStateConnect = ContextStateConnect, exports.ContextStateLive = ContextStateLive, exports.ContextStateMapConnect = ContextStateMapConnect, exports.DiAnnotationsMetadataFactory = DiAnnotationsMetadataFactory, exports.DiContextFactory = DiContextFactory, exports.DynamicOrStatics = DynamicOrStatics, exports.Flows = Flows, exports.InjectByName = InjectByName, exports.InjectByType = InjectByType, exports.InjectDynamic = InjectDynamic, exports.Lists = Lists, exports.LoggerFilters = LoggerFilters, exports.Objects = Objects, exports.ReactStateContext = ReactStateContext, exports.StateConnect = StateConnect, exports.StateLive = StateLive, exports.StateMapConnect = StateMapConnect, exports.contextStateConnect = contextStateConnect, exports.contextStateLive = contextStateLive, exports.contextStateMapConnect = contextStateMapConnect, exports.diAnnotationsCrud = diAnnotationsCrud, exports.getLoggingFilter = getLoggingFilter, exports.isAsap = isAsap, exports.setLoggingFilter = setLoggingFilter, exports.stateConnect = stateConnect, exports.stateLive = stateLive, exports.stateMapConnect = stateMapConnect, exports.updateLoggingFilter = updateLoggingFilter, exports.useConanState = useConanState, exports.useContextConanState = useContextConanState, exports.useFlow = useFlow, exports.useFlowStatus = useFlowStatus;","map":{"version":3,"sources":["/Users/albertoalmansa/Projects/conan-js/tmp/conan-js-examples/orchestratingState/node_modules/conan-js-core/dist/lib/main.min.js"],"names":["Object","defineProperty","exports","value","FlowEventNature","FlowEventSource","FlowEventLevel","FlowEventTiming","RuleType","LOGIC_OPERATOR","React","require","t","TRANSITION","STEP","STATUS","PROCESSING_STATUS","STATE","PROCESSING_STATE","StatusEventType","DynamicOrStatics","e","MAIN","META","HELPER","ASYNC","AUX","ASAP","FLOW_CONTROLLER","FLOW_THREAD","CONTEXT","USER_MSG","FLOW_FACTORY","DEBUG","TRACE","INFO","MILESTONE","WARN","ERROR","CONTINUE","START","END","CANCEL","IN_PROCESS","MONITORING","PROCESSING_REACTIONS","STARTING","ONCE_ON","RUN_IF","RUN","ADDING_REACTION","ERROR_USER_CODE","MONITOR_TRANSACTION","REQUESTING_STATUS","SETTLING_STATUS","STATUS_REQUEST_COMPLETED","REQUESTING_TRANSITION","ROOT_REQUEST","CREATING","USER_REACTIONS","USER_CODE","FlowEventType","Strings","substring","toLowerCase","length","toUpperCase","firstCharToUpperCase","a","n","r","repeat","RuleLikeParser","isRule","BaseRules","if","COMBINED","SIMPLE","OR","AND","BaseRule","negate","baseName","and","inverse","doEvaluate","combineOr","combineAnd","CombinedRule","rules","operator","ruleType","test","map","name","join","SimpleRule","predicate","BasePredicates","compareByReference","isUndefined","isNull","isNullUn","isInitialised","parse","FlowLogger","Rule$","flowController","flowDef","loggingRule","getCurrentStatusName","payload","console","log","padEnd","type","getName","nature","level","timing","shortDesc","LoggerFilters","mainLogName","asyncLogName","metaLogName","trace","initialising","statusName","info","milestone","debug","main","FLOW_LOGGER","CURRENT_LOG_FILTER","rule","default","updateLoggingFilter","setLoggingFilter","getLoggingFilter","Objects","keys","forEach","s","reduce","assign","push","indexOf","deepEquals","Array","isArray","deepEqualsArrays","deepEqualsObjects","DiUtils","firstCharToLowerCase","InjectableType","DYNAMIC","NAME","TYPE","MetadataCrudUtils","spaceName","defaultProvider","getOrCreateMetadata","Error","getPrototype","$a","extractName","getAnnotationsMetaData","assignMetaDataToConstructor","prototype","getPrototypeOf","constructor","diAnnotationsCrud","diAnnotations","InjectByType","updateMetadata","onConstructorParamIndex","injectable","cascadeProperties","InjectDynamic","InjectByName","STRIP_COMMENTS","ARGUMENT_NAMES","Functions","toString","replace","slice","match","DiAnnotationsMetadataFactory","beanName","extractArgNames","propsProvider","dependencyName","argumentNames","diParams","DiRuntime","diInvocationResolver","diInvocationBuilderFactory","root","withTransitiveBeans","build","resolve","result","withProperties","PROPS_PROPERTY_NAME","DiInvocationResolver","diInvocationFactory","diCache","diEnricher","causesCircularDependency","circularDependencyEndOf","diMetadata","pendingDependencies","doCreate","inProcessDiInvocations","invokeChildren","addValueToKeyValuePairs","addValuesToKeyValuePairs","resolveParamDef","invokeChild","resolveChildProps","resolveChildByType","resolveDynamicChild","resolveChildByName","properties","childrenOf","transitiveBeans","invoke","DiInvocationBuilderFactory","diAnnotationsMetadataFactory","DiInvocationBuilder","withInProcessDiInvocations","DiInvocationFactory","_constructor","create","KeyValueCache","cache","DiRuntimeFactory","DI_INVOCATION_RESOLVER_PROVIDER","DI_INVOCATION_BUILDER_FACTORY","cacheTBR","DiContextFactory","i","IDLE","ASYNC_START","ASYNC_FULFILLED","ASYNC_CANCELLED","MonitorStatus","ReactStateContext","createContext","StateMapConnect","_isMounted","lastMonitorInfo","lastState","props","into","_mainDataReactionLock","from","addDataReaction","dataConsumer","mapper","actions","setState","state","_asyncDataReactionLock","addAsyncReaction","fallbackValue","release","createElement","Provider","Component","StateConnect","data","monitorInfo","status","stateConnect","stateMapConnect","useFlow","useEffect","reactOnStatusChanged","useFlowStatus","alwaysOn","getData","useConanState","useState","children","useContextConanState","useContext","ContextStateMapConnect","Consumer","ContextStateConnect","contextStateConnect","contextStateMapConnect","ContextStateLive","renderer","StateLive","Fragment","contextStateLive","stateLive","ReactionType","BindBackType","ONCE","ALWAYS","ThreadImpl","flow","def","start","onceOn","stop","chainInto","action","deferInto","reactionType","addReaction","removeReaction","getStatusData","nextData","getEvents","changeLoggingNature","createRuntimeTracker","addReactionNext","on","isRunning","steps","StatusLikeParser","FlowRequest","flowThread","id","isStep","queuedReactions","queuedTransitions","queuedSteps","queuedStatuses","queuedStates","started","processingStatus","processStateAndReactions","flagAsSettled","onStateRequestCompleted","FlowThread","flowOrchestrator","flowEvents","ids","requestStack","assertValidStatus","currentRequest","queueState","queueStatus","getNextId","statusRequest","end","transitionName","queueStep","queueTransition","transitionRequest","onTransitionRequested","requestTransition","requestStatus","queueReaction","addTransition","addProcessingStatus","processReactions","settleProcessingStatus","o","continue","u","withLevel","requestState","requestStep","pop","getState","bind","do","transitions","chain","interruptFlow","currentStatus","getStatusDefs","FlowEventsTracker","eventsByStatus","events","reducerName","newData","reducerPayload","fromStatus","intoStatus","transitionPayload","lastEvent","process","addStateFromStatus","allEvents","event","serializeWithStatusInfo","eventTypes","excludeInit","$init","excludeStop","$stop","statuses","FlowAnchor","currentThread","getLastStates","getLastState","methodName","Proxyfier","getOwnPropertyNames","MutatorsFactory","$update","$toStatus","createSteps","createDefaultStepsDef","createDefaultTransitionDef","doCreateTransitions","doCreateSteps","getDataFn","bindToAnchor","getStatusDataProducerFn","proxy","bindBack","$INIT","$STOP","ReactionDefLikeParser","FlowDefFactory","statusesByName","createDefaultSteps","createTransitions","reactions","$onInit","$onStop","statusesByStatusName","hasOwnProperty","starter","initialStatus","foreachEntry","getLastData","FlowRuntimeTracker","orchestrator","doTick","source","onRuntimeEvent","FlowOrchestrator","eventsProcessor","isPromise","then","isAsap","NowImpl","LaterImpl","NOW","LATER","AsapType","rawValue","Asaps","now","next","onCancel","cancel","assertOn","error","catch","ProxyThen","baseAsap","beforeThen","afterThen","proxyThen","AsapParser","fromPromise","Flows","createController","resolving","resolved","errored","cancelled","Promise","setTimeout","fetch","json","deferParser","FlowImpl","flowAnchor","createNewThread","getCurrentEvents","tryToQueue","runIf","getCurrentState","filter","getReactions","doRun","asap","Threads","FlowFacadeImpl","onceOnInit","onceOnStop","onInit","getDefinition","toState","toStateAll","FlowOrchestrator$","createFacade","pipelineListener","ThreadFacade","thread","once","monitor","reducers","MethodFinder","find","startsWith","initialData","autoBind","exists","updateAsap","cancelAutoStart","PipeImpl","pipeConnector","pipeThreadDef","baseThread","Pipes","merge","asyncThread","mainThread","update","MonitorFacade","transaction","openTransaction","closeTransaction","metaFlow","MetaStatus","INIT","RUNNING","IDLE_ON_TRANSACTION","ConanFlow","Conan","light","MonitorImpl","currentTransaction","tupleCombine","MetaMutatorsFactory","toIdle","transactionCount","lastError","toInit","toRunning","toError","$onTransaction","Monitors","createAsyncThread","createMetaFlow","orchestrate","starting","init","running","idle","idleOnTransaction","tick","currentAction","inProgressActions","unTick","ConanState","fromMonitor","fromThread","fromFlow","combine","mapKeys","Lists"],"mappings":"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","sourcesContent":["\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var FlowEventNature,FlowEventSource,FlowEventLevel,FlowEventTiming,RuleType,LOGIC_OPERATOR,React=require(\"react\");!function(t){t.TRANSITION=\"TRANSITION\",t.STEP=\"STEP\",t.STATUS=\"STATUS\",t.PROCESSING_STATUS=\"PROCESSING_STATUS\",t.STATE=\"STATE\",t.PROCESSING_STATE=\"PROCESSING_STATE\"}(exports.StatusEventType||(exports.StatusEventType={}));class DynamicOrStatics{static result(t,e){return\"function\"==typeof t?t(e):t}}!function(t){t.MAIN=\"MAIN\",t.META=\"META\",t.HELPER=\"HELPER\",t.ASYNC=\"ASYNC\",t.AUX=\"AUX\",t.ASAP=\"ASAP\"}(FlowEventNature||(FlowEventNature={})),function(t){t.FLOW_CONTROLLER=\"FLOW_CONTROLLER\",t.FLOW_THREAD=\"FLOW_THREAD\",t.CONTEXT=\"CONTEXT\",t.USER_MSG=\"USER_MSG\",t.FLOW_FACTORY=\"FLOW_FACTORY\"}(FlowEventSource||(FlowEventSource={})),function(t){t.DEBUG=\"DEBUG\",t.TRACE=\"TRACE\",t.INFO=\"INFO\",t.MILESTONE=\"MILESTONE\",t.WARN=\"WARN\",t.ERROR=\"ERROR\"}(FlowEventLevel||(FlowEventLevel={})),function(t){t.CONTINUE=\"CONTINUE\",t.START=\"START\",t.END=\"END\",t.CANCEL=\"CANCEL\",t.IN_PROCESS=\"IN_PROCESS\"}(FlowEventTiming||(FlowEventTiming={})),function(t){t.MONITORING=\"MONITORING\",t.PROCESSING_REACTIONS=\"PROCESSING_REACTIONS\",t.STARTING=\"STARTING\",t.ONCE_ON=\"ONCE_ON\",t.RUN_IF=\"RUN_IF\",t.RUN=\"RUN\",t.ADDING_REACTION=\"ADDING_REACTION\",t.ERROR_USER_CODE=\"ERROR_USER_CODE\",t.MONITOR_TRANSACTION=\"MONITOR_TRANSACTION\",t.REQUESTING_STATUS=\"REQUESTING_STATUS\",t.SETTLING_STATUS=\"SETTLING_STATUS\",t.PROCESSING_STATUS=\"PROCESSING_STATUS\",t.STATUS_REQUEST_COMPLETED=\"STATUS_REQUEST_COMPLETED\",t.REQUESTING_TRANSITION=\"REQUESTING_TRANSITION\",t.ROOT_REQUEST=\"ROOT_REQUEST\",t.CREATING=\"CREATING\",t.USER_REACTIONS=\"USER_REACTIONS\",t.USER_CODE=\"USER_CODE\"}(exports.FlowEventType||(exports.FlowEventType={}));class Strings{static firstCharToLowerCase(t){return t.substring(0,1).toLowerCase()+t.substring(1,t.length)}static firstCharToUpperCase(t){return t.substring(0,1).toUpperCase()+t.substring(1,t.length)}static camelCaseWithPrefix(t,e){return t+this.firstCharToUpperCase(e)}static repeat(t,e){let a=\"\";for(let n=0;n<e;n++)a+=t;return a}static padEnd(t,e){if(null==t)return t;let a=e-t.length;if(a<1){let a=\"...\",n=1,r=n+(t.length+a.length-e);return t.substring(0,n)+a+t.substring(r,t.length)}return t+\" \".repeat(a)}}class RuleLikeParser{static parse(t){return RuleLikeParser.isRule(t)?t:BaseRules.if(\"-anonymous-\",t)}static isRule(t){return\"test\"in t}}!function(t){t.COMBINED=\"COMBINED\",t.SIMPLE=\"SIMPLE\"}(RuleType||(RuleType={})),function(t){t.OR=\"OR\",t.AND=\"AND\"}(LOGIC_OPERATOR||(LOGIC_OPERATOR={}));class BaseRule{constructor(t=!1,e){this.negate=t,this.baseName=e}split(t){return[this.and(t),this.and(t.inverse())]}test(t){let e=this.doEvaluate(t);return!0===this.negate?!e:e}or(t){return BaseRules.combineOr(\"OR\",this,t)}and(t){return BaseRules.combineAnd(\"AND\",this,t)}get name(){return`${!0===this.negate?\"!\":\"\"}${this.baseName}`}}class CombinedRule extends BaseRule{constructor(t,e,a,n=!1){super(n,t),this.rules=e,this.operator=a,this.ruleType=RuleType.COMBINED}doEvaluate(t){for(let e of this.rules){let a=e.test(t);if(!0===a&&this.operator===LOGIC_OPERATOR.OR)return!0;if(!1===a&&this.operator===LOGIC_OPERATOR.AND)return!1}return this.operator===LOGIC_OPERATOR.AND}inverse(){let t=!this.negate;return new CombinedRule(this.baseName,this.rules,this.operator,t)}get name(){return`${!0===this.negate?\"!\":\"\"}${this.baseName}=[${this.rules.map(t=>t.name).join(\",\")}]`}}class SimpleRule extends BaseRule{constructor(t,e,a=!1){super(a,t),this.predicate=e,this.ruleType=RuleType.SIMPLE}inverse(){let t=!this.negate;return new SimpleRule(this.baseName,this.predicate,t)}doEvaluate(t){return this.predicate(t)}}class BasePredicates{static isUndefined(){return BasePredicates.compareByReference(void 0)}static isNull(){return BasePredicates.compareByReference(null)}static isNullUn(){return t=>null==t}static compareByReference(t){return e=>e===t}static isInitialised(){return t=>null!=t}}class BaseRules{static if(t,e){return new SimpleRule(t,e)}static ifNot(t,e){return new SimpleRule(t,e,!0)}static ifUndefined(){return BaseRules.if(\"ifUndefined\",BasePredicates.isUndefined())}static ifNull(){return BaseRules.if(\"ifNull\",BasePredicates.isNull())}static ifNullUn(){return BaseRules.if(\"ifNullUn\",BasePredicates.isNullUn())}static ifInitialised(){return BaseRules.if(\"ifInitialised\",BasePredicates.isInitialised())}static compareByReference(t,e){return BaseRules.if(t,BasePredicates.compareByReference(e))}static combineAnd(t,...e){let a=e.map(RuleLikeParser.parse);return new CombinedRule(t,a,LOGIC_OPERATOR.AND)}static combineOr(t,...e){return new CombinedRule(t,e.map(RuleLikeParser.parse),LOGIC_OPERATOR.OR)}static join(t,e){return BaseRules.if(`join{${e.name}`,a=>{let n=t(a);return e.test(n)})}}class FlowLogger{constructor(t){this.Rule$=t}log(t){if(!this.Rule$().test(t)){let e=t.flowController.flowDef.loggingRule;if(!e)return!1;if(!e.test(t))return!1}let e=t.flowController.getCurrentStatusName();return e=e||\"<stopped>\",null!=t.payload?(console.log(Strings.padEnd(`${t.type}`,30),Strings.padEnd(`${t.flowController.getName()}`,50),Strings.padEnd(`${e}`,30),Strings.padEnd(`${t.nature}`,10),Strings.padEnd(`${t.level}`,10),Strings.padEnd(`${t.timing}`,12)),null==t.payload&&null==t.shortDesc||(null!=t.shortDesc&&null!=t.payload?(console.log(`  =>${t.shortDesc}`),console.log(\" \",t.payload)):null!=t.shortDesc&&null!=!t.payload?console.log(`  =>${t.shortDesc}`):console.log(`  =>${t.payload}`)),console.log(\"------------------------------------------------------------------------------------------------------------------------------------------------\")):null!=t.shortDesc&&(console.log(Strings.padEnd(`${t.type}`,30),Strings.padEnd(`${t.flowController.getName()}`,50),Strings.padEnd(`${e}`,30),Strings.padEnd(`${t.level}`,10),Strings.padEnd(`${t.nature}`,10),Strings.padEnd(`${t.timing}`,10)),console.log(`  =>${t.shortDesc}`)),!0}}class LoggerFilters{static trace(){return BaseRules.if(\"ifTrace\",t=>t.level===FlowEventLevel.TRACE)}static debug(){return BaseRules.if(\"ifDebug\",t=>t.level===FlowEventLevel.DEBUG)}static milestone(){return BaseRules.if(\"ifMilestone\",t=>t.level===FlowEventLevel.MILESTONE)}static info(){return BaseRules.if(\"ifInfo\",t=>t.level===FlowEventLevel.INFO)}static logName(t){return BaseRules.combineOr(`main/async/meta[${t}]`,LoggerFilters.mainLogName(t),LoggerFilters.asyncLogName(t),LoggerFilters.metaLogName(t))}static mainLogName(t){return BaseRules.if(`ifLogName={${t}`,e=>e.flowController.getName()===t)}static asyncLogName(t){return BaseRules.if(`ifLogName={${t}`,e=>e.flowController.getName()===`${t}=>[async]`)}static metaLogName(t){return BaseRules.if(`ifLogName={${t}`,e=>e.flowController.getName()===`${t}=>[meta]`)}static eventType(t){return BaseRules.combineAnd(`eventType[${t}]`,LoggerFilters.trace().inverse(),BaseRules.if(`ifEventType={${t}`,e=>e.type===t))}static statusName(t){return BaseRules.if(`ifStatusName={${t}`,e=>e.flowController.getCurrentStatusName()===t)}static notInitialising(){return LoggerFilters.initialising().inverse()}static initialising(){return LoggerFilters.statusName(\"$init\")}static nextData(){return LoggerFilters.statusName(\"nextData\")}static aux(){return BaseRules.if(\"ifAux\",t=>t.nature===FlowEventNature.AUX)}static async(){return BaseRules.if(\"ifAsync\",t=>t.nature===FlowEventNature.ASYNC)}static helper(){return BaseRules.if(\"ifHelper\",t=>t.nature===FlowEventNature.HELPER)}static main(){return BaseRules.if(\"ifMain\",t=>t.nature===FlowEventNature.MAIN)}static all(){return BaseRules.if(\"all\",()=>!0)}static fromInfo(){return BaseRules.combineOr(\"info and milestone\",LoggerFilters.info(),LoggerFilters.milestone())}static allExceptTraces(){return BaseRules.combineOr(\"all except traces\",LoggerFilters.debug(),LoggerFilters.info(),LoggerFilters.milestone())}static never(){return BaseRules.if(\"never\",()=>!1)}static default(){return BaseRules.combineAnd(\"default filter\",LoggerFilters.milestone(),LoggerFilters.main(),LoggerFilters.initialising().inverse())}}const FLOW_LOGGER=new FlowLogger(()=>CURRENT_LOG_FILTER.rule),CURRENT_LOG_FILTER={rule:LoggerFilters.default()},updateLoggingFilter=t=>{let e=t(CURRENT_LOG_FILTER.rule);return CURRENT_LOG_FILTER.rule=e,e},setLoggingFilter=t=>{CURRENT_LOG_FILTER.rule=t},getLoggingFilter=()=>CURRENT_LOG_FILTER.rule;class Objects{static mapKeys(t,e,a){let n={};return Object.keys(t).forEach(r=>{let s=a?a(r):r;n[s]=e(t[r])}),n}static foreachEntry(t,e){Object.keys(t).forEach(a=>{e(t[a],a)})}static keyfy(t,e){return t.reduce((t,a)=>Object.assign(Object.assign({},t),{[e(a)]:a}),{})}static navigate(t,e){let a=[],n=t;for(;n;)null!==(n=e(n))&&a.push(n);return a}static deepEqualsArrays(t,e){if(t.length!==e.length)return!1;for(let a of t)if(-1===e.indexOf(a))return!1;return!0}static deepEqualsObjects(t,e){for(let a of Object.keys(t))if(!Objects.deepEquals(t[a],e[a]))return!1;return!0}static deepEquals(t,e){return null==t&&null==e||(null!=t||null==e)&&((null==t||null!=e)&&(\"string\"==typeof t&&\"string\"==typeof e?t===e:\"number\"==typeof t&&\"number\"==typeof e?t===e:\"function\"==typeof t&&\"function\"==typeof e?t===e:\"boolean\"==typeof t&&\"boolean\"==typeof e?t===e:void 0===t&&void 0===e?t===e:Array.isArray(t)&&Array.isArray(e)?Objects.deepEqualsArrays(t,e):!(Array.isArray(t)&&!Array.isArray(e))&&(!(!Array.isArray(t)&&Array.isArray(e))&&(\"object\"==typeof t&&\"object\"==typeof e?Objects.deepEqualsObjects(t,e):t===e))))}}class DiUtils{static beanName(t){return Strings.firstCharToLowerCase(t.name)}}var InjectableType;!function(t){t.DYNAMIC=\"dynamic\",t.NAME=\"name\",t.TYPE=\"type\"}(InjectableType||(InjectableType={}));class MetadataCrudUtils{constructor(t,e){this.spaceName=t,this.defaultProvider=e}updateMetadata(t,e){let a=this.getOrCreateMetadata(t);if(null==a)throw Error(\"can't get or create metaData\");return e(a),a}assignMetaDataToConstructor(t,e){let a=this.getPrototype(t);null==a.$a&&(a.$a={}),null==a.$a[this.spaceName]&&(a.$a[this.spaceName]={});let n=MetadataCrudUtils.extractName(t);a.$a[this.spaceName][n]=e}getAnnotationsMetaData(t){let e=t;e.$a||(e=this.getPrototype(t));let a=e.$a;if(null==a)return null;let n=a[this.spaceName];return null==n?null:n[MetadataCrudUtils.extractName(t)]}getOrCreateMetadata(t){if(null==this.getAnnotationsMetaData(t)){let e=this.defaultProvider();this.assignMetaDataToConstructor(t,e)}return this.getAnnotationsMetaData(t)}getPrototype(t){return\"object\"==typeof t?t:\"object\"==typeof t.prototype?t.prototype:this.getPrototype(Object.getPrototypeOf(t))}static extractName(t){let e=t.name;return null==e&&(e=t.constructor.name),e.substring(0,1).toLowerCase()+e.substring(1,e.length)}}let diAnnotationsCrud=new MetadataCrudUtils(\"$di\",()=>({diAnnotations:[]}));function InjectByType(t,e){return(a,n,r)=>{diAnnotationsCrud.updateMetadata(a,a=>a.diAnnotations.push({onConstructorParamIndex:r,injectable:t,type:InjectableType.TYPE,cascadeProperties:e}))}}function InjectDynamic(t,e){return(a,n,r)=>{diAnnotationsCrud.updateMetadata(a,a=>a.diAnnotations.push({onConstructorParamIndex:r,injectable:t,type:InjectableType.DYNAMIC,cascadeProperties:e}))}}function InjectByName(t,e){return console.log(\"Inject by name\",t),(a,n,r)=>{diAnnotationsCrud.updateMetadata(a,a=>a.diAnnotations.push({onConstructorParamIndex:r,injectable:t,type:InjectableType.NAME,cascadeProperties:e}))}}const STRIP_COMMENTS=/((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/gm,ARGUMENT_NAMES=/([^\\s,]+)/g;class Functions{static extractArgNames(t){if(0===t.length)return[];let e=t.toString().replace(STRIP_COMMENTS,\"\"),a=e.slice(e.indexOf(\"(\")+1,e.indexOf(\")\")).match(ARGUMENT_NAMES);return null===a&&(a=[]),a}}class DiAnnotationsMetadataFactory{create(t){let e=DiUtils.beanName(t),a=Functions.extractArgNames(t),n={},r=diAnnotationsCrud.getAnnotationsMetaData(t);return r&&r.diAnnotations.forEach(t=>{let e=a[t.onConstructorParamIndex];n[e]={name:e,type:t.type,payload:t.injectable,propsProvider:t.cascadeProperties}}),{dependencyName:e,argumentNames:a,diParams:n,constructor:t}}}class DiRuntime{constructor(t,e){this.diInvocationResolver=t,this.diInvocationBuilderFactory=e}invoke(t,e,a){if(\"object\"==typeof t)return t;let n=this.diInvocationBuilderFactory.root(t).if(null!=e,t=>t.withTransitiveBeans(e)).build(),r=this.diInvocationResolver.resolve(n,a,this).result;if(null==r)throw Error(\"Can't invoke\");return r}invokeWithProps(t,e,a,n){let r=this.diInvocationBuilderFactory.root(t).withProperties(e).if(null!=a,t=>t.withTransitiveBeans(a)).build(),s=this.diInvocationResolver.resolve(r,n,this).result;if(null==s)throw Error(\"Can't invoke\");return s}}DiRuntime.PROPS_PROPERTY_NAME=\"$props\";class DiInvocationResolver{constructor(t,e,a){this.diInvocationFactory=t,this.diCache=e,this.diEnricher=a}resolve(t,e,a){if(this.causesCircularDependency(t))return{circularDependencyEndOf:t.diMetadata.dependencyName,result:null,pendingDependencies:{}};let n=null,r=this.diCache.resolve(t.diMetadata.dependencyName,()=>(n=this.doCreate(t,e,a),this.diEnricher&&(n.result=this.diEnricher(t.diMetadata,n.result)),Object.keys(n.pendingDependencies).indexOf(t.diMetadata.dependencyName)>-1&&n.pendingDependencies[t.diMetadata.dependencyName].forEach(e=>{this.diCache.resolve(e,null)[t.diMetadata.dependencyName]=n.result}),n.result));return null==n?{result:r,pendingDependencies:{}}:n}causesCircularDependency(t){return t.inProcessDiInvocations.indexOf(t.diMetadata.dependencyName)>-1}doCreate(t,e,a){const n=(t,e)=>{let a=t.diMetadata.constructor;return a.prototype&&a.prototype.constructor.name?e?new a(...e):new a:e?a(...e):a()};if(0===t.diMetadata.argumentNames.length){return{result:n(t,void 0),pendingDependencies:{}}}let r=[],s={};return this.invokeChildren(t,e,a).forEach(e=>{r.push(e.result),null!=e.circularDependencyEndOf&&DiInvocationResolver.addValueToKeyValuePairs(s,e.circularDependencyEndOf,t.diMetadata.dependencyName),e.pendingDependencies&&Object.keys(e.pendingDependencies).forEach(t=>{DiInvocationResolver.addValuesToKeyValuePairs(s,t,e.pendingDependencies[t])})}),{result:n(t,r),pendingDependencies:s}}static addValueToKeyValuePairs(t,e,a){t[e]||(t[e]=[]),t[e].indexOf(a)>-1||t[e].push(a)}static addValuesToKeyValuePairs(t,e,a){t[e]?a.forEach(a=>DiInvocationResolver.addValueToKeyValuePairs(t,e,a)):t[e]=a}invokeChildren(t,e,a){let n=[];return t.diMetadata.argumentNames.forEach(r=>{let s=this.resolveParamDef(t,r);n.push(this.invokeChild(t,s,e,a))}),n}resolveParamDef(t,e){let a=t.diMetadata.diParams[e];return null==a?{name:e,propsProvider:null,payload:e,type:InjectableType.NAME}:a}invokeChild(t,e,a,n){return e.name===DiRuntime.PROPS_PROPERTY_NAME?this.resolveChildProps(t):e.type===InjectableType.TYPE?this.resolveChildByType(t,e,a,n):e.type===InjectableType.DYNAMIC?this.resolveDynamicChild(t,e,a,n):this.resolveChildByName(t,e,a,n)}resolveChildProps(t){if(null==t.properties)throw Error(\"can't resolve properties for $props - There are no properties passed to the beanRuntime\");return{result:t.properties,pendingDependencies:{}}}resolveChildByType(t,e,a,n){return this.resolve(this.diInvocationFactory.childrenOf(t,e.payload,e.propsProvider),a,n)}resolveDynamicChild(t,e,a,n){return this.resolveChildByType(t,{payload:e.payload(),type:InjectableType.TYPE,propsProvider:e.propsProvider,name:e.name},a,n)}resolveChildByName(t,e,a,n){let r=e.payload;if(null==t.transitiveBeans||null==t.transitiveBeans[r]){if(null!=a[r]){return{result:n.invoke(a[r],t.transitiveBeans,a),pendingDependencies:{}}}throw Error(`can't resolve param '${r}' - There are no transitive beans passed into the runtime`)}return{result:t.transitiveBeans[r],pendingDependencies:{}}}}class DiInvocationBuilderFactory{constructor(t){this.diAnnotationsMetadataFactory=t}childrenOf(t,e,a){let n=t.inProcessDiInvocations.slice(0);return n.push(t.diMetadata.dependencyName),new DiInvocationBuilder(this.diAnnotationsMetadataFactory,e).withInProcessDiInvocations(n).withTransitiveBeans(t.transitiveBeans).if(null!=a,t=>t.withProperties(a()))}root(t){return new DiInvocationBuilder(this.diAnnotationsMetadataFactory,t)}}class DiInvocationFactory{constructor(t){this.diInvocationBuilderFactory=t}childrenOf(t,e,a){return this.diInvocationBuilderFactory.childrenOf(t,e,a).build()}}class DiInvocationBuilder{constructor(t,e){this.diAnnotationsMetadataFactory=t,this._constructor=e,this.inProcessDiInvocations=[],this.transitiveBeans={},this.properties=null}if(t,e){return t&&e(this),this}withInProcessDiInvocations(t){return this.inProcessDiInvocations=t,this}withTransitiveBeans(t){return this.transitiveBeans=t,this}withProperties(t){return this.properties=t,this}build(){return{diMetadata:this.diAnnotationsMetadataFactory.create(this._constructor),inProcessDiInvocations:this.inProcessDiInvocations,transitiveBeans:this.transitiveBeans,properties:this.properties}}}class KeyValueCache{constructor(){this.cache={}}resolve(t,e){if(this.cache[t])return this.cache[t];if(null==e)throw Error(\"Can't resolve cache\");let a=e();return this.cache[t]=a,a}}class DiRuntimeFactory{static create(t){return new DiRuntime(DiRuntimeFactory.DI_INVOCATION_RESOLVER_PROVIDER(new KeyValueCache,t||null),DiRuntimeFactory.DI_INVOCATION_BUILDER_FACTORY)}}DiRuntimeFactory.DI_INVOCATION_BUILDER_FACTORY=new DiInvocationBuilderFactory(new DiAnnotationsMetadataFactory),DiRuntimeFactory.cacheTBR=(()=>new KeyValueCache),DiRuntimeFactory.DI_INVOCATION_RESOLVER_PROVIDER=((t,e)=>new DiInvocationResolver(new DiInvocationFactory(DiRuntimeFactory.DI_INVOCATION_BUILDER_FACTORY),DiRuntimeFactory.cacheTBR(),e));class DiContextFactory{static createContext(t,e){let a,n=DiRuntimeFactory.create(),r=Object.assign(Object.assign({},t),e);a=e?[...Object.keys(t),...Object.keys(e)]:Object.keys(t);let s={},i=Object.assign(Object.assign({},t),e);return a.forEach(t=>{let e=r[t];s[t]=n.invoke(e,s,i)}),s}}!function(t){t.IDLE=\"IDLE\",t.ASYNC_START=\"ASYNC_START\",t.ASYNC_FULFILLED=\"ASYNC_FULFILLED\",t.ASYNC_CANCELLED=\"ASYNC_CANCELLED\"}(exports.MonitorStatus||(exports.MonitorStatus={}));const ReactStateContext=React.createContext(null);class StateMapConnect extends React.Component{constructor(t){super(t),this._isMounted=!1,this.lastMonitorInfo=void 0,this.lastState=void 0;let e=!0,a=this.props.into.prototype?this.props.into.prototype:this.props.into.name;this._mainDataReactionLock=this.props.from.addDataReaction({name:`connect | ${a}`,dataConsumer:t=>{this.lastState=t;let a=this.props.mapper(t,Object.assign({},this.props.from.actions),this.lastMonitorInfo);this._isMounted?this.setState(a):(e=!1,this.state=a)}}),this._asyncDataReactionLock=this.props.from.addAsyncReaction({name:`connect monitor| ${a}`,dataConsumer:t=>{this.lastMonitorInfo=t;let a=this.props.mapper(this.lastState,Object.assign({},this.props.from.actions),t);this._isMounted?this.setState(a):(e=!1,this.state=a)}}),e&&this.props.fallbackValue&&(this.state=this.props.fallbackValue(this.props.from.actions))}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1,this._mainDataReactionLock.release(),this._asyncDataReactionLock&&this._asyncDataReactionLock.release()}render(){let t=this.props.into;return React.createElement(ReactStateContext.Provider,{value:this.props.from},React.createElement(t,Object.assign({},this.state)))}}const StateConnect=t=>React.createElement(StateMapConnect,{mapper:(t,e,a)=>({data:t,actions:e,monitorInfo:a}),into:t.into,from:t.from,fallbackValue:e=>({data:t.fallbackValue,actions:e,monitorInfo:{status:exports.MonitorStatus.IDLE}})}),stateConnect=(t,e,a)=>React.createElement(StateConnect,{from:t,into:e,fallbackValue:a}),stateMapConnect=(t,e,a,n)=>React.createElement(StateMapConnect,{from:t,into:e,fallbackValue:n,mapper:a});function useFlow(t,e,a){React.useEffect(()=>{t.reactOnStatusChanged(t=>{e(e=>a?a(t,e):t.name)})},[])}function useFlowStatus(t,e,a,n){React.useEffect(()=>{t.alwaysOn(e,t=>{a(e=>n?n(t.getData(),e):t.getData())})},[])}function useConanState(t,e){let a=t.getData();const[n,r]=React.useState(null==a?e:a);return React.useEffect(()=>{const e=t.addDataReaction({dataConsumer:r,name:`useConanState[${t.getName()}]`});return()=>e.release()},[]),[n,t.actions,({children:e})=>React.createElement(ReactStateContext.Provider,{value:t},e)]}function useContextConanState(){let t=useConanState(React.useContext(ReactStateContext));return[t[0],t[1]]}class ContextStateMapConnect extends React.Component{render(){return React.createElement(ReactStateContext.Consumer,null,t=>{if(null==t)throw new Error(\"trying to access the state from the context, but it was not found, did you specify the state up in the rendering tree?\");return React.createElement(StateMapConnect,{from:t,into:this.props.into,mapper:this.props.mapper,fallbackValue:this.props.fallbackValue})})}}class ContextStateConnect extends React.Component{render(){return React.createElement(ReactStateContext.Consumer,null,t=>{if(null==t)throw new Error(\"trying to access the state from the context, but it was not found, did you specify the state up in the rendering tree?\");return React.createElement(StateConnect,{from:t,into:this.props.into,fallbackValue:this.props.fallbackValue})})}}const contextStateConnect=(t,e)=>React.createElement(ContextStateConnect,{into:t,fallbackValue:e}),contextStateMapConnect=(t,e,a)=>React.createElement(ContextStateMapConnect,{into:t,fallbackValue:a,mapper:e}),ContextStateLive=t=>{return React.createElement(ContextStateConnect,{into:e=>t.renderer(e.data,e.actions),fallbackValue:t.fallbackValue})},StateLive=t=>{return React.createElement(StateConnect,{from:t.from,into:e=>{let a=t.renderer(e.data,e.actions);return Array.isArray(a)?React.createElement(React.Fragment,null,a):a},fallbackValue:t.fallbackValue})},contextStateLive=(t,e)=>{return React.createElement(ContextStateConnect,{into:e=>{let a=t(e.data,e.actions);return Array.isArray(a)?React.createElement(React.Fragment,null,a):a},fallbackValue:e})},stateLive=(t,e,a)=>{return React.createElement(StateConnect,{from:t,into:t=>{let a=e(t.data,t.actions);return Array.isArray(a)?React.createElement(React.Fragment,null,a):a},fallbackValue:a})};var ReactionType,BindBackType;!function(t){t.ONCE=\"ONCE\",t.ALWAYS=\"ALWAYS\"}(ReactionType||(ReactionType={}));class ThreadImpl{constructor(t,e){this.flow=t,this.def=e}start(t){return this.flow.start(t?{name:\"nextData\",data:t}:void 0),this}next(t){this.flow.onceOn(\"nextData\",t)}stop(t){this.flow.stop(t)}chain(t,e){return this.flow.chainInto(\"nextData\",\"nextData\",t,e).map(t=>t.getData())}monitor(t,e,a,n){let r=t.map(t=>a=>e(t,a)),s={payload:n,name:null==a?\"anonymous\":a,action:r};return this.flow.deferInto(\"nextData\",\"nextData\",s).map(t=>t.getData())}get isRunning(){return this.flow.isRunning}get reducers(){return this.flow.on(\"nextData\").steps}addReaction(t){let e={name:t.name,reactionType:ReactionType.ALWAYS,action:e=>t.dataConsumer(e.getData())};return this.flow.addReaction(\"nextData\",e),{release:()=>{this.flow.removeReaction(\"nextData\",e)}}}getData(){return this.flow.getStatusData().nextData}getEvents(){return this.flow.getEvents()}getName(){return this.flow.getName()}changeLoggingNature(t){this.flow.changeLoggingNature(t)}log(t){this.flow.log(t)}once(t,e){return this.flow.onceOn(\"nextData\",e=>t(e.getData()),e),this}createRuntimeTracker(t,e){return this.flow.createRuntimeTracker(t,e)}addReactionNext(t){return this.flow.addReactionNext(this.flow.on(\"nextData\"),{name:t.name,reactionType:ReactionType.ALWAYS,action:e=>t.dataConsumer(e.getData())}),this}getDefinition(){return this.def}}class StatusLikeParser{static parse(t){return\"string\"==typeof t?{name:t}:t}}class FlowRequest{constructor(t,e,a,n){this.flowThread=t,this.id=e,this.status=a,this.isStep=n,this.queuedReactions=[],this.queuedTransitions=[],this.queuedSteps=[],this.queuedStatuses=[],this.queuedStates=[],this.started=!1,this.processingStatus={id:this.id,status:this.status}}static statusRequest(t,e,a,n){return new FlowRequest(t,e,a,n)}static transitionRequest(t,e,a,n){return new FlowRequest(t,e,StatusLikeParser.parse(a.into),n)}start(){if(this.started)throw new Error(\"unexpected\");this.started=!0,this.flowThread.processStateAndReactions(this.processingStatus,this.isStep),this.flowThread.flagAsSettled(this.processingStatus,this.isStep),this.flowThread.onStateRequestCompleted(this,this.queuedReactions,this.queuedStatuses,this.queuedStates,this.queuedTransitions,this.queuedSteps)}queueStatus(t){this.queuedStatuses.push(t)}queueTransition(t){return this.queuedTransitions.push(t),this}queueStep(t){return this.queuedSteps.push(t),this}queueState(t){this.queuedStates.push(t)}queueReaction(t,e){this.queuedReactions.push([t,e])}}class FlowThread{constructor(t,e,a){this.flowController=t,this.flowOrchestrator=e,this.flowEvents=a,this.ids={},this.requestStack=[]}requestStatus(t,e){let a=StatusLikeParser.parse(t),n=this.flowOrchestrator.createRuntimeTracker(this.flowController,FlowEventSource.FLOW_THREAD,exports.FlowEventType.REQUESTING_STATUS,t).start(`${a.name}`);if(this.assertValidStatus(a.name),null!=this.currentRequest)return void(e?(n.debug(`queueing state [${a.name}]`),this.currentRequest.queueState(a)):(n.debug(`queueing status [${a.name}]`),this.currentRequest.queueStatus(a)));let r=this.getNextId(a);this.currentRequest=FlowRequest.statusRequest(this,r+\"\",a,e),this.currentRequest.start(),n.end()}requestTransition(t,e){let a=StatusLikeParser.parse(t.into).name,n=this.flowOrchestrator.createRuntimeTracker(this.flowController,FlowEventSource.FLOW_THREAD,exports.FlowEventType.REQUESTING_TRANSITION,t).start(`${t.transitionName}`);if(n.info(e?\"step\":\"transition\",[t.transitionName,t.payload]),this.assertValidStatus(a),null!=this.currentRequest)return void(e?(n.debug(`queueing step [${t.transitionName}]`),this.currentRequest.queueStep(t)):(n.debug(`queueing transition [${t.transitionName}]`),this.currentRequest.queueTransition(t)));let r=this.getNextId(StatusLikeParser.parse(t.into));this.currentRequest=FlowRequest.transitionRequest(this,r+\"\",t,e),this.onTransitionRequested(t,e),this.currentRequest.start(),n.end()}requestStep(t,e,a,n){this.assertValidStatus(t);let r=this.getCurrentStatusName();if(r!==t)throw new Error(`car't request step on [${t}] as the current status is[${r}]`);this.requestTransition({transitionName:e,payload:a,into:{name:t,data:n}},!0)}requestState(t,e){this.assertValidStatus(t);let a=this.getCurrentStatusName();if(a!==t)throw new Error(`car't request state on [${t}] as the current status is[${a}]`);this.requestStatus({name:t,data:e},!0)}tryToQueue(t,e){return null!=this.currentRequest&&(this.currentRequest.queueReaction(t,e),!0)}onTransitionRequested(t,e){this.flowEvents.addTransition(t,e)}getNextId(t,e=!1){null==this.ids[t.name]&&(this.ids[t.name]=0);let a=this.ids[t.name]+1;return e?a:(this.ids[t.name]=a,this.ids[t.name])}processStateAndReactions(t,e){let a=this.flowOrchestrator.createRuntimeTracker(this.flowController,FlowEventSource.FLOW_THREAD,exports.FlowEventType.PROCESSING_STATUS).start(`${t.status.name}`);a.info(`processing status - ${t.status.name}`,this.flowController.flowDef.nature===FlowEventNature.MAIN?t.status.data:void 0),this.flowEvents.addProcessingStatus(t,e),a.end(),this.flowController.processReactions(t.status.name)}flagAsSettled(t,e){let a=this.flowOrchestrator.createRuntimeTracker(this.flowController,FlowEventSource.FLOW_THREAD,exports.FlowEventType.SETTLING_STATUS).start(`${t.status.name}`);this.flowEvents.settleProcessingStatus(t,e);let n=this.flowController.flowDef.nature!==FlowEventNature.ASYNC?t.status.data:t.status.data?t.status.data.status:void 0;e?a.milestone(\"STATE\",n):a.milestone(`STATUS - ${t.status.name}`,n),a.end()}onStateRequestCompleted(t,e,a,n,r,s){let i=this.flowOrchestrator.createRuntimeTracker(this.flowController,FlowEventSource.FLOW_THREAD,exports.FlowEventType.STATUS_REQUEST_COMPLETED).start(`${t.status.name}`),o=this.flowOrchestrator.createRuntimeTracker(this.flowController,FlowEventSource.FLOW_THREAD,exports.FlowEventType.ROOT_REQUEST);if(0===this.requestStack.length?(o.debug(`creating new execution stack: [${t.status.name}]`),o.start(`${t.status.name}`)):(o.debug(`adding to current execution stack [${this.requestStack.length}-${this.requestStack[0].status.name}]`),o.continue(`${t.status.name}`)),null==this.currentRequest)throw new Error(`can't complete the request for [${this.flowController.getName()} - ${t.status.name}] as is not flagged as currently in process`);if(this.currentRequest!=t)throw new Error(`can't complete the request for [${this.flowController.getName()} - ${t.status.name}] as it does not match [${this.currentRequest.status.name}]`);if(r.length>0&&a.length>0)throw new Error(\"can't have transitions and states forked at the same time!\");if(this.requestStack.push(this.currentRequest),this.currentRequest=void 0,r.length>1||a.length>1)throw new Error(\"TBI\");function u(t,e,a){i.withLevel(0===e.length?FlowEventLevel.DEBUG:FlowEventLevel.INFO,`executing ${t}: [(${e.length}) - ${e.map(a).join(\",\")}]`)}u(\"queued transitions\",r,t=>t.transitionName),r.forEach(t=>this.flowController.requestTransition(t)),u(\"queued statuses\",a,t=>t.name),a.forEach(t=>this.flowController.requestStatus(t)),u(\"queued states\",n,t=>t.name),n.forEach(t=>this.flowController.requestState(t.name,t.data)),u(\"queued steps\",s,t=>t.transitionName),s.forEach(t=>{let e=StatusLikeParser.parse(t.into);this.flowController.requestStep(e.name,t.transitionName,t.payload,e.data)}),u(\"queued reactions\",e,t=>t[1].name),e.forEach(t=>this.flowController.addReaction(t[0],t[1])),this.requestStack.pop(),0===this.requestStack.length&&(o.debug(`execution stack completed: [${t.status.name}]`),o.end()),i.end()}createContext(t,e){let a=StatusLikeParser.parse(t);return{getData:this.flowController.getState.bind(this.flowController),getStatusData:this.flowController.getStatusData.bind(this.flowController),do:Object.assign(Object.assign({},this.flowController.on(a.name).transitions),this.flowController.on(a.name).steps),chain(t){e(t)},interruptFlow:()=>{this.flowController.stop()},log:t=>this.flowController.log(t)}}getCurrentStatusName(){let t=this.flowEvents.currentStatus;return null==t?void 0:t.name}getCurrentState(){let t=this.flowEvents.currentStatus;return null==t?void 0:t.data}assertValidStatus(t){if(null==this.flowController.on(t))throw new Error(`error requesting a transition into [${t}] unknown status, valid statuses are: [${Object.keys(this.flowController.getStatusDefs()).join(\", \")}]`)}}class FlowEventsTracker{constructor(){this.eventsByStatus={},this.events=[]}addTransition(t,e){let a,n=StatusLikeParser.parse(t.into);a=e?{type:exports.StatusEventType.STEP,reducerName:t.transitionName,newData:n.data,reducerPayload:t.payload}:{type:exports.StatusEventType.TRANSITION,fromStatus:this.currentStatus.name,intoStatus:n,transitionName:t.transitionName,transitionPayload:t.payload},this.lastEvent=a,this.process(a)}addStateFromStatus(t){this.lastEvent=t,this.process(t)}addProcessingStatus(t,e){let a;a=e?{type:exports.StatusEventType.PROCESSING_STATE,data:t.status.data}:{type:exports.StatusEventType.PROCESSING_STATUS,status:t.status},this.currentStatus=t.status,this.lastEvent=a,this.process(a)}settleProcessingStatus(t,e){if(e){if(this.lastEvent.data!==t.status.data)throw new Error(\"unexpected error settling events\");this.lastEvent.type=exports.StatusEventType.STATE,this.eventsByStatus[this.currentStatus.name].lastState=t.status.data}else{if(this.lastEvent.status!==t.status)throw new Error(\"unexpected error settling events\");this.lastEvent.type=exports.StatusEventType.STATUS,this.addStateFromStatus({data:t.status.data,type:exports.StatusEventType.STATE})}}process(t){null==this.eventsByStatus[this.currentStatus.name]&&(this.eventsByStatus[this.currentStatus.name]={allEvents:[],statusName:this.currentStatus.name,lastState:void 0});let e={event:t,statusName:this.currentStatus.name};this.eventsByStatus[this.currentStatus.name].allEvents.push(e),t.type!==exports.StatusEventType.STATE&&t.type!==exports.StatusEventType.PROCESSING_STATE||(this.eventsByStatus[this.currentStatus.name].lastState=t.data),this.events.push(e)}serializeStatesWithStatus(t){return this.serializeWithStatusInfo(Object.assign(Object.assign({},t),{eventTypes:[exports.StatusEventType.STATE]}))}serializeStates(t){return this.serializeWithStatusInfo(Object.assign(Object.assign({},t),{eventTypes:[exports.StatusEventType.STATE]})).map(t=>t.event)}serializeStatuses(t){return this.serializeWithStatusInfo(Object.assign(Object.assign({},t),{eventTypes:[exports.StatusEventType.STATUS]})).map(t=>t.event)}serialize(t){return this.serializeWithStatusInfo(t).map(t=>t.event)}serializeWithStatusInfo(t){if(!t)return this.events;let e=[];return this.events.forEach(a=>{let n=!0;n&&(t.excludeInit&&this.eventsByStatus.$init.allEvents.indexOf(a)>-1&&(n=!1),n&&(t.excludeStop&&this.eventsByStatus.$stop&&this.eventsByStatus.$stop.allEvents.indexOf(a)>-1&&(n=!1),n&&(t.statuses&&t.statuses.forEach(t=>{n||-1===this.eventsByStatus[t].allEvents.indexOf(a)&&(n=!1)}),n&&(t.eventTypes&&-1===t.eventTypes.indexOf(a.event.type)&&(n=!1),n&&e.push(a)))))}),e}getLastStates(){let t={};return Object.keys(this.eventsByStatus).forEach(e=>{t[e]=this.eventsByStatus[e].lastState}),t}getLastState(t){let e=this.eventsByStatus[t];if(null!=e)return e.lastState}}!function(t){t.STEP=\"STEP\",t.TRANSITION=\"TRANSITION\"}(BindBackType||(BindBackType={}));class FlowAnchor{createNewThread(t,e){let a=new FlowEventsTracker,n=new FlowThread(t,e,a);return this.currentThread={flowEvents:a,flowThread:n},n}getCurrentEvents(){return this.currentThread.flowEvents}get currentStatus(){if(this.currentThread)return this.currentThread.flowEvents.currentStatus}getStatusDataProducerFn(){return(t,e)=>{let a=null!=t?t:this.currentStatus.name,n=this.currentThread.flowEvents.getLastStates();return-1===Object.keys(n).indexOf(a)?e:n[a]}}getDataFn(t){return()=>{if(null==this.currentThread)throw new Error(\"error getting the data function associated to this flow, this might happen if you try to mutate the state of the flow before it has been started.\");let e=this.currentThread.flowEvents.currentStatus.name;if(\"$init\"!==e){if(t!==e)throw new Error(`unexpected error trying to retrieve the last status for [${t}, but the current status is [${e}]]`);return this.currentThread.flowEvents.getLastState(t)}}}bindBack(t,e,a){if(!this.currentThread.flowThread.flowController.isRunning)return;let n=e.result&&\"$stop\"!=e.result.name,r=this.currentStatus&&\"$init\"!=this.currentStatus.name;if(n&&r&&(!this.currentStatus||this.currentStatus.name!==t))throw Error(`unable to request [${e.methodName}] as is meant for status [${t}], but the current status is [${this.currentStatus?this.currentStatus.name:\"-\"}]`);if(a===BindBackType.STEP){\"$init\"===this.currentThread.flowThread.getCurrentStatusName()?this.currentThread.flowThread.requestTransition({into:{name:t,data:e.result},payload:e.payload,transitionName:e.methodName},!1):this.currentThread.flowThread.requestStep(e.statusName,e.methodName,e.payload,e.result)}else this.currentThread.flowThread.requestTransition({into:e.result,payload:e.payload,transitionName:e.methodName},!1)}getStatusData(){return this.currentThread.flowEvents.getLastStates()}createRuntimeTracker(t,e){let a=this.currentThread.flowThread;return a.flowOrchestrator.createRuntimeTracker(a.flowController,FlowEventSource.FLOW_CONTROLLER,t,e)}}class Proxyfier{static proxy(t,e){let a={},n=Object.getPrototypeOf(t),r=\"Object\"===n.constructor.name?t:n;return Object.getOwnPropertyNames(r).forEach(n=>{if(\"constructor\"===n)return;\"function\"==typeof r[n]&&(a[n]=((...a)=>{return e(()=>{return t[n](...a)},{methodName:n,payload:a})}))}),a}}class MutatorsFactory{static createDefaultStepsDef(t){return e=>({$update(a){let n,r=t.currentThread.flowThread,s=r.flowOrchestrator.createRuntimeTracker(r.flowController,FlowEventSource.CONTEXT,exports.FlowEventType.USER_CODE,n).start();return n=\"function\"!=typeof a?a:a(e()),s.debug(\"$update\",n).end(),n}})}static createDefaultTransitionDef(t){return()=>({$toStatus(e){let a=StatusLikeParser.parse(e),n=t.currentThread.flowThread;return n.flowOrchestrator.createRuntimeTracker(n.flowController,FlowEventSource.CONTEXT,exports.FlowEventType.USER_CODE,a).start().debug(\"$toStatus\",a).end(),a}})}static createDefaultSteps(t,e){return this.createSteps(t,e,this.createDefaultStepsDef(e))}static createTransitions(t,e,a){let n=this.createDefaultTransitionDef(e);return this.doCreateTransitions(t,e,a?[a,n]:[n])}static createSteps(t,e,a){let n=this.createDefaultStepsDef(e);return this.doCreateSteps(t,e,a?[a,n]:[n])}static doCreateSteps(t,e,a){let n=e.getDataFn(t),r={};return a.forEach(t=>{let e=t(n);r=Object.assign(Object.assign({},r),e)}),this.bindToAnchor(t,e,r,BindBackType.STEP)}static doCreateTransitions(t,e,a){let n=e.getStatusDataProducerFn(),r={};return a.forEach(t=>{let e=t(n);r=Object.assign(Object.assign({},r),e)}),this.bindToAnchor(t,e,r,BindBackType.TRANSITION)}static bindToAnchor(t,e,a,n){return Proxyfier.proxy(a,(a,r)=>{let s=e.currentThread.flowThread.flowController,i=e.currentThread.flowThread.flowOrchestrator.createRuntimeTracker(s,FlowEventSource.CONTEXT,exports.FlowEventType.USER_REACTIONS,s.flowDef.nature).start(),o=s.flowDef.nature===FlowEventNature.MAIN&&\"$update\"!==r.methodName?FlowEventLevel.MILESTONE:FlowEventLevel.DEBUG;i.withLevel(o,`calling: ${r.methodName}`,\"object\"==typeof r.payload?r.payload:\"[reducer]\");try{let s=a();return e.bindBack(t,{statusName:e.currentStatus.name,methodName:r.methodName,payload:r.payload,result:s},n),i.end(),s}catch(t){return void e.createRuntimeTracker(exports.FlowEventType.ERROR_USER_CODE,t).start().milestone(`error running ${r.methodName}`,t).end()}})}}const $INIT=\"$init\",$STOP=\"$stop\";class ReactionDefLikeParser{static parse(t,e,a){return\"object\"==typeof t?t:{name:a||\"anonymous\",reactionType:e,action:t}}}class FlowDefFactory{static create(t,e){let a=FlowDefFactory.statusesByName(t.statuses,e);return a[$INIT]={name:$INIT,steps:MutatorsFactory.createDefaultSteps($INIT,e),transitions:MutatorsFactory.createTransitions($INIT,e),reactions:t.$onInit?t.$onInit.map(t=>ReactionDefLikeParser.parse(t,ReactionType.ALWAYS,\"on init\")):[]},a[$STOP]={name:$STOP,steps:MutatorsFactory.createDefaultSteps($STOP,e),transitions:MutatorsFactory.createTransitions($STOP,e),reactions:t.$onStop?t.$onStop.map(t=>ReactionDefLikeParser.parse(t,ReactionType.ALWAYS,\"on stop\")):[]},Object.assign(Object.assign({statusesByStatusName:a,name:t.name,nature:t.nature?t.nature:FlowEventNature.MAIN},t.hasOwnProperty(\"initialStatus\")?{starter:()=>t.initialStatus}:void 0),t.hasOwnProperty(\"loggingRule\")?{loggingRule:t.loggingRule}:void 0)}static statusesByName(t,e){let a={};return Array.isArray(t)?t.forEach(t=>{a[t]={name:t,steps:[],reactions:[]}}):Objects.foreachEntry(t,(t,n)=>{a[n]={name:n,steps:MutatorsFactory.createSteps(n,e,t.steps),transitions:MutatorsFactory.createTransitions(n,e,t.transitions),reactions:t.reactions?t.reactions.map(t=>ReactionDefLikeParser.parse(t,ReactionType.ALWAYS,`on[${n}]`)):[],getLastData:e.getDataFn(n)}}),a}}class FlowRuntimeTracker{constructor(t,e){this.orchestrator=t,this.event=e}end(t,e){return this.doTick(FlowEventLevel.TRACE,FlowEventTiming.END,t,e)}cancel(t,e){return this.doTick(FlowEventLevel.TRACE,FlowEventTiming.CANCEL,t,e)}continue(t,e){return this.doTick(FlowEventLevel.TRACE,FlowEventTiming.CONTINUE,t,e)}start(t,e){return this.doTick(FlowEventLevel.TRACE,FlowEventTiming.START,t,e)}debug(t,e){return this.doTick(FlowEventLevel.DEBUG,FlowEventTiming.IN_PROCESS,t,e)}info(t,e){return this.doTick(FlowEventLevel.INFO,FlowEventTiming.IN_PROCESS,t,e)}milestone(t,e){return this.doTick(FlowEventLevel.MILESTONE,FlowEventTiming.IN_PROCESS,t,e)}withLevel(t,e,a){return this.doTick(t,FlowEventTiming.IN_PROCESS,e,a)}fork(t,e,a,n){let r=this.orchestrator.createRuntimeTracker(this.event.flowController,this.event.source,t,n).start();r.withLevel(e,a,n),r.end()}doTick(t,e,a,n,r){let s=Object.assign(Object.assign(Object.assign(Object.assign({},this.event),null!=r?{type:r}:void 0),{shortDesc:a,timing:e,level:t}),null!=n?{payload:n}:void 0);return this.orchestrator.onRuntimeEvent(this,s),this}}class FlowOrchestrator{constructor(t){this.eventsProcessor=t}onRuntimeEvent(t,e){this.eventsProcessor.forEach(t=>t(e))}createRuntimeTracker(t,e,a,n){return new FlowRuntimeTracker(this,{flowController:t,source:e,type:a,payload:n,nature:t.flowDef.nature})}}function isPromise(t){return null!=t&&(\"object\"==typeof t&&(\"then\"in t&&\"function\"==typeof t.then))}function isAsap(t){return t instanceof NowImpl||t instanceof LaterImpl}!function(t){t.NOW=\"NOW\",t.LATER=\"LATER\"}(exports.AsapType||(exports.AsapType={}));class NowImpl{constructor(t){this.rawValue=t,this.type=exports.AsapType.NOW}cancel(){return!1}then(t){return t(this.rawValue),this}map(t){return Asaps.now(t(this.rawValue))}chain(t){const[e,a]=Asaps.next(\"map\",FlowEventNature.AUX);return this.then(a=>t(a).then(t=>e(t))),a}catch(t){return this}onCancel(t){return this}}class LaterImpl{constructor(t){this.flow=t,this.type=exports.AsapType.LATER}map(t){let[e,a]=Asaps.next(\"map\",FlowEventNature.AUX);return this.then(a=>e(t(a))),this.onCancel(()=>a.cancel()),a}then(t){return\"resolved\"===this.flow.getCurrentStatusName()?t(this.flow.on(\"resolved\").getLastData()):this.flow.on(\"resolving\").steps.$update(e=>Object.assign(Object.assign({},e),{then:[...e.then,t]})),this}resolve(t){if(\"cancelled\"!==this.flow.getCurrentStatusName())try{this.flow.assertOn(\"resolving\",e=>{e.getData().then.forEach(e=>{e(t)}),this.flow.on(\"resolving\").transitions.$toStatus({name:\"resolved\",data:t})})}catch(e){console.error(e),this.flow.assertOn(\"resolving\",a=>{a.getData().catch.forEach(a=>{a(e,t)}),a.do.$toStatus({name:\"errored\",data:t})})}}onCancel(t){if(\"cancelled\"!==this.flow.getCurrentStatusName())return\"resolving\"===this.flow.getCurrentStatusName()&&this.flow.on(\"resolving\").steps.$update(e=>Object.assign(Object.assign({},e),{onCancel:[...e.onCancel,t]})),this;t()}cancel(){return\"resolving\"===this.flow.getCurrentStatusName()&&(this.flow.assertOn(\"resolving\",t=>{t.getData().onCancel.forEach(t=>{t()}),this.flow.on(\"resolving\").transitions.$toStatus({name:\"cancelled\"})}),!0)}chain(t){const[e,a]=Asaps.next(\"merge\",FlowEventNature.AUX);return this.then(n=>t(n).then(t=>e(t)).onCancel(()=>a.cancel())).onCancel(()=>a.cancel()),a}catch(t){return\"resolving\"===this.flow.getCurrentStatusName()&&this.flow.on(\"resolving\").steps.$update(e=>Object.assign(Object.assign({},e),{catch:[...e.catch,t]})),this}}class ProxyThen{constructor(t,e,a){this.baseAsap=t,this.beforeThen=e,this.afterThen=a}cancel(){return this.baseAsap.cancel()}catch(t){return this.baseAsap.catch(t),this}chain(t){let e=this.baseAsap.chain(t);return Asaps.proxyThen(e,this.beforeThen,this.afterThen)}map(t){let e=this.baseAsap.map(t);return Asaps.proxyThen(e,this.beforeThen,this.afterThen)}onCancel(t){return this.baseAsap.onCancel(t),this}then(t){return this.beforeThen(),this.baseAsap.then(t),this.baseAsap.then(this.afterThen),this}get type(){return this.baseAsap.type}}class AsapParser{static from(t){return isAsap(t)?t:isPromise(t)?Asaps.fromPromise(t):Asaps.now(t)}}class Asaps{static now(t){return new NowImpl(t)}static fromPromise(t,e){let a=new LaterImpl(Flows.createController({name:`future[${e||\"anonymous\"}]`,statuses:{resolving:{},resolved:{},errored:{},cancelled:{}},initialStatus:{name:\"resolving\",data:{then:[],catch:[],onCancel:[]}},nature:FlowEventNature.ASAP}).start());return t.then(t=>a.resolve(t)),t.catch(t=>a.catch(t)),a}static delayed(t,e,a){return Asaps.fromPromise(new Promise(a=>setTimeout(()=>{a(\"function\"==typeof t?t():t)},e)),`delay[${a||\"anonymous\"}]`)}static fetch(t){return Asaps.fromPromise(new Promise(e=>{fetch(t).then(t=>t.json()).then(function(t){e(t)})}),`fetch[${Strings.padEnd(t,15)}]`)}static next(t,e){let a=new LaterImpl(Flows.createController({name:`asap-${t||\"anonymous\"}`,statuses:{resolving:{},resolved:{},errored:{},cancelled:{}},initialStatus:{name:\"resolving\",data:{then:[],catch:[],onCancel:[]}},nature:e||FlowEventNature.ASAP}).start());return[t=>a.resolve(t),a]}static proxyThen(t,e,a){return new ProxyThen(t,e,a)}}function deferParser(t,e){return isAsap(t)?{action:t,name:e.name,payload:e.payload}:t}class FlowImpl{constructor(t,e,a){this.flowDef=t,this.flowAnchor=e,this.flowOrchestrator=a,this.isRunning=!1}start(t){let e=this.flowOrchestrator.createRuntimeTracker(this,FlowEventSource.FLOW_CONTROLLER,exports.FlowEventType.STARTING,t).start();if(this.isRunning)throw new Error(\"can't request a flow that it has been started to start again\");if(this.flowThread=this.flowAnchor.createNewThread(this,this.flowOrchestrator),this.isRunning=!0,null==t&&null==this.flowDef.starter)return this.requestStatus($INIT),this;let a=t||this.flowDef.starter(),n=t=>{this.addReaction($INIT,{action:()=>{e.debug(\"initialStatus\",t),this.requestStatus(t)},reactionType:ReactionType.ONCE,name:\"to initial state\"}),this.addReaction($STOP,{name:\"onStop=>notifyEvents\",reactionType:ReactionType.ONCE,action:t=>{t.chain(()=>{e.debug(\"state machine stopped\"),this.flowThread=null,this.isRunning=!1})}}),this.requestStatus($INIT)};return AsapParser.from(a).then(t=>n(t)),e.end(),this}requestStatus(t){let e=StatusLikeParser.parse(t).name;if(this.isRunning){if(null==this.on(e))throw new Error(`unable to request non existing status [${e}]`);this.flowThread.requestStatus(t,!1)}}requestState(t,e){this.isRunning&&this.flowThread.requestState(t,e)}requestTransition(t){if(this.isRunning)return this.flowThread.requestTransition(t,!1),this}requestStep(t,e,a,n){this.isRunning&&this.flowThread.requestStep(t,e,a,n)}stop(t){if(!this.isRunning)throw new Error(\"unexpected\");return this.addReaction($STOP,{name:\"onStop=>notifyEvents\",reactionType:ReactionType.ONCE,action:()=>{t&&t(this.flowAnchor.getCurrentEvents())}}),this.requestStatus({name:$STOP}),this}alwaysOn(t,e){return this.addReaction(t,{name:\"-\",reactionType:ReactionType.ALWAYS,action:e})}onceOnInit(t){return this.onceOn($INIT,t)}onceOnStop(t){return this.onceOn($STOP,t)}onceOn(t,e,a){let n=this.flowOrchestrator.createRuntimeTracker(this,FlowEventSource.FLOW_CONTROLLER,exports.FlowEventType.ONCE_ON,t).start();n.debug(`[onceOn(${t})`);let r=this.addReaction(t,{name:null!=a?a:\"[userCode]\",reactionType:ReactionType.ONCE,action:e});return n.end(),r}addReaction(t,e){let a=this.flowOrchestrator.createRuntimeTracker(this,FlowEventSource.FLOW_CONTROLLER,exports.FlowEventType.ADDING_REACTION).start(),n=!0;if(this.isRunning){if(this.flowThread.tryToQueue(t,e))return a.info([`queueing reaction: ${e.name}`]),a.end(),this;this.runIf(t,{action:t=>{e.action(t),e.reactionType===ReactionType.ONCE&&(n=!1)},reactionType:e.reactionType,name:e.name})}if(n){let a=this.on(t);if(null==a)throw new Error(`unable to add reactions for unknown event [${t}]`);this.addReactionNext(a,e)}return a.end(),this}addReactionNext(t,e){return t.reactions.push(e),this}getReactions(t){let e=this.on(t);if(null==e)throw new Error(`can't getReactions for unknown status[${t}]`);return e.reactions}getCurrentStatusName(){if(void 0!=this.flowThread)return this.flowThread.getCurrentStatusName()}getEvents(){return this.flowAnchor.getCurrentEvents()}getName(){return this.flowDef.name}getState(){return this.flowThread.getCurrentState()}getStatusData(){return this.flowAnchor.getStatusData()}onInit(){return this.on($INIT)}on(t){return this.flowDef.statusesByStatusName[t]}getStatusDefs(){return this.flowDef.statusesByStatusName}removeReaction(t,e){let a=this.on(t),n=a.reactions;n&&(a.reactions=n.filter(t=>t!==e))}processReactions(t){let e,a=this.flowOrchestrator.createRuntimeTracker(this,FlowEventSource.FLOW_CONTROLLER,exports.FlowEventType.PROCESSING_REACTIONS).start(),n=this.getReactions(t),r=n.map(t=>t.name).join(\",\");return a.info(`ABOUT TO PROCESS: ${r}`),n.forEach(n=>{a.info(`START: ${n.name}`),n.reactionType===ReactionType.ONCE&&this.removeReaction(t,n),n.action(this.flowThread.createContext(t,t=>e=t)),a.info(`END:  ${n.name}`)}),a.info(`REACTIONS PROCESSED${r}`),e&&e(),a.end(t),this}getStateData(){throw new Error(\"TBI\")}reactOnStatusChanged(t){return Object.keys(this.getStatusDefs()).forEach(e=>{this.addReaction(e,{name:\"-\",reactionType:ReactionType.ALWAYS,action:a=>t({name:e,data:a.getData()})})}),this}runIf(t,e,a){let n=this.flowOrchestrator.createRuntimeTracker(this,FlowEventSource.FLOW_CONTROLLER,exports.FlowEventType.RUN_IF,e.name).start();if(!this.isRunning)return a&&a(),void n.end();let r=this.getCurrentStatusName();if(null==r)return a&&a(),void n.end();r===t?this.doRun(e,t):a&&a(),n.end()}doRun(t,e){let a=this.flowOrchestrator.createRuntimeTracker(this,FlowEventSource.FLOW_CONTROLLER,exports.FlowEventType.RUN,t.name).start();a.debug(`${t.name}`),t.action(this.flowThread.createContext(e,t=>t())),a.end()}assertOn(t,e){let a=this.getCurrentStatusName();if(a!==t)throw new Error(`asserting that we are on the status [${t}]. But we are currently on [${a}]`);return e&&this.onceOn(t,t=>e(t)),this}chainInto(t,e,a,n){let r=null!=n?n:`chainInto-${this.getName()}:${e}`;const[s,i]=Asaps.next(r,FlowEventNature.AUX);if(this.addReactionNext(this.on(e),{name:r,reactionType:ReactionType.ONCE,action:t=>s(t)}),\"$init\"!==this.getCurrentStatusName())this.assertOn(t),this.onceOn(t,t=>a(t.do),\"chain-\"+r);else{let t=this.getStatusDefs()[e];this.onceOn(\"$init\",()=>a(t.steps),\"chain-\"+r)}return i}deferInto(t,e,a){let n=`[${this.getName()}]::${t}=>${e}`,r=deferParser(a,{name:n,payload:n}),s=this.flowOrchestrator.createRuntimeTracker(this,FlowEventSource.FLOW_CONTROLLER,exports.FlowEventType.MONITORING,{asap:r.action,name:r.name,payload:r.payload}).start();return r.action.type===exports.AsapType.LATER&&s.milestone(`START monitoring - ${r.name}`,r.payload),r.action.chain(a=>(r.action.type===exports.AsapType.LATER&&s.debug(`STOP monitoring - ${r.name}`),s.end(),this.chainInto(t,e,a))).onCancel(()=>{s.cancel()})}changeLoggingNature(t){this.flowDef.nature=t}log(t){let e=this.flowOrchestrator.createRuntimeTracker(this,FlowEventSource.USER_MSG,exports.FlowEventType.USER_CODE,t).start(),a=e.milestone(void 0,t);return e.end(),a}createRuntimeTracker(t,e){return this.flowOrchestrator.createRuntimeTracker(this,FlowEventSource.FLOW_CONTROLLER,t,e)}getDefinition(){return this.flowDef}toStateAll(){let t=Threads.create({name:`${this.getName()}=>[all statuses]`});return this.reactOnStatusChanged(e=>t.do.$update(e)),t}toState(t){let e=Threads.create({name:`${this.getName()}=>[states:${t}]`});return this.alwaysOn(t,t=>e.do.$update(t.getData())),e}}class FlowFacadeImpl{constructor(t,e){this.flow=t,this.actions=e,this.do=e}addReaction(t,e){return this.flow.addReaction(t,e),this}alwaysOn(t,e){return this.flow.alwaysOn(t,e),this}assertOn(t,e){return this.flow.assertOn(t,e),this}chainInto(t,e,a,n){this.flow.chainInto(t,e,a,n)}getCurrentStatusName(){return this.flow.getCurrentStatusName()}getEvents(){return this.flow.getEvents()}getName(){return this.flow.getName()}getState(){return this.flow.getState()}getStatusData(){return this.flow.getStatusData()}on(t){return this.flow.on(t)}onceOn(t,e,a){return this.flow.onceOn(t,e,a),this}onceOnInit(t){return this.flow.onceOnInit(t),this}onceOnStop(t){return this.flow.onceOnStop(t),this}start(t){return this.flow.start(t),this}stop(t){return this.flow.stop(t),this}get isRunning(){return this.flow.isRunning}onInit(){return this.flow.onInit()}reactOnStatusChanged(t){return this.flow.reactOnStatusChanged(t),this}deferInto(t,e,a){return this.flow.deferInto(t,e,a)}removeReaction(t,e){this.flow.removeReaction(t,e)}changeLoggingNature(t){this.flow.changeLoggingNature(t)}log(t){this.flow.log(t)}createRuntimeTracker(t,e){return this.flow.createRuntimeTracker(t,e)}addReactionNext(t,e){return this.flow.addReactionNext(t,e),this}getDefinition(){return this.flow.getDefinition()}toState(t){return this.flow.toState(t)}toStateAll(){return this.flow.toStateAll()}}const FlowOrchestrator$=t=>new FlowOrchestrator([t=>FLOW_LOGGER.log(t),...t]);class Flows{static create(t){let e=this.createController(t);return this.createFacade(e,t.actions)}static createFacade(t,e){return new FlowFacadeImpl(t,e?e(t):void 0)}static createController(t){let e=new FlowAnchor,a=FlowOrchestrator$(t.pipelineListener?[t.pipelineListener]:[]),n=new FlowImpl(FlowDefFactory.create(t,e),e,a);return a.createRuntimeTracker(n,FlowEventSource.FLOW_FACTORY,exports.FlowEventType.CREATING,t).start().end(),n}}class ThreadFacade{constructor(t,e){this.thread=t,this.actions=e}chain(t,e){this.thread.chain(t,e)}next(t){this.thread.next(t)}start(){return this.thread.start(),this}stop(t){return this.thread.stop(t),this}get do(){let t=this.reducers;return Object.assign(Object.assign({},t),this.actions)}get reducers(){return this.thread.reducers}addReaction(t){return this.thread.addReaction(t)}get isRunning(){return this.thread.isRunning}getData(){return this.thread.getData()}getEvents(){return this.thread.getEvents()}getName(){return this.thread.getName()}changeLoggingNature(t){this.thread.changeLoggingNature(t)}log(t){this.thread.log(t)}once(t,e){return this.thread.once(t,e),this}createRuntimeTracker(t,e){return this.thread.createRuntimeTracker(t,e)}monitor(t,e,a,n){return this.thread.monitor(t,e,a,n)}addReactionNext(t){return this.thread.addReactionNext(t),this}getDefinition(){return this.thread.getDefinition()}}class MethodFinder{static exists(t,e){return null!=t&&this.find(t,e).length>0}static find(t,e=\"\"){let a=Object.getPrototypeOf(t),n=\"Object\"===a.constructor.name?t:a;return Object.getOwnPropertyNames(n).filter(t=>t.startsWith(e))}}class Threads{static create(t,e){let a,n=Flows.createController(Object.assign(Object.assign({name:t.name,statuses:{nextData:Object.assign(Object.assign({},t.reducers?{steps:t.reducers}:void 0),t.reactions?{reactions:t.reactions}:void 0)}},t.hasOwnProperty(\"initialData\")?{initialStatus:AsapParser.from(t.initialData).map(t=>({name:\"nextData\",data:t}))}:void 0),{pipelineListener:t.pipelineListener,nature:t.nature?t.nature:FlowEventNature.MAIN})),r=new ThreadImpl(n,t);if(t.actions&&t.autoBind)throw new Error(\"you can only use actions or autoBind. Both in conjunction is illegal\");if(null!=e)a=new ThreadFacade(r,e);else if(t.autoBind){let e=[],n=Object.assign({},t.autoBind);Object.keys(r.reducers).forEach(a=>{let s=a.substring(1,a.length);MethodFinder.exists(t.autoBind,s)?(n[s]=((...e)=>t.autoBind[s](...e)),e.push(s)):n[s]=((...t)=>r.chain(e=>e[a](...t)))}),a=new ThreadFacade(r,Proxyfier.proxy(n,(t,a)=>-1===e.indexOf(a.methodName)?t():r.monitor(t(),(t,e)=>e[`$${a.methodName}`](t),a.methodName,a.payload)))}else{let e=t.actions?t.actions(r):{};Object.keys(r.reducers).forEach(t=>{let n=t.substring(1,t.length);e[n]||(e[n]=((...e)=>r.chain(a=>a[t](...e),`${a.getName()}.do.${n} ()`)))}),e.updateAsap=((t,e)=>{let a;return a=\"then\"in t?t:t(r.getData()),r.monitor(a,(t,e)=>e.$update(t),null==e?\"updateAsap\":e)}),a=new ThreadFacade(r,e)}return t.cancelAutoStart||a.start(),a}}class PipeImpl{constructor(t,e,a){this.name=t,this.pipeConnector=e,this.pipeThreadDef=a}addReaction(t){return this.baseThread.addReaction(t)}chain(t){return this.baseThread.chain(t)}getData(){return this.baseThread.getData()}getEvents(){return this.baseThread.getEvents()}getName(){return this.baseThread.getName()}next(t){this.baseThread.next(t)}start(){if(null==this.baseThread){let t=Object.assign({name:this.name},this.pipeThreadDef);this.baseThread=Threads.create(t),this.pipeConnector(this.baseThread)}else this.baseThread.start();return this}stop(t){return this.baseThread.stop(void 0),this}get reducers(){return this.baseThread.reducers}get isRunning(){return this.baseThread.isRunning}get do(){return this.baseThread.do}get actions(){return this.baseThread.actions}get thread(){return this.baseThread.thread}changeLoggingNature(t){return this.baseThread.changeLoggingNature(t)}log(t){this.baseThread.log(t)}once(t,e){return this.baseThread.once(t,e),this}createRuntimeTracker(t,e){return this.baseThread.createRuntimeTracker(t,e)}monitor(t,e,a,n){return this.baseThread.monitor(t,e,a,n)}addReactionNext(t){return this.baseThread.addReactionNext(t),this}getDefinition(){return this.baseThread.getDefinition()}}class Pipes{static fromMonitor(t,e,a,n,r){return Pipes.filter(t,Pipes.merge(t,e.asyncThread,a,e.mainThread,n,r),(t,e)=>!Objects.deepEquals(t,e),{nature:FlowEventNature.AUX})}static map(t,e,a,n){return new PipeImpl(t,t=>e.addReaction({name:\"mapper\",dataConsumer:e=>t.do.update(a(e))}),n).start()}static merge(t,e,a,n,r,s){let i=Threads.create({name:\"last states\",nature:FlowEventNature.AUX}),o=Threads.create({name:\"last states\",nature:FlowEventNature.AUX}),u=Threads.create({name:\"last states\",nature:FlowEventNature.AUX});return new PipeImpl(t,t=>{t.addReaction({name:\"append state\",dataConsumer:t=>i.do.update(t)}),[[e,a,o,u],[n,r,u,o]].forEach(e=>{let a=e[0],n=e[1],r=e[2],s=e[3];a.addReaction({name:\"merge\",dataConsumer:e=>{r.reducers.$update(e),t.do.update(n(e,s.getData(),i.getData()))}})})},s).start()}static tupleCombine(t,e,a,n){let r=Threads.create({name:\"last states\",nature:FlowEventNature.AUX}),s=Threads.create({name:\"last states\",nature:FlowEventNature.AUX});return new PipeImpl(`combineArray => [${e.getName()}, ${a.getName()}]`,n=>{n.addReaction({name:t,dataConsumer:t=>{r.do.update(t[0]),s.do.update(t[1])}}),[[e,s,\"left\"],[a,r,\"right\"]].forEach(t=>{let e=t[0],a=t[1],r=t[2];e.addReaction({name:`tuple=>${r}`,dataConsumer:t=>{let e;if(\"left\"===r){e=[t,a.getData()]}else{e=[a.getData(),t]}n.do.update(e)}})})},n).start()}static combine(t,e,a){return new PipeImpl(t,t=>Objects.foreachEntry(e,(e,a)=>e.addReaction({name:\"combine\",dataConsumer:e=>{t.reducers.$update(t=>Object.assign(Object.assign({},t),{[a]:e}))}})),a).start()}static filter(t,e,a,n){let r=Threads.create({name:\"last states\",nature:FlowEventNature.AUX});return new PipeImpl(t,t=>{t.addReaction({name:\"save state\",dataConsumer:t=>r.reducers.$update(t)}),e.addReaction({name:\"pipe-filter\",dataConsumer:e=>{let n=r.getData();a(e,n)&&t.reducers.$update(e)}})},n).start()}}class MonitorFacade{constructor(t,e){this.monitor=t,this.actions=e}start(){return this.monitor.start(),this}addAsyncReaction(t){return this.monitor.addAsyncReaction(t)}addReaction(t){return this.monitor.addReaction(t)}once(t,e){return this.monitor.once(t,e),this}get do(){return this.monitor.do}getEvents(){return this.monitor.getEvents()}getName(){return this.monitor.getName()}stop(t){this.monitor.stop(t)}getData(){return this.monitor.getData()}next(t){this.monitor.next(t)}get asyncThread(){return this.monitor.asyncThread}get mainThread(){return this.monitor.mainThread}get metaFlow(){return this.monitor.metaFlow}chain(t,e){return this.monitor.mainThread.chain(t,e)}transaction(t){return this.monitor.transaction(t)}openTransaction(t){this.monitor.openTransaction(t)}closeTransaction(t){this.monitor.closeTransaction(t)}}var MetaStatus;!function(t){t.STARTING=\"STARTING\",t.INIT=\"INIT\",t.RUNNING=\"RUNNING\",t.ERROR=\"ERROR\",t.IDLE=\"IDLE\",t.IDLE_ON_TRANSACTION=\"IDLE_ON_TRANSACTION\"}(MetaStatus||(MetaStatus={}));class ConanFlow{constructor(t){this.flow=t}on(t){return this.flow.on(t)}reactOnStatusChanged(t){return this.flow.reactOnStatusChanged(t),this}alwaysOn(t,e){return this.flow.alwaysOn(t,e),this}start(t){return this.flow.start(t),this}toStateAll(){let t=Conan.state({name:`${this.flow.getName()}=>[all statuses]`});return this.reactOnStatusChanged(e=>t.do.update(e)),t}toState(t){let e=Conan.light(`${this.flow.getName()}=>[states:${t}]`);return this.alwaysOn(t,t=>e.do.update(t.getData())),e}}class MonitorImpl{constructor(t,e,a){this.mainThread=t,this.asyncThread=e,this.metaFlow=a}start(){return this.mainThread.start(),this}addReaction(t){return this.mainThread.addReaction(t)}addAsyncReaction(t){return this.asyncThread.addReaction(t)}get do(){return this.mainThread.do}getEvents(){return this.mainThread.getEvents()}getName(){return this.mainThread.getName()}stop(t){this.mainThread.stop(t)}getData(){return this.mainThread.getData()}next(t){this.mainThread.next(t)}once(t,e){return this.mainThread.once(t,e),this}chain(t,e){return this.mainThread.chain(t,e)}openTransaction(t){null==this.currentTransaction&&(this.currentTransaction=this.mainThread.createRuntimeTracker(exports.FlowEventType.MONITOR_TRANSACTION).start(),this.currentTransaction.info(`starting transaction: ${null==t?\"[anonymous]\":t}`))}closeTransaction(t){let e=new ConanFlow(this.metaFlow).toStateAll().map(t=>t.data),a=!1,n=!1,r=void 0;r=Pipes.tupleCombine(\"idleChecker\",this.asyncThread,e.mainThread,{nature:FlowEventNature.AUX}).addReaction({name:\"wait for both idle\",dataConsumer:([e,s])=>{if(e.status===exports.MonitorStatus.IDLE&&(s.status===MetaStatus.IDLE_ON_TRANSACTION||s.status===MetaStatus.IDLE)){let e=void 0;e=this.mainThread.addReaction({name:\"wait for both idle\",dataConsumer:s=>{this.currentTransaction.info(\"finishing transaction\"),this.currentTransaction.end(),this.currentTransaction=null,e?e.release():n=!0,r?r.release():a=!0,t&&t(s)}}),n&&e.release()}}}),a&&r.release()}transaction(t,e){let[a,n]=Asaps.next(`transaction[${e}]`);return this.openTransaction(),t(this.do),this.closeTransaction(t=>a(t)),n}}class MetaMutatorsFactory{static createTransitions(t,e){return{toIdle(){let e=t().transactionCount;return{name:0===e?\"idle\":\"idleOnTransaction\",data:{status:0===e?MetaStatus.IDLE:MetaStatus.IDLE_ON_TRANSACTION,transactionCount:e,lastError:t().lastError}}},toInit:()=>({name:\"init\",data:{status:MetaStatus.INIT,transactionCount:t().transactionCount,lastError:t().lastError}}),toRunning:()=>({name:\"running\",data:{status:MetaStatus.RUNNING,transactionCount:t().transactionCount,lastError:t().lastError}}),toError:e=>({name:\"error\",data:{status:MetaStatus.ERROR,transactionCount:t().transactionCount,lastError:e}})}}static createSteps(t){return{$onTransaction(e){let a=t();return{status:a.status,transactionCount:e===FlowEventTiming.START?++a.transactionCount:--a.transactionCount,lastError:a.lastError}}}}}class Monitors{static fromThread(t){let e=Monitors.create({name:t.getName(),initialData:t.getDefinition().initialData,nature:t.getDefinition().nature,actions:t.getDefinition().actions,autoBind:t.getDefinition().autoBind,reducers:t.getDefinition().reducers},t.actions);return t.addReaction({name:\"pipe\",dataConsumer:t=>e.do.$update(t)}),e}static create(t,e){let a=this.createAsyncThread(t),n=this.createMetaFlow(t.name),r=Threads.create(Object.assign(Object.assign({},t),{nature:t.nature,pipelineListener:t=>{this.orchestrate(t,a,n)}}),e),s=new MonitorImpl(r,a,n);return new MonitorFacade(s,r.actions)}static createMetaFlow(t){let e=Flows.create({name:`${t}=>[meta]`,statuses:{starting:{transitions:t=>MetaMutatorsFactory.createTransitions(t,\"starting\"),steps:t=>MetaMutatorsFactory.createSteps(t)},init:{transitions:t=>MetaMutatorsFactory.createTransitions(t,\"init\"),steps:t=>MetaMutatorsFactory.createSteps(t)},running:{transitions:t=>MetaMutatorsFactory.createTransitions(t,\"running\"),steps:t=>MetaMutatorsFactory.createSteps(t)},idle:{transitions:t=>MetaMutatorsFactory.createTransitions(t,\"idle\"),steps:t=>MetaMutatorsFactory.createSteps(t)},idleOnTransaction:{transitions:t=>MetaMutatorsFactory.createTransitions(t,\"idleOnTransaction\"),steps:t=>MetaMutatorsFactory.createSteps(t)},error:{transitions:t=>MetaMutatorsFactory.createTransitions(t,\"error\"),steps:t=>MetaMutatorsFactory.createSteps(t)}},initialStatus:{name:\"starting\",data:{status:MetaStatus.STARTING,transactionCount:0}},nature:FlowEventNature.META});return e.start(),e}static createAsyncThread(t){return Threads.create({name:`${t.name}=>[async]`,actions:t=>({tick(e){t.reducers.$update(t=>({status:exports.MonitorStatus.ASYNC_START,currentAction:e,inProgressActions:[...t.inProgressActions,e]}))},unTick(e,a){t.reducers.$update(t=>({status:a?exports.MonitorStatus.ASYNC_CANCELLED:exports.MonitorStatus.ASYNC_FULFILLED,currentAction:e,inProgressActions:t.inProgressActions.filter(t=>t!==e)})),0===t.getData().inProgressActions.length&&t.reducers.$update(t=>({inProgressActions:[],currentAction:void 0,status:exports.MonitorStatus.IDLE}))}}),initialData:{inProgressActions:[],status:exports.MonitorStatus.IDLE,currentAction:void 0},nature:FlowEventNature.ASYNC})}static orchestrate(t,e,a){let n=t.timing;if(t.type===exports.FlowEventType.ERROR_USER_CODE&&a.assertOn(a.getCurrentStatusName(),t=>t.do.toError()),t.type!==exports.FlowEventType.MONITORING){if(t.type===exports.FlowEventType.MONITOR_TRANSACTION&&(n===FlowEventTiming.START||n===FlowEventTiming.END))switch(a.getCurrentStatusName()){case\"starting\":a.assertOn(\"starting\",t=>t.do.$onTransaction(n));break;case\"init\":a.assertOn(\"init\",t=>t.do.$onTransaction(n));break;case\"running\":a.assertOn(\"running\",t=>t.do.$onTransaction(n));break;case\"idle\":a.assertOn(\"idle\",t=>t.do.$onTransaction(n));break;case\"idleOnTransaction\":a.assertOn(\"idleOnTransaction\",t=>{t.do.$onTransaction(n),0===t.getData().transactionCount&&n===FlowEventTiming.END&&t.do.toIdle()})}if(t.type===exports.FlowEventType.ROOT_REQUEST)if(n===FlowEventTiming.START||n===FlowEventTiming.CONTINUE){if(\"$init\"===t.flowController.getCurrentStatusName())return;switch(a.getCurrentStatusName()){case\"idle\":a.assertOn(\"idle\",t=>t.do.toRunning());break;case\"idleOnTransaction\":a.assertOn(\"idleOnTransaction\",t=>t.do.toRunning());break;case\"init\":a.assertOn(\"init\",t=>t.do.toRunning())}}else if(n===FlowEventTiming.END)switch(a.getCurrentStatusName()){case\"starting\":a.assertOn(\"starting\",t=>t.do.toInit());break;case\"init\":a.assertOn(\"init\",t=>t.do.toIdle());break;case\"running\":e.getData().status===exports.MonitorStatus.IDLE&&a.assertOn(\"running\",t=>t.do.toIdle());break;case\"idleOnTransaction\":e.getData().status===exports.MonitorStatus.IDLE&&a.assertOn(\"idleOnTransaction\",t=>t.do.toIdle())}}else n===FlowEventTiming.START?(e.do.tick(t.payload),a.assertOn(a.getCurrentStatusName(),t=>t.do.toRunning())):n===FlowEventTiming.END?e.do.unTick(t.payload,!1):n===FlowEventTiming.CANCEL&&e.do.unTick(t.payload,!0)}}class ConanState{constructor(t){this.monitor=t}getName(){return this.monitor.getName()}connectMap(t,e){return React.createElement(StateMapConnect,{from:this,into:t,mapper:e})}connectData(t){return React.createElement(StateMapConnect,{from:this,into:t,mapper:t=>t})}connect(t){return React.createElement(StateConnect,{from:this,into:t})}connectLive(t,e){return React.createElement(StateLive,{from:this,renderer:t,fallbackValue:e})}addAsyncReaction(t){return this.monitor.addAsyncReaction(t)}addDataReaction(t){return this.monitor.addReaction(t)}get do(){return this.monitor.do}start(){return this.monitor.start(),this}stop(t){return this.monitor.stop(t),this}get actions(){return this.monitor.actions}getData(){return this.monitor.getData()}asyncMerge(t,e,a){let n=Pipes.fromMonitor(`monitor[${this.getName()}]`,this.monitor,e,a,{initialData:t,nature:FlowEventNature.HELPER});return new ConanState(Monitors.fromThread(new ThreadFacade(n,this.actions)))}filter(t){let e=Pipes.filter(`filter=>${this.getName()}`,this.mainThread,t);return new ConanState(Monitors.fromThread(e))}map(t){let e=Pipes.map(`map=>${this.getName()}`,this.mainThread,t);return new ConanState(Monitors.fromThread(e))}merge(t,e){let a=Pipes.merge(`merge=>${this.getName()}`,this.mainThread,e,t.mainThread,(t,a,n)=>e(a,t,n));return new ConanState(Monitors.fromThread(a))}tuple(t){let e=Pipes.tupleCombine(`mergeTuple=>${this.getName()}`,this.mainThread,t.mainThread);return new ConanState(Monitors.fromThread(e))}get mainThread(){return this.monitor.mainThread}get asyncState(){return Conan.fromThread(this.monitor.asyncThread)}get metaFlow(){return Conan.fromFlow(this.monitor.metaFlow)}static combine(t,e,a){let n=Pipes.combine(t,Objects.mapKeys(e,t=>t.mainThread),a);return new ConanState(Monitors.fromThread(n))}getEvents(){return this.mainThread.getEvents()}always(t){this.addDataReaction({name:\"always\",dataConsumer:e=>t(e)})}openTransaction(t){this.monitor.openTransaction(t)}closeTransaction(t){this.monitor.closeTransaction(t)}}class Conan{static light(t,e,a=FlowEventNature.MAIN){return new ConanState(Monitors.create(Object.assign({name:t,initialData:e},a?{nature:a}:void 0)))}static state(t){return new ConanState(Monitors.create(t))}static fromThread(t){let e=Conan.state(t.getDefinition());return t.addReaction({name:\"pipe\",dataConsumer:t=>e.do.update(t)}),e}static flow(t){let e=new ConanFlow(Flows.create(t));return e.start(),e}static fromFlow(t){return new ConanFlow(t)}}class Lists{static mergeCombine(t,e,a,n){let r=[],s=!1;return r=e.map(e=>{for(let r of t)if(a(r,e))return s=!0,n(r,e);return e}),s?r:e}}exports.AsapParser=AsapParser,exports.Asaps=Asaps,exports.Conan=Conan,exports.ConanState=ConanState,exports.ContextStateConnect=ContextStateConnect,exports.ContextStateLive=ContextStateLive,exports.ContextStateMapConnect=ContextStateMapConnect,exports.DiAnnotationsMetadataFactory=DiAnnotationsMetadataFactory,exports.DiContextFactory=DiContextFactory,exports.DynamicOrStatics=DynamicOrStatics,exports.Flows=Flows,exports.InjectByName=InjectByName,exports.InjectByType=InjectByType,exports.InjectDynamic=InjectDynamic,exports.Lists=Lists,exports.LoggerFilters=LoggerFilters,exports.Objects=Objects,exports.ReactStateContext=ReactStateContext,exports.StateConnect=StateConnect,exports.StateLive=StateLive,exports.StateMapConnect=StateMapConnect,exports.contextStateConnect=contextStateConnect,exports.contextStateLive=contextStateLive,exports.contextStateMapConnect=contextStateMapConnect,exports.diAnnotationsCrud=diAnnotationsCrud,exports.getLoggingFilter=getLoggingFilter,exports.isAsap=isAsap,exports.setLoggingFilter=setLoggingFilter,exports.stateConnect=stateConnect,exports.stateLive=stateLive,exports.stateMapConnect=stateMapConnect,exports.updateLoggingFilter=updateLoggingFilter,exports.useConanState=useConanState,exports.useContextConanState=useContextConanState,exports.useFlow=useFlow,exports.useFlowStatus=useFlowStatus;"]},"metadata":{},"sourceType":"script"}