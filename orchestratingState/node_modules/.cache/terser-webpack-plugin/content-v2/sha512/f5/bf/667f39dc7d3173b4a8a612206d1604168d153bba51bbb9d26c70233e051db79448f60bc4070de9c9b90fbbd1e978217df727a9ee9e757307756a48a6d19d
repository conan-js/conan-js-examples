{"map":{"version":3,"sources":["static/js/main.dbeaa1ab.chunk.js"],"names":["this","push","14","module","exports","__webpack_require__","38","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","slicedToArray","toConsumableArray","defineProperty","objectSpread2","main_min","OrchestratingStateApp","market$","light","id","price","stockOrder$","stockId","buy","sell","changeStockPrice","delta","do","update","current","map","it","newValue","Object","changeStockOrder","toChange","alertsByStock$","alertStream$","alertsByStock","newStream","foreachEntry","stockAlerts","concat","sort","left","right","timestamp","tuple","addDataReaction","name","dataConsumer","_ref","_ref2","stockOrders","stocks","newAlerts","forEach","stockOrder","operation","stock","find","orderSnapshot","stockSnapshot","Date","now","nextState","getData","newAlert","alertsForStock","lastAlert","length","deepEquals","connectLive","stockPrices","stockPrice","onClick","reverse","a","render","createElement","StrictMode","document","getElementById"],"mappings":"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"},"code":"(this[\"webpackJsonpconanjs-orchestrating-state\"]=this[\"webpackJsonpconanjs-orchestrating-state\"]||[]).push([[0],{14:function(t,e,n){t.exports=n(38)},38:function(t,e,n){\"use strict\";n.r(e);var r=n(0),c=n.n(r),o=n(12),u=n.n(o),a=n(13),l=n(7),i=n(5),s=n(2),d=n(1);function p(){var t=d.Conan.light(\"market\",[{id:\"TSLA\",price:1e3},{id:\"AAPL\",price:350}]),e=d.Conan.light(\"stockOrders\",[{stockId:\"AAPL\",buy:300,sell:400},{stockId:\"TSLA\",buy:900,sell:1200}]);function n(e,n){t.do.update((function(t){return t.map((function(t){var r=t.price+n;return t.id!==e?t:Object(s.a)(Object(s.a)({},t),{},{price:r>0?r:0})}))}))}function c(t,n,r){e.do.update((function(e){return e.map((function(e){var c=e[r]+n;return e.stockId!==t?e:Object(s.a)(Object(s.a)({},e),{},Object(i.a)({},r,c>0?c:0))}))}))}var o=d.Conan.light(\"alerts\",{}),u=o.map((function(t){var e=[];return d.Objects.foreachEntry(t,(function(t){return e=[].concat(Object(l.a)(e),Object(l.a)(t))})),e.sort((function(t,e){return t.timestamp-e.timestamp}))}));return e.tuple(t).addDataReaction({name:\"checking alerts\",dataConsumer:function(t){var e=Object(a.a)(t,2),n=e[0],r=e[1],c=[];n.forEach((function(t){var e,n=r.find((function(e){return e.id===t.stockId}));e=n.price>=t.sell?\"sell\":n.price<=t.buy?\"buy\":\"keep\",c.push({operation:e,orderSnapshot:t,stockSnapshot:n,timestamp:Date.now()})}));var u=Object(s.a)({},o.getData());c.forEach((function(t){if(null==u[t.stockSnapshot.id])u[t.stockSnapshot.id]=[t];else{var e=u[t.stockSnapshot.id],n=e[e.length-1];d.Objects.deepEquals(t.stockSnapshot,n.stockSnapshot)&&d.Objects.deepEquals(t.orderSnapshot,n.orderSnapshot)||e.push(t)}})),o.do.update(u)}}),r.createElement(\"div\",null,r.createElement(\"h1\",null,\"PRICES\"),t.connectLive((function(t){return r.createElement(\"ul\",null,t.map((function(t){return r.createElement(\"li\",null,t.id,\" - \",t.price,\"$ \\xa0\",r.createElement(\"button\",{onClick:function(){return n(t.id,10)}},\"+10\"),r.createElement(\"button\",{onClick:function(){return n(t.id,100)}},\"+100\"),r.createElement(\"button\",{onClick:function(){return n(t.id,-10)}},\"-10\"),r.createElement(\"button\",{onClick:function(){return n(t.id,-100)}},\"-100\"))})))})),r.createElement(\"h1\",null,\"ORDERS\"),e.connectLive((function(t){return r.createElement(\"ul\",null,t.map((function(t){return r.createElement(\"li\",null,t.stockId,\" \",r.createElement(\"br\",null),\"BUY: \",t.buy,\" \\xa0\",r.createElement(\"button\",{onClick:function(){return c(t.stockId,10,\"buy\")}},\"+10\"),r.createElement(\"button\",{onClick:function(){return c(t.stockId,100,\"buy\")}},\"+100\"),r.createElement(\"button\",{onClick:function(){return c(t.stockId,-10,\"buy\")}},\"-10\"),r.createElement(\"button\",{onClick:function(){return c(t.stockId,-100,\"buy\")}},\"-100\"),r.createElement(\"br\",null),\"SELL: \",t.sell,\" \\xa0\",r.createElement(\"button\",{onClick:function(){return c(t.stockId,10,\"sell\")}},\"+10\"),r.createElement(\"button\",{onClick:function(){return c(t.stockId,100,\"sell\")}},\"+100\"),r.createElement(\"button\",{onClick:function(){return c(t.stockId,-10,\"sell\")}},\"-10\"),r.createElement(\"button\",{onClick:function(){return c(t.stockId,-100,\"sell\")}},\"-100\"),r.createElement(\"br\",null))})))})),r.createElement(\"h1\",null,\"ALERTS\"),u.connectLive((function(t){return r.createElement(\"ul\",null,t.reverse().map((function(t){return r.createElement(\"li\",null,t.operation,\" - \",t.stockSnapshot.id,\" - \",t.stockSnapshot.price,\" [\",\"buy\"===t.operation?t.orderSnapshot.buy:\"sell\"===t.operation?t.orderSnapshot.sell:\"\".concat(t.orderSnapshot.buy,\"/\").concat(t.orderSnapshot.sell),\"]\")})))})))}u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(p,null)),document.getElementById(\"root\"))}},[[14,1,2]]]);","extractedComments":[]}