(this["webpackJsonpconanjs-orchestrating-state"]=this["webpackJsonpconanjs-orchestrating-state"]||[]).push([[0],{14:function(t,e,n){t.exports=n(38)},38:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),o=n(12),u=n.n(o),a=n(13),l=n(7),i=n(5),s=n(2),d=n(1);function p(){var t=d.Conan.light("market",[{id:"TSLA",price:1e3},{id:"AAPL",price:350}]),e=d.Conan.light("stockOrders",[{stockId:"AAPL",buy:300,sell:400},{stockId:"TSLA",buy:900,sell:1200}]);function n(e,n){t.do.update((function(t){return t.map((function(t){var r=t.price+n;return t.id!==e?t:Object(s.a)(Object(s.a)({},t),{},{price:r>0?r:0})}))}))}function c(t,n,r){e.do.update((function(e){return e.map((function(e){var c=e[r]+n;return e.stockId!==t?e:Object(s.a)(Object(s.a)({},e),{},Object(i.a)({},r,c>0?c:0))}))}))}var o=d.Conan.light("alerts",{}),u=o.map((function(t){var e=[];return d.Objects.foreachEntry(t,(function(t){return e=[].concat(Object(l.a)(e),Object(l.a)(t))})),e.sort((function(t,e){return t.timestamp-e.timestamp}))}));return e.tuple(t).addDataReaction({name:"checking alerts",dataConsumer:function(t){var e=Object(a.a)(t,2),n=e[0],r=e[1],c=[];n.forEach((function(t){var e,n=r.find((function(e){return e.id===t.stockId}));e=n.price>=t.sell?"sell":n.price<=t.buy?"buy":"keep",c.push({operation:e,orderSnapshot:t,stockSnapshot:n,timestamp:Date.now()})}));var u=Object(s.a)({},o.getData());c.forEach((function(t){if(null==u[t.stockSnapshot.id])u[t.stockSnapshot.id]=[t];else{var e=u[t.stockSnapshot.id],n=e[e.length-1];d.Objects.deepEquals(t.stockSnapshot,n.stockSnapshot)&&d.Objects.deepEquals(t.orderSnapshot,n.orderSnapshot)||e.push(t)}})),o.do.update(u)}}),r.createElement("div",null,r.createElement("h1",null,"PRICES"),t.connectLive((function(t){return r.createElement("ul",null,t.map((function(t){return r.createElement("li",null,t.id," - ",t.price,"$ \xa0",r.createElement("button",{onClick:function(){return n(t.id,10)}},"+10"),r.createElement("button",{onClick:function(){return n(t.id,100)}},"+100"),r.createElement("button",{onClick:function(){return n(t.id,-10)}},"-10"),r.createElement("button",{onClick:function(){return n(t.id,-100)}},"-100"))})))})),r.createElement("h1",null,"ORDERS"),e.connectLive((function(t){return r.createElement("ul",null,t.map((function(t){return r.createElement("li",null,t.stockId," ",r.createElement("br",null),"BUY: ",t.buy," \xa0",r.createElement("button",{onClick:function(){return c(t.stockId,10,"buy")}},"+10"),r.createElement("button",{onClick:function(){return c(t.stockId,100,"buy")}},"+100"),r.createElement("button",{onClick:function(){return c(t.stockId,-10,"buy")}},"-10"),r.createElement("button",{onClick:function(){return c(t.stockId,-100,"buy")}},"-100"),r.createElement("br",null),"SELL: ",t.sell," \xa0",r.createElement("button",{onClick:function(){return c(t.stockId,10,"sell")}},"+10"),r.createElement("button",{onClick:function(){return c(t.stockId,100,"sell")}},"+100"),r.createElement("button",{onClick:function(){return c(t.stockId,-10,"sell")}},"-10"),r.createElement("button",{onClick:function(){return c(t.stockId,-100,"sell")}},"-100"),r.createElement("br",null))})))})),r.createElement("h1",null,"ALERTS"),u.connectLive((function(t){return r.createElement("ul",null,t.reverse().map((function(t){return r.createElement("li",null,t.operation," - ",t.stockSnapshot.id," - ",t.stockSnapshot.price," [","buy"===t.operation?t.orderSnapshot.buy:"sell"===t.operation?t.orderSnapshot.sell:"".concat(t.orderSnapshot.buy,"/").concat(t.orderSnapshot.sell),"]")})))})))}u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(p,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.dbeaa1ab.chunk.js.map