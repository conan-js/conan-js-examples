(this["webpackJsonpconanjs-testing"]=this["webpackJsonpconanjs-testing"]||[]).push([[0],{32:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),o=n(7),s=n.n(o),c=n(1),u=c.Conan.light("test-async-number-value"),r=c.Conan.light("test-number-value",void 0),i=c.Conan.light("timesIdle",0);function d(e){var t=e.action,n=e.labels;return a.createElement("button",{style:{textAlign:"left"},onClick:t},a.createElement("div",null,a.createElement("b",null,n[0])),a.createElement("div",null,n[1]))}function m(){return a.createElement("div",null,a.createElement("h1",null,"Testing synchronous values"),a.createElement("p",null,"All you have to do is to call getData() on the Conan.State after you perform all of your synchronous operations, in conan everything that is synchronous is kept synchronous"),a.createElement(d,{labels:["test - success","counter$.do.update (3);"],action:function(){r.do.update(3)}}),a.createElement(d,{labels:["test - fail","counter$.do.update (5);"],action:function(){r.do.update(5)}}),r.connectLive((function(e){return a.createElement("div",null,a.createElement("h3",null,"Expected Value: 3"),a.createElement("h3",null,"Actual Value: ",e),a.createElement("h3",null,"Result: ",3===e?"pass":"fail"))})),a.createElement("h1",null,"Testing asynchronous values"),a.createElement("h2",null,"Chaining"),a.createElement("p",null,"If you define your async actions using monitors, the return of your action would be an ASAP that you can use to test as soon as it is completed"),a.createElement(d,{labels:["1.5s-> (4)","counter$.do.updateAsap (Asaps.delayed(4, 1500)).then...;"],action:function(){return r.do.updateAsap(c.Asaps.delayed(4,1500),"1.5s-> (4)").then(u.do.update)}}),a.createElement(d,{labels:["2.5s-> (3)","counter$.do.updateAsap (Asaps.delayed(3, 2500)).then...;"],action:function(){return r.do.updateAsap(c.Asaps.delayed(3,2500),"2.5s-> (3)").then(u.do.update)}}),a.createElement("h3",null,"updateAsap.then: Latest Async value [",u.connectLive((function(e){return a.createElement("span",null,e)})),"]"),a.createElement("h1",null,"Testing - getting events"),a.createElement("p",null,"You can check all events that have been raised on a Conan State by calling getEvents. To return only state events: you can pass options: eventTypes: [StatusEventType.STATE], excludeInit: true"),a.createElement("h3",null,"latest values: ",r.connectLive((function(){return a.createElement("div",null,r.getEvents().serialize({eventTypes:[c.StatusEventType.STATE],excludeInit:!0}).map((function(e,t){return null!=e.data?e.data:"[undefined]"})).join(", "))}))),a.createElement("h3",null,"async state: ",r.asyncState.connectLive((function(e){var t=e.inProgressActions.map((function(e){return e.name})).join(", ");return a.createElement("div",null,"current async ops: ",t)}))),a.createElement("h1",null,"Waiting for onIdle + transactions"),a.createElement("p",null,"If you need to perform many actions chained, and specially if some of them are async, it might be difficult to know when to test your state, with this in mind, you can listen to the idle state, but you will find out that in between operations, the conan state will be back to IDLE, so it would not really help to know when to run your tests (you are likely to be interested in the last idle). There is a handy method in ConanState for this: .transaction. When ran inside a transaction, only when all actions are completed including the async operation"),a.createElement(d,{labels:["open transaction","counter$.openTransaction();"],action:function(){return r.openTransaction("test-transaction")}}),a.createElement(d,{labels:["close transaction","counter$.closeTransaction();"],action:function(){return r.closeTransaction()}}),a.createElement("h3",null,r.metaFlow.toStateAll().connectLive((function(e){return a.createElement("div",null,a.createElement("div",null,"current status:  ",e.data.status),a.createElement("div",null,"transactions open: ",e.data.transactionCount))}))),a.createElement("h3",null,"times idle: ",i.connectLive((function(e){return a.createElement("span",null,e)}))))}r.metaFlow.toState("idle").always((function(){return i.do.update((function(e){return++e}))})),s.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(m,null)),document.getElementById("root"))},8:function(e,t,n){e.exports=n(32)}},[[8,1,2]]]);
//# sourceMappingURL=main.5d239015.chunk.js.map